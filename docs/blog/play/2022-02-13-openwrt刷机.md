---
title: openwrt åˆ·æœº
date: 2022-02-13 01:18:16
tags:
- openwrt
- å¦‚ä½•å®ç°ç½‘ç»œè‡ªç”±
categories:
- æŠ˜è…¾è®°å½•
---

ä»‹ç»äº†ä»ç¡¬ä»¶é€‰æ‹©åˆ°åˆ·æœºæ•´ä¸ªè¿‡ç¨‹
<!-- more -->

## Openwrt ç¡¬ä»¶é€‰æ‹©

å¦‚ä½•é€‰æ‹©ä¸€ä¸ªå¯ä»¥åˆ· openwrt çš„è·¯ç”±å™¨ï¼Ÿ

- [è€æˆ¿å­ WiFi å¸ƒç½‘æ”»ç•¥ ç¯‡ä¸‰åå…«ï¼šWiFi 6 æ¢…æ—æˆ– openwrt å›ºä»¶è·¯ç”±å™¨å…¥æ‰‹æŒ‡å—_è·¯ç”±å™¨_ä»€ä¹ˆå€¼å¾—ä¹° (smzdm.com)](https://post.smzdm.com/p/awznd6qg/)
- [è€æˆ¿å­ WiFi å¸ƒç½‘æ”»ç•¥ ç¯‡äºŒåå››ï¼šä¸æ¼æ²¹çš„è·¯ç”±å™¨ä¸æ˜¯å¥½çŸ¿æœºï¼ŒçŸ¿æ¸£è·¯ç”±å™¨ç›˜ç‚¹_è·¯ç”±å™¨_ä»€ä¹ˆå€¼å¾—ä¹° (smzdm.com)](https://post.smzdm.com/p/apzkqlrx/)
- æè·¯ç”±ã€æ–°è·¯ç”±ï¼š[æœºçš‡ï¼å‡ ç§é«˜æ€§ä»·æ¯”çŸ¿æ¸£è·¯ç”±å™¨æ¯”è¾ƒ - æ–°æ‰‹å…¥é—¨åŠå…¶å®ƒ (ç¡¬ä»¶)-æ©å±±æ— çº¿è®ºå› (right.com.cn)](https://www.right.com.cn/forum/thread-8097191-1-1.html)

### å°ç±³è·¯ç”±å™¨å‹å·æ€»ç»“

#### CPU åˆ†ç±»

- mt7621 å‹å·
  - R3Gï¼šå’¸é±¼ 50 å…ƒå·¦å³ï¼Œæœ‰ USB3.0 æ¥å£ï¼Œ128MB çš„ flashã€‚
  - 4A åƒå…†ç‰ˆï¼šå’¸é±¼ 70 å…ƒå·¦å³ï¼Œå¤–è§‚ç®€çº¦æ¼‚äº®ï¼Œ16MB NOR flash æœ‰ç‚¹å°ã€‚
  - C660xï¼šå’¸é±¼ 100 å¤šï¼Œæ”¯æŒ wifi6
- é«˜é€šå‹å·
  - **ç›®å‰ (22.03) åªæœ‰ AX6S æ˜¯å— openwrt å®˜æ–¹æ”¯æŒçš„**ï¼ŒAX6, AX3600 æœ‰ç¬¬ä¸‰æ–¹æ”¯æŒã€‚AX5 ç­‰å…¶ä½™æœªæ”¯æŒ
    - ä¸èƒ½åˆ·å¥½åƒæ˜¯ linux kernel è¿˜ä¸æ”¯æŒé«˜é€šçš„ IPQ SoCã€‚
    - B ç«™çœ‹åˆ°è¯´ AX5 åˆ· openwrt éœ€è¦ç¡¬æ”¹å†…å­˜ä¸º 1Gï¼Œå¥½åƒè¯´é«˜é€šçš„ wifi é©±åŠ¨éå¸¸è€—å†…å­˜
  - AX6Sï¼š220 å·¦å³
  - AX6:250-300 å·¦å³

#### å°ç±³ç³»åˆ—äº§å“

- çº¢ç±³ AX5ï¼Œå°ç±³ AX1800 æ¢çš®
  - IPQ6000, 4 æ ¸ <A53@1.2Ghz>ï¼š[[OpenWrt Wiki\] Xiaomi AX1800 (AX5/RA67)](https://openwrt.org/inbox/toh/xiaomi/xiaomi_ax1800)

- **çº¢ç±³AX6**ï¼Œå°ç±³AX3600æ¢çš®
  - AX6, **IPQ8071A**@1.4GHz, 512(ram) + 128ï¼š[[OpenWrt Wiki] Xiaomi Redmi AX6 Wi-Fi 6 Mesh Router](https://openwrt.org/inbox/toh/xiaomi/xiaomi_redmi_ax6_ax3000)
  - AX3600, IPQ8071A, 512 + 256ï¼š[[OpenWrt Wiki] Xiaomi AX3600](https://openwrt.org/inbox/toh/xiaomi/xiaomi_ax3600)
  - å¯¹æ¯”ï¼š[çº¢ç±³AX6æ‹†æœºï¼Œæ—§æ¬¾WIFI6æ— çº¿è·¯ç”±å™¨-è·¯ç”±å™¨äº¤æµ (acwifi.net)](https://www.acwifi.net/11176.html)
- AX3000
  - **çº¢ç±³AX3000ï¼ˆæ¯”è¾ƒå¸¸è§ï¼‰**ï¼ŒIPQ5000ï¼šåŒæ ¸<A53@1.0GHz>, 256(ram) + 128ï¼š[Redmiè·¯ç”±å™¨AX3000ç«‹å³è´­ä¹°-å°ç±³å•†åŸ](https://www.mi.com/shop/buy/detail?product_id=14538)
  - å°ç±³AX3000ï¼šIPQ5000ï¼šåŒæ ¸<A53@1.0GHz>, 256(ram) + 128ï¼š[å°ç±³è·¯ç”±å™¨AX3000ç«‹å³è´­ä¹°-å°ç±³å•†åŸ (mi.com)](https://www.mi.com/shop/buy/detail?product_id=14790)
  - çº¢ç±³AX3000æ¨¡å…·å’ŒAX6Sä¸€æ ·ï¼Œä¸ºç™½è‰²ã€‚å°ç±³AX3000ä¸ºé»‘è‰²å››æ£±æŸ±ã€‚
- AX5400
  - çº¢ç±³AX5400ï¼ŒIPQ5018ï¼šåŒæ ¸<A53@1.0GHz>ï¼Œ512(ram) + 128ï¼š[çº¢ç±³AX5400åƒå…†ç‰ˆæ‹†æœºï¼Œçœ‹çœ‹ä¸ç”µç«ç‰ˆæœ‰ä»€ä¹ˆå·®åˆ«-è·¯ç”±å™¨äº¤æµ (acwifi.net)](https://www.acwifi.net/19451.html)
- AX6000
  - å°ç±³AX6000
    - IPQ5018, 2æ ¸<A53@1.0Ghz>, 512(ram) + 128
    - ä½¿ç”¨çš„SoC IPQ5018ä¸ºé«˜é€šæ²‰æµ¸å¼å®¶åº­è”ç½‘å¹³å°ï¼Œä¸å¦‚é«˜é€šä¸“ä¸šè”ç½‘å¹³å°çš„IPQ8071Aï¼ˆAX3600ä¸Šçš„ï¼‰
  - **çº¢ç±³AX6000ï¼ˆå¾ˆå¼ºï¼‰**
    - **MT7986A**, 4æ ¸<A53@2.0Ghz>, 512(ram) + 128ï¼š[[OpenWrt Wiki\] Xiaomi Redmi AX6000](https://openwrt.org/toh/xiaomi/redmi_ax6000)
    - [çº¢ç±³AX6000æ‹†æœºï¼Œæœ€ä¾¿å®œçš„å››æ ¸2.0GHz-è·¯ç”±å™¨äº¤æµ (acwifi.net)](https://www.acwifi.net/19676.html)

![image-20221029213022447](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/picgo/image-20221029213022447.png)

å‚è€ƒ

- [(33 å°ç§ä¿¡ / 71 æ¡æ¶ˆæ¯) è·¯ç”±å™¨çº¢ç±³ax3000å’Œçº¢ç±³ax6é€‰æ‹©å“ªä¸ª? - çŸ¥ä¹ (zhihu.com)](https://www.zhihu.com/question/474579126)
- å°ç±³openwrté¡µé¢ï¼š[[OpenWrt Wiki] Xiaomi](https://openwrt.org/toh/hwdata/xiaomi/start)
- å¸¸è§MediaTek SoCï¼š[MediaTek - WikiDevi.Wi-Cat.RU](https://wikidevi.wi-cat.ru/MediaTek)

### 2023 wifi6äº§å“

ç°åœ¨éœ€æ±‚wifi6ï¼Œä¸”ä¿¡å·è¦†ç›–å¹¿

- å°ç±³wr30uï¼šè¿è¥å•†å®šåˆ¶ç‰ˆ
- 360 T7ï¼šå’Œä¸Šè€…ç¡¬ä»¶ä¸€æ‘¸ä¸€æ ·ã€‚12v 1A

wr30u: wifi6: [å°ç±³WR30Uæ— çº¿è·¯ç”±å™¨æ‹†æœº AX3000è”é€šå®šåˆ¶ç‰ˆ-è·¯ç”±å™¨äº¤æµ (acwifi.net)](https://www.acwifi.net/23700.html)
[2023å¹´æ”¯æŒåˆ·æœºçš„è·¯ç”±å™¨å¤§å…¨ï¼ˆå»ºè®®æ”¶è—ï¼‰ - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/640643641)

- AX1800ï¼šcr660x
- AX3000ï¼šcr880xï¼š135

[618 æƒ³ä¹°å°è·¯ç”±å™¨æ±‚æ¨è - V2EX](https://www.v2ex.com/t/948845)
150çš„T7 512æ”¹ï¼š[WR30Uè·¯ç”±åˆ°äº†éšæ‰‹æµ‹æµ‹ - ï¼°ï¼£æ•°ç  - Stage1st - stage1/s1 æ¸¸æˆåŠ¨æ¼«è®ºå› (saraba1st.com)](https://www.saraba1st.com/2b/thread-2141173-1-1.html)

#### CPUå¯¹æ¯”

å‚è€ƒï¼š

- [[è½¬è´´\] æ— çº¿è·¯ç”±å™¨CPUæµ…æ MT7621Aã€ BCM47189 åˆ°åº•è°å¼ºï¼Ÿ-æ–°æ‰‹å…¥é—¨åŠå…¶å®ƒ(ç¡¬ä»¶)-æ©å±±æ— çº¿è®ºå› (right.com.cn)](https://www.right.com.cn/forum/thread-216888-1-1.html)

- æ ‘è“æ´¾ç³»åˆ—å¤„ç†å™¨ï¼š[Raspberry Pi Documentation - Processors](https://www.raspberrypi.com/documentation/computers/processors.html)
  - Raspberry Pi 2 Model Bï¼š BCM2836(quad-core Cortex-A7 )
  - Raspberry Pi 3 Model Bï¼šBCM2837( quad-core Cortex-A53@1.2)
    - 50% faster than the Raspberry Pi 2.
  - Raspberry Pi 3 Models A+, B+: BCM2837B0(quad-core Cortex-A53@1.4)
    - 17% faster than the original Raspberry Pi 3
  - Raspberry Pi 4 Model B: BCM2837(quad-core Cortex-A72@1.5 GHz)
    - 50% faster than the Raspberry Pi 3B+

- ARMæ ¸å¯¹æ¯”ï¼š[List of ARM processors - Wikipedia](https://en.wikipedia.org/wiki/List_of_ARM_processors)
  - Cortex-A7: 1.9 DMIPS/MHz per core
  - A53: 2.3 DMIPS/MHz
  - A72: 6.3-7.3 DMIPS/MHz
- MIPSæ ¸ï¼š[MIPS Classic Processor Cores - Imagination Technologies](https://www.mips.com/products/classic/)
  - 1004K: 1.6 DMIPS/MHz
- 74k: 1.93 DMIPS/MHzï¼šCSACè·¯ç”±å™¨ï¼š71
  
- [newifi3-d2-firmware/README.md at master Â· sawaYch/newifi3-d2-firmware (github.com)](https://github.com/sawaYch/newifi3-d2-firmware/blob/master/README.md)

### 2024 æ–°éœ€æ±‚

å®¶é‡Œæ­å»ºçš„è½¯è·¯ç”± + å¤š AP åœ¨ä¸€æ¬¡æ–­ç”µåä¸Šä¸äº†ç½‘ã€‚æ— æ³•è¿œç¨‹è®¿é—®æ— æ³•ä¿®å¤ã€‚ç”±äºè®¾ç½®äº†æ¡¥æ¥ + è·¯ç”±å™¨æ‹¨å·ã€‚æ‰€ä»¥ä¹Ÿæ— æ³•æŒ‡å¯¼çˆ¶æ¯æ¢å›åŸæ¥çš„è…¾è¾¾è·¯ç”±å™¨ã€‚

å¹³æ—¶å’Œçˆ¶æ¯é€šè¯æ—¶ï¼Œçˆ¶äº²è€å¸ˆæŠ±æ€¨è¯´ç½‘ç»œä¸å¥½ã€‚åº”è¯¥æ˜¯ä»–æ€»æ˜¯è¿æ¥åˆ°ä½ç½®ä¸å¯¹çš„ APï¼Œè®©ä»–æ–­å¼€ wifi é‡æ–°è¿æ¥ä¸€ä¸‹å¾€å¾€èƒ½è§£å†³é—®é¢˜ã€‚

äºæ˜¯è¿™æ¬¡å†³å®šæ¢ä¸€ä¸ªæ— çº¿ä¿¡å·å¥½çš„è·¯ç”±å™¨ï¼Œé‡‡ç”¨å•ä¸ªè·¯ç”±å™¨çš„æ–¹æ¡ˆã€‚ç„¶åè®©å®½å¸¦å¸ˆå‚…å¸®å¿™å®‰è£…ä¸€ä¸‹ã€‚

!!! note "æ®è¯´ç»´ä¿®å¾ˆæ›²æŠ˜"

    ç”±äºä¸æ˜¯ç§»åŠ¨çš„è·¯ç”±å™¨ï¼Œæ˜¯è‡ªå·±çš„è·¯ç”±å™¨çš„é—®é¢˜ï¼Œæ”¶äº† 30 å…ƒçš„ç»´ä¿®è´¹ã€‚ä¸­åˆ 1 ç‚¹ æ‰“ 10086ï¼Œä¸‹åˆ 4 ç‚¹å°±æ¥ç»´ä¿®äº†è¿™ç‚¹ä¸é”™ã€‚æ®è¯´æäº†å¾ˆä¹…ï¼Œå¯èƒ½æ˜¯æˆ‘è®¾ç½®äº†æ¡¥æ¥çš„åŸå› ï¼Œå®½å¸¦å¸ˆå‚…æäº†åŠå¤©æ²¡æå®šï¼Œæœ€åæŠŠå…‰çŒ«æ¢äº†ä¸ªæ–°çš„ï¼ˆå¥½åƒè¯´æŒºå¥½çš„ï¼Œé€‚ç”¨äºåƒå…†å®½å¸¦ï¼‰æˆ‘ä¹Ÿè®©ä»–å¸®å¿™æŠŠä¸€æ¥¼åŸæœ¬çš„ AP æ¥ä¸Šäº†ã€‚å¥½åœ¨ AP ä¸éœ€è¦é¢å¤–è®¾ç½®ï¼Œæ’ä¸Šç½‘çº¿å°±èƒ½ç”¨ã€‚çŒœæµ‹ç°åœ¨ç½‘ç»œåº”è¯¥æ˜¯å…‰çŒ«æ‹¨å·ï¼Œä¸»è·¯ç”±å™¨ dhcpï¼Œä¹Ÿå°±æ˜¯æœ‰ä¸¤æ¬¡ NAT

#### ä¹‹åçš„ç½‘ç»œè§„åˆ’

ç»è¿‡è¿™æ¬¡äº‹ä»¶åï¼Œæ„è¯†åˆ°ç½‘ç»œè¿˜æ˜¯éœ€è¦ç®€å•ç¨³å®šã€‚è½¯è·¯ç”±åšä¸»è·¯ç”±è¿™ç§æ–¹æ¡ˆä¸é€‚åˆå®¶é‡Œï¼Œå› ä¸ºå‡ºäº†é—®é¢˜ï¼Œæ ¹æœ¬æ— æ³•è¿œç¨‹æŒ‡å¯¼çˆ¶æ¯ä¿®å¤ã€‚ç”šè‡³å®½å¸¦å¸ˆå‚…ä¹Ÿä¸çŸ¥é“æ€ä¹ˆä¿®å¤ã€‚è€Œä¸”åªè¦é—®é¢˜å‡ºåœ¨å…‰çŒ«ä¸Šï¼Œè¿è¥å•†å°±å¯ä»¥å…è´¹ç»™æˆ‘ä¿®ã€‚å› æ­¤è€ƒè™‘å°†è½¯è·¯ç”±ä½œä¸ºæ—è·¯ç”±ã€‚æ–¹æ¡ˆå¦‚ä¸‹

![image.png](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20240915172922.png)

![image.png](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20240915172942.png)

éœ€æ±‚

- ä»¥åèƒ½å¤Ÿåˆ· openwrt
- **æ— çº¿ä¿¡å·å¥½**ï¼Œèƒ½å¤Ÿè¦†ç›– 100 å¹³å†œæ‘è‡ªå»ºæˆ¿ã€‚å…‰çº¤å…¥æˆ·åœ¨äºŒæ¥¼ï¼Œå› æ­¤è·¯ç”±å™¨éœ€è¦èƒ½å¤Ÿè¦†ç›– 1 æ¥¼ å’Œ 2 æ¥¼ã€‚
- æœ‰ 2.5 G æ¥å£
  - å› ä¸ºæƒ³åˆ°æ—¢ç„¶éƒ½å‡çº§äº†ï¼Œéœ€è¦æŠŠæˆ‘è½¯è·¯ç”± 2.5 G å£åˆ©ç”¨èµ·æ¥
  - å• 2.5 G å’ŒåŒ 2.5 G é€‰æ‹©
    - çªç„¶æ„è¯†åˆ°ï¼Œåœ¨æˆ‘çš„è½¯è·¯ç”±æœ‰ 4 å£ 2.5 G çš„æƒ…å†µä¸‹ã€‚å• 2.5 G å¤Ÿç”¨äº†ï¼Œå¹¶ä¸”è¿˜ä¾¿å®œå¾ˆå¤šã€‚

xdr 4288[TP-LINKè½»èˆŸXDR4288æ‹†æœºï¼ŒåŒé¢‘ä¸å¯¹ç§°ç©ºé—´æµ-è·¯ç”±å™¨äº¤æµ (acwifi.net)](https://www.acwifi.net/22095.html)
> ä¸¤ä¸‰å°ç»„ç½‘ç”¨çš„è¯ï¼Œè¿™ä¸€å°åšä¸»è·¯ç”±ï¼Œä¹Ÿä¸éœ€è¦å¤šå¼ºçš„æ— çº¿ã€‚å¦‚æœè¦ä¸€å°å…¨èƒ½å½¢çš„ï¼Œå°±åœ¨6088å’Œ6086ä¹‹é—´é€‰æ‹©å§ã€‚éƒ½æ˜¯ä½æ¸©ä½çƒ­çš„ï¼Œç›¸å¯¹é«˜é€šIPQ5000ç³»åˆ—æ–¹æ¡ˆçš„æœºå‹ï¼äº¬ä¸œä»·æ ¼669å…ƒï¼ŒæŒ‰éœ€é€‰æ‹©å§ã€‚

xdr 6088ï¼š[è½»èˆŸXDR6088æ‹†æœºï¼ŒåŒ2.5Gç½‘å£çš„æ— çº¿è·¯ç”±å™¨-è·¯ç”±å™¨äº¤æµ (acwifi.net)](https://www.acwifi.net/20864.html)

å‘ç°ç›´æ¥çœ‹è¿™é‡Œï¼Œå°±æœ‰æ¨èçš„æ€§ä»·æ¯”è·¯ç”±å™¨ï¼š[ç‰¹ä»·è·¯ç”±æ±‡æ€»-è·¯ç”±å™¨äº¤æµ (acwifi.net)](https://www.acwifi.net/0-wifi)

- éƒ½è¯´ xdr 5480 ä¿¡å·å¥½ã€‚å’¸é±¼ä»·æ ¼ 265 ï¼ˆ2024/09/11ï¼‰ã€‚ä½†æ˜¯ä¸èƒ½åˆ· opï¼Œ æœ‰ä¸€ä¸ª SPF 2.5G å£ï¼ˆSPF æ¨¡å—å¤§æ¦‚ 50-100å…ƒï¼‰ã€‚é€‚åˆåš APã€‚
- xdr6088ã€‚å’¸é±¼ä»·æ ¼ 419ï¼ˆ2024/09/11ï¼‰ã€‚æŸä¸ªç‰ˆæœ¬å¯ä»¥å…æ‹†åˆ· opã€‚åŒ 2.5G
  - 7986A, 512+128

[æ— çº¿ä¿¡å·è¾¾åˆ°XDR5480/6088åŒçº§æˆ–ä»¥ä¸Šçš„å¯é­”æ”¹è·¯ç”± - ç”µè„‘è®¨è®º(æ–°) - Chiphell - åˆ†äº«ä¸äº¤æµç”¨æˆ·ä½“éªŒ](https://www.chiphell.com/forum.php?mod=viewthread&tid=2537251&extra=&highlight=XDR&page=1)

ä¸è¿‡æˆ‘æ„Ÿè§‰æˆ‘éœ€è¦ä¸€ä¸ªä¸é”™çš„è·¯ç”±åšä¸»è·¯ç”±ï¼ŒåŒæ—¶è½¯è·¯ç”±ä½œä¸ºå­è·¯ç”±ã€‚è¿™æ ·å­å¯ä»¥é¿å…è½¯è·¯ç”±æŒ‚æ‰ï¼Œæ•´ä¸ªç½‘ç»œæŒ‚æ‰ã€‚ç»„ç½‘æ„Ÿè§‰åœ¨è½¯è·¯ç”±ä¸Šç»„ã€‚

## åˆ·æœºè¿‡ç¨‹æ€»ç»“

ä»¥çº¢ç±³AC2100å¯èƒ½çš„åˆ·æœºä¸ºä¾‹ï¼Œæ¶µç›–äº†openwrtçš„å„ç§æƒ…å†µï¼šåˆ·breedï¼Œæ¢å¤ï¼Œä¸´æ—¶é•œåƒ

- **å»ºè®®ç›´æ¥ä½¿ç”¨å®˜æ–¹openwrté•œåƒ + å®˜æ–¹å®‰è£…æ–¹å¼ã€‚å‡ æ¬¡ä½¿ç”¨breedéƒ½é‡åˆ°äº†é—®é¢˜ï¼Œè€Œå°ç±³å®˜æ–¹æ¢å¤å·¥å…·ä¹ŸæŒºå¥½ç”¨çš„ã€‚**

- ç¬¬ä¸€æ¬¡è‡ªå·±åˆ·æœºçº¢ç±³AC2100[[è®°å½•çº¢ç±³AC2100æŠ˜è…¾]]ï¼Œä¸€å¼ ç²¾åå›¾

  ![image-20210622145337241](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/picgo/image-20210622145337241.png)

- è·¯ç”±å™¨åˆ·å‡ºé—®é¢˜ï¼Œä¿®å¤ç»éªŒã€‚çŸ¥é“äº†å¤‡ä»½çš„é‡è¦æ€§[[è®°å½•è®°ä¸€æ¬¡è·¯ç”±å™¨åˆ·å‡ºé—®é¢˜ä¿®å¤è¿‡ç¨‹]]

## å°ç±³è·¯ç”±å™¨æ•‘ç –

### æœ‰å®˜æ–¹ bootloader çš„æƒ…å†µ

**è¯´æ˜ï¼š**

å®˜æ–¹çš„å¼•å¯¼ç¨‹åºä½¿ç”¨çš„æ˜¯ ubootï¼Œä½äº flash çš„ Bootloader åˆ†åŒºï¼Œè€Œå®˜æ–¹å›ºä»¶åˆ™ä½äº OS1 åˆ†åŒºï¼ˆçº¢ç±³ AC2100ï¼‰ã€‚æ­£å¸¸åˆ· openwrt çš„è¿‡ç¨‹ä¸­ä¸ä¼šä¿®æ”¹ bootloaderã€‚åªè¦è¿˜ä¿ç•™ç€å®˜æ–¹ bootloaderï¼Œå°±å¯ä»¥é€šè¿‡å®˜æ–¹ä¿®å¤å·¥å…·æ¢å¤ã€‚

**æ­¥éª¤ï¼š**

1. ä¸‹è½½`å°ç±³è·¯ç”±å™¨ä¿®å¤å·¥å…·`å’Œå®˜æ–¹é•œåƒï¼š[ã€ä¸‹è½½æ±‡æ€»ã€‘å®¢æˆ·ç«¯/ROM ä¸‹è½½ - å°ç±³ç¤¾åŒº (xiaomi.cn)](https://www.xiaomi.cn/post/19184644)
2. **è·¯ç”±å™¨é€šç”µ**ï¼ŒPC é€šè¿‡ç½‘çº¿è¿æ¥åˆ°è·¯ç”±å™¨ LAN å£
3. æ‰“å¼€`MIWIFIRepairTool.x86.exe`
4. é€‰æ‹©é•œåƒ
5. **é€‰æ‹©ç½‘å¡**ï¼ˆå¯ä»¥åœ¨ç½‘ç»œä¸­å¿ƒä¸­å°†å…¶å®ƒç½‘å¡ç¦ç”¨ï¼‰
6. æ–­å¼€è·¯ç”±å™¨ç”µæºï¼ŒæŒ‰ä½ rst é”®ï¼ˆä¹Ÿæœ‰å¯èƒ½éœ€è¦ç”¨é’ˆæˆ³ï¼‰ï¼Œç„¶åæ¥ä¸Šç”µæºï¼Œç­‰å¾…é»„ç¯é—ªçƒï¼ˆä¸¤ä¸ªç¯ï¼Œä¸€ä¸ªæ˜¯æœ‰ç”µæºæ ‡å¿—ï¼Œä¸€ä¸ªæœ‰äº’è”ç½‘æ ‡å¿—ï¼Œè¿™é‡Œä¸ºç”µæºç¯é‚£ä¸ªï¼‰
7. è½¯ä»¶è‡ªåŠ¨ä¸Šä¼ é•œåƒ
8. ä¿æŒè€å¿ƒç­‰å¾…è·¯ç”±å™¨é»„ç¯å˜è“ï¼ˆä¸­é—´è¿‡ç¨‹ä¿æŒé»„ç¯ï¼‰ï¼Œ**äº²æµ‹éœ€è¦ 4 åˆ†é’Ÿ**
9. æ–­ç”µåé‡æ–°æ¥ä¸Šç”µæºï¼Œè·¯ç”±å™¨é‡å¯

### åˆ·äº† breed

**è¯´æ˜ï¼š**

breed è‡ªèº«ä¾¿æ˜¯ä¸€ä¸ª bootloaderï¼Œåˆ·å®Œ breed åä¼šè¦†ç›–åŸæœ¬çš„ bootloaderã€‚å¦‚æœæƒ³å¤åŸï¼Œå¯é€šè¿‡ breed çš„åŠŸèƒ½ï¼Œé‡æ–°åˆ·å›å®˜æ–¹ bootloaderã€‚**å¼ºçƒˆå»ºè®®åˆ· breed å‰ï¼Œå…ˆå¤‡ä»½åŸæœ¬çš„ bootloader ä»¥åŠæ•´ä¸ª flash**ã€‚å¦‚æœæ²¡å¤‡ä»½ï¼Œè¿™é‡Œæ˜¯æ©å±±ä¸Šæ”¶é›†çš„**å°ç±³å®˜æ–¹ bootloader ä¸‹è½½**ï¼š[è®ºå›æ”¶é›†çš„å‡ ä¸ªå°ç±³è·¯ç”±å™¨å®˜æ–¹ bootloader - æ©å±±æ— çº¿è®ºå›](https://www.right.com.cn/forum/thread-4102208-1-1.html)

**æ­¥éª¤ï¼š**

1. é€šè¿‡ breed åˆ·å›å®˜æ–¹ bootloader
2. é€šè¿‡å®˜æ–¹ä¿®å¤å·¥å…·ä¿®å¤

## å¸¸ç”¨æ“ä½œ

### åˆ·ä¹‹å‰å¤‡ä»½ mtd åˆ†åŒº

è·¯ç”±å™¨ flash æœ‰è‹¥å¹²åˆ†åŒºï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªåˆ†åŒºå­˜å‚¨è·¯ç”±å™¨ MAC åœ°å€ã€æ— çº¿æ ¡å‡†å‚æ•°ç­‰ã€‚è‹¥æŸåå¯èƒ½å¯¼è‡´æ— çº¿ä¿¡å·å¼±ç­‰é—®é¢˜ã€‚å› æ­¤åˆ·ä¹‹å‰æœ€å¥½å¤‡ä»½ã€‚
æŸ¥çœ‹ mtd åˆ†åŒº

```bash
root@XiaoQiang:~# cat /proc/mtd
dev:    size   erasesize  name
mtd0: 07f80000 00020000 "ALL"
mtd1: 00080000 00020000 "Bootloader"
mtd2: 00040000 00020000 "Config"
mtd3: 00040000 00020000 "Bdata"
mtd4: 00040000 00020000 "Factory"
mtd5: 00040000 00020000 "crash"
mtd6: 00040000 00020000 "crash_syslog"
mtd7: 00040000 00020000 "reserved0"
mtd8: 00400000 00020000 "kernel0"
mtd9: 00400000 00020000 "kernel1"
mtd10: 02000000 00020000 "rootfs0"
mtd11: 02000000 00020000 "rootfs1"
mtd12: 03580000 00020000 "overlay"
mtd13: 012a6000 0001f000 "ubi_rootfs"
mtd14: 030ec000 0001f000 "data"
```

å¤‡ä»½ factory åˆ†åŒºï¼ˆå°ç±³è·¯ç”±å™¨ä¸€èˆ¬æ˜¯ factory å­˜å‚¨äº†ä¸Šè¿°é‚£äº›æ•°æ®ï¼‰

```bash
cat /dev/mtd4 > /tmp/factory.bin
```

ä¹‹åé€šè¿‡ scp å¤åˆ¶åˆ°æœ¬åœ°

### snapshot çš„è¯´æ˜

snapshot æ˜¯å¼€å‘ç‰ˆåˆ†æ”¯

- é»˜è®¤æ²¡æœ‰å®‰è£… luciï¼ˆæ²¡æœ‰ç½‘é¡µç•Œé¢ï¼‰
- ä¸Šæ¸¸æ¯å¤©éƒ½ä¼šç¼–è¯‘äº§ç”Ÿæ–°çš„ snapshotã€‚å¯¹äº kernel mod ç›¸å…³è½¯ä»¶ï¼Œä¸æ˜¯åŒä¸€æ¬¡ç¼–è¯‘åˆ™æ— æ³•å®‰è£…ã€‚
- [[OpenWrt Wiki\] Installing OpenWrt development snapshots](https://openwrt.org/docs/guide-quick-start/developmentinstallation)

### å‘½ä»¤è¡Œå®‰è£… sysupgrade.bin

- [[OpenWrt Wiki\] Upgrading OpenWrt firmware using CLI](https://openwrt.org/docs/guide-user/installation/sysupgrade.cli)

```
sysupgrade -v /tmp/firmware_image.bin

#If sysupgrade is not available.
# Flash firmware
mtd -r write /tmp/firmware_image.bin firmware
```

### å¤‡ä»½æ¢å¤ CLI

- å®˜æ–¹ï¼š[[OpenWrt Wiki\] Backup and restore](https://openwrt.org/docs/guide-user/troubleshooting/backup_restore)

è‡ªå·±å®ç°äº†ä¸€ä¸ªè‡ªåŠ¨é…ç½® openwrt è„šæœ¬

- [TheRainstorm/my-openwrt-config (github.com)](https://github.com/TheRainstorm/my-openwrt-config)

### æ€§èƒ½æµ‹è¯•

#### iperf3

ax6s & mi4a

| æµ‹è¯•ç›®çš„      | è¿æ¥               | src       | dst   | speed(Mb/s) | å¤‡æ³¨                           |
| ------------- | ------------------ | --------- | ----- | ----------- | ------------------------------ |
| ax6s LAN æ€§èƒ½  | åƒå…† USB ç½‘å¡        | tianyi310 | ax6s  | **941**     |                                |
| ax6s æ— çº¿æ€§èƒ½ | wifi6 5Ghz@1201    | s3pro     | ax6s  | **626**     |                                |
| mi4a LAN æ€§èƒ½  | 2.5G ç½‘å¡           | ryzen     | mi4a  | ***470***   |                                |
|               |                    |           |       |             |                                |
| éš§é“æ€§èƒ½      |                    | tianyi310 | ryzen | 118         |                                |
|               |                    |           |       |             |                                |
| éš§é“æ€§èƒ½      |                    | mi4a      | ax6s  | 136         |                                |
|               |                    | ax6s      | mi4a  | 149         |                                |
| mi4a äº¤æ¢æ€§èƒ½  | ryzen - mi4a - p2w | ryzen     | p2w   | **943**     | ç»“æœå±…ç„¶æ¯” ryzen - mi4a è¿˜è¦å¿«ï¼ |

å°† r4a æ›¿æ¢æ‰å

| æµ‹è¯•ç›®çš„ | src       | dst       | speed(Mb/s) | å¤‡æ³¨ |
| -------- | --------- | --------- | ----------- | ---- |
| p2w      | ryzen     | p2w       | **936**     |      |
|          | p2w       | ryzen     | ***577***   |      |
| éš§é“æ€§èƒ½ | p2w       | ax6s      | 150         |      |
|          | ax6s      | p2w       | 250         |      |
| éš§é“æ€§èƒ½ | ryzen     | tianyi310 | **295**     |      |
|          | tianyi310 | ryzen     | **173**     |      |
|          | s3pro     | ryzen     | 256         |      |
| 780/886  | s3pro     | p2w       | **370**     |      |
|          | ryzen     | s3pro     | 274         |      |

## å…·ä½“å‹å·åˆ·æœºè¿‡ç¨‹

### Redmi AC2100 åˆ· Openwrt

[[OpenWrt Wiki] Xiaomi Redmi Router AC2100](https://openwrt.org/toh/xiaomi/xiaomi_redmi_router_ac2100)

#### 1. ç¡®è®¤ stock ç³»ç»Ÿç‰ˆæœ¬

ç¡®è®¤ç³»ç»Ÿç‰ˆæœ¬æ˜¯å¦ä¸º 2.0.23ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™åœ¨ç³»ç»Ÿå†…æ‰‹åŠ¨å‡çº§åˆ°è¯¥ç‰ˆæœ¬ <http://cdn.cnbj1.fds.api.mi-img.com/xiaoqiang/rom/rm2100/miwifi_rm2100_all_fb720_2.0.23.bin>

#### 2. è·å¾— ssh

ä½¿ç”¨ web æ¼æ´ï¼Œè·å¾— ssh

```js
// Work for RedMi 2100 firmware 2.0.23
// http://cdn.cnbj1.fds.api.mi-img.com/xiaoqiang/rom/rm2100/miwifi_rm2100_all_fb720_2.0.23.bin

function getSTOK() {
    let match = location.href.match(/;stok=(.*?)\//);
    if (!match) {
        return null;
    }
    return match[1];
}

function execute(stok, command) {
    command = encodeURIComponent(command);
    let path = `/cgi-bin/luci/;stok=${stok}/api/misystem/set_config_iotdev?bssid=SteelyWing&user_id=SteelyWing&ssid=-h%0A${command}%0A`;
    console.log(path);
    return fetch(new Request(location.origin + path));
}

function enableSSH() {
    stok = getSTOK();
    if (!stok) {
        console.error('stok not found in URL');
        return;
    }
    console.log(`stok = "${stok}"`);

    password = prompt('Input new SSH password');
    if (!password) {
        console.error('You must input password');
        return;
    }

    execute(stok, 
`
nvram set ssh_en=1
nvram commit
sed -i 's/channel=.*/channel=\\"debug\\"/g' /etc/init.d/dropbear
/etc/init.d/dropbear start
`
    )
        .then((response) => response.text())
        .then((text) => console.log(text));
    console.log('New SSH password: ' + password);
    execute(stok, `echo -e "${password}\\n${password}" | passwd root`)
        .then((response) => response.text())
        .then((text) => console.log(text));
}

enableSSH();
```

#### 3. ä¸‹è½½ openwrt é•œåƒ

ä»å®˜æ–¹ä¸‹è½½æœ€æ–°é•œåƒï¼Œæ³¨æ„æœ‰å››ä¸ªæ–‡ä»¶

- kernel: å…·æœ‰æœ€å°‘æ–‡ä»¶ç³»ç»Ÿçš„ Linux å†…æ ¸ã€‚å¯¹äºé¦–æ¬¡å®‰è£…æˆ–æ¢å¤å¾ˆæœ‰ç”¨ã€‚
- kernel1: Linux å†…æ ¸ä½œä¸ºå•ç‹¬çš„æ˜ åƒ
- rootfs0: æ ¹æ–‡ä»¶ç³»ç»Ÿä½œä¸ºå•ç‹¬çš„æ˜ åƒã€‚
- Sysupgrade: ä½¿ç”¨ Sysupgrade æ˜ åƒæ›´æ–°å·²ç»è¿è¡Œ OpenWrt çš„è·¯ç”±å™¨ã€‚è¯¥æ˜ åƒå¯ä»¥ä¸ LuCI Web ç•Œé¢æˆ–ç»ˆç«¯ä¸€èµ·ä½¿ç”¨ã€‚

éœ€è¦ä¸‹è½½ kernel1 å’Œ rootfs0

- [OpenWrt Downloads](https://downloads.openwrt.org/)
- [OpenWrt Firmware Selector](https://firmware-selector.openwrt.org/)

#### 4. å¤‡ä»½

é€šè¿‡ dmesgï¼ŒçŸ¥é“ä¸€å…±æœ‰ 14 ä¸ª mtd åˆ†åŒº

```
[    2.940000] NAND device: Manufacturer ID: 0xc8, Chip ID: 0xd1 (ESMT NAND 128MiB 3,3V 8-bit), 128MiB, page size: 2048, OOB size: 64
[    2.950000] [NAND]select ecc bit:4, sparesize :64 spare_per_sector=16
[    2.950000] Scanning device for bad blocks
[    3.100000] Signature matched and data read!
[    3.110000] load_fact_bbt success 1023
...
[    3.190000] Creating 14 MTD partitions on "MT7621-NAND":
[    3.190000] 0x000000000000-0x000007f80000 : "ALL"
[    3.200000] 0x000000000000-0x000000080000 : "Bootloader"
[    3.210000] 0x000000080000-0x0000000c0000 : "Config"
[    3.210000] 0x0000000c0000-0x000000100000 : "Bdata"
[    3.220000] 0x000000100000-0x000000140000 : "Factory"
[    3.230000] 0x000000140000-0x000000180000 : "crash"
[    3.230000] 0x000000180000-0x0000001c0000 : "crash_syslog"
[    3.240000] 0x0000001c0000-0x000000200000 : "cfg_bak"
[    3.240000] 0x000000200000-0x000000600000 : "kernel0"
[    3.250000] 0x000000600000-0x000000a00000 : "kernel1"
[    3.260000] 0x000000a00000-0x000002400000 : "rootfs0"
[    3.260000] 0x000002400000-0x000003e00000 : "rootfs1"
[    3.270000] 0x000003e00000-0x000006400000 : "overlay"
[    3.280000] 0x000006400000-0x000007f80000 : "obr"
[    3.280000] [mtk_nand] probe successfully!
```

é€šè¿‡ cat /proc/mtdï¼ŒçŸ¥é“å¯¹åº”å…³ç³»

```
root@XiaoQiang:/tmp# cat /proc/mtd
dev:    size   erasesize  name
mtd0: 07f80000 00020000 "ALL"
mtd1: 00080000 00020000 "Bootloader"
mtd2: 00040000 00020000 "Config"
mtd3: 00040000 00020000 "Bdata"
mtd4: 00040000 00020000 "Factory"
mtd5: 00040000 00020000 "crash"
mtd6: 00040000 00020000 "crash_syslog"
mtd7: 00040000 00020000 "cfg_bak"
mtd8: 00400000 00020000 "kernel0"
mtd9: 00400000 00020000 "kernel1"
mtd10: 01a00000 00020000 "rootfs0"
mtd11: 01a00000 00020000 "rootfs1"
mtd12: 02600000 00020000 "overlay"
mtd13: 01b80000 00020000 "obr"
mtd14: 00c1c000 0001f000 "ubi_rootfs"
mtd15: 021e8000 0001f000 "data"
```

å¤‡ä»½ï¼Œå…¶ä¸­ Factory ä¸­å­˜å‚¨äº† EEPROM çš„æ•°æ®

```
cat /dev/mtd4 > Factory.dump

scpå¤åˆ¶åˆ°æœ¬åœ°
```

#### 5. è®¾ç½®ç¯å¢ƒå˜é‡

è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆrm2100 æœ‰åŒç³»ç»Ÿç”¨äºå¤‡ä»½ä¿æŠ¤ï¼Œéœ€è¦è®¾ç½®å…ˆå¯åŠ¨å“ªä¸€ä¸ªï¼‰

```bash
# Enable uart and boot_wait, useful for testing or recovery if you have an uart adapter!
nvram set uart_en=1
nvram set boot_wait=on
nvram set bootdelay=5

# Set kernel1 as the booting kernel
nvram set flag_try_sys1_failed=1

# Commit our nvram changes
nvram commit
```

#### 6. åˆ·æœº

```bash
mtd write kernel1.bin kernel1
mtd -r write rootfs0.bin rootfs0
```

### MI 4A åƒå…†ç‰ˆ

å®˜æ–¹æ•™ç¨‹ï¼š[[OpenWrt Wiki] Xiaomi Mi Router 4A Gigabit Edition](https://openwrt.org/inbox/toh/xiaomi/xiaomi_mi_router_4a_gigabit_edition)

**warning**

- 2022/10ï¼šv2ç‰ˆæœ¬çš„4Aåƒå…†ç‰ˆæ— æ³•åˆ·opã€‚åŸç‰ˆä½¿ç”¨çš„æ˜¯Winbond or GigaDevice çš„ flash èŠ¯ç‰‡ï¼Œæˆ‘æ‰‹å¤´çš„æ˜¯ GigaDevice çš„[GD25Q127CSIG](https://www.tme.eu/en/details/gd25q127csig/serial-flash-memories-integrated-circ/gigadevice/)ã€‚æ–°ç‰ˆä½¿ç”¨Â Eon or CFeon çš„èŠ¯ç‰‡ï¼Œè¿˜åœ¨æ”¯æŒä¸­ã€‚
- è€ç‰ˆçš„æœ‰æ— çº¿å±è”½ï¼Œè€Œåœ¨å”®çš„æ²¡æœ‰

#### è¯´æ˜

å¯ä»¥æ¼æ´è·å– shellï¼Œä¸å¿…ä½¿ç”¨ç¡¬ä»¶ç¼–ç¨‹å™¨

2022/11/6æ—¥ï¼Œå› åˆ·breed bootloaderï¼Œä½¿å¾— MI 4A å˜ç –ã€‚å¿ å‘Šï¼šåˆ«ç”¨ breedï¼Œä¼šå˜å¾—ä¸å¹¸ã€‚ï¼ˆä½  tm æ”¯æŒ r3gï¼Œä¸æ”¯æŒ mi 4a èƒ½ä¸èƒ½å†™æ¸…æ¥šï¼‰

#### æ­¥éª¤

~~1. é¦–å…ˆéœ€è¦ä½¿ç”¨`OpenWRTInvasion`**è·å– shell**ã€‚å‚è€ƒï¼š[acecilia/OpenWRTInvasion(github.com)](https://github.com/acecilia/OpenWRTInvasion)ã€‚

~~åŒæ—¶ï¼Œè¯¥ä»“åº“ä¹Ÿæä¾›äº†è·å¾— shell åçš„åˆ·æœºè¿‡ç¨‹ã€‚ä¸è¿‡ä½¿ç”¨å®˜æ–¹çš„`OpenWRTInvasion`ä¼šä» github ä¸Šä¸‹è½½æ–‡ä»¶ï¼Œè€Œå› ä¸ºç½‘ç»œåŸå› å¯èƒ½ä¼šå¤±è´¥ã€‚æ©å±±è®ºå›ä¸­æœ‰ç”¨æˆ·æä¾›äº†ä¿®æ”¹ä»£ç çš„ç¦»çº¿ç‰ˆæœ¬ï¼Œå¯ä»¥æœç´¢ä½¿ç”¨ã€‚
ä¸è¿‡ä¹Ÿå¯ä»¥è‡ªè¡Œä¿®æ”¹ä»£ç ï¼šä¿®æ”¹`script.sh`ï¼Œå°†å…¶ä¸­çš„é“¾æ¥æ›¿æ¢æˆæœ¬åœ°é“¾æ¥ã€‚å¯ä»¥ä½¿ç”¨ python -m http.server è¿è¡Œä¸€ä¸ªå°çš„ http æœåŠ¡ï¼Œæä¾›ä¸‹è½½ã€‚ä¾‹ï¼š

   ```bash
   curl -L "https://github.com/acecilia/OpenWRTInvasion/raw/master/script_tools/busybox-mipsel" --insecure --output busybox
   
   #æ”¹ä¸ºï¼Œip éœ€è¦è°ƒæ•´
   curl "http://192.168.31.189:8000/busybox-mipsel" --output busybox
   ```

1. ç°åœ¨å®˜æ–¹ä»“åº“é›†æˆäº†æœ¬åœ°æœåŠ¡å™¨çš„åŠŸèƒ½ï¼Œç›´æ¥è¿è¡Œè„šæœ¬å³å¯ã€‚ä½†æ˜¯å®˜æ–¹ä»“åº“å´æ”¾å¼ƒäº†å¯¹ windows çš„æ”¯æŒï¼Œä¸è¿‡äº²æµ‹åœ¨ git bash ä¸­è¿è¡Œæ²¡æœ‰é—®é¢˜ï¼Œåªéœ€è¦æŠŠè„šæœ¬å¼€å¤´çš„æ£€æµ‹æ³¨é‡Šæ‰å³å¯ã€‚

```
# if platform.system() == "Windows":
# Â  Â  sys.exit("Stopping: script can only be run on a Mac/Linux system")
```

1. ä¹‹åä½¿ç”¨ telnet è¿›è¡Œè¿æ¥ï¼ŒæˆåŠŸè·å¾— shell å¦‚å›¾æ‰€ç¤º

```
telnet 192.168.31.1 #è´¦å·root, å¯†ç root
```

   ![image-20221030210955796](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/picgo/image-20221030210955796.png)
3. æ¥ç€ä¸Šä¼  openwrt é•œåƒ (ä½¿ç”¨ sysupgrade bin) åˆ°è·¯ç”±å™¨ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ python æ­å»º http æ–‡ä»¶æœåŠ¡å™¨ã€‚æœ€åè¿è¡Œ mtd ç­‰å¾…è·¯ç”±å™¨é‡å¯å®Œæˆå³å¯ã€‚

```
#windowä¸Š, sysupgrade.binæ‰€åœ¨ç›®å½•
python -m http.server

#è·¯ç”±å™¨ä¸Š
cd /tmp
curl -O http://<windows ip>:8000/sysupgrade.bin
mtd -e OS1 -r write sysupgrade.bin OS1
```

#### å‚è€ƒ

breed ä½¿ç”¨è¯´æ˜ï¼š<https://www.sohu.com/a/304140654_120096961>
breed åˆ· openwrt æ•™ç¨‹ <https://www.ixigua.com/6974624328725824031>

#### EEPROM ä¸‹è½½

> eeprom é‡Œæœ‰ mac å’Œ sn ç­‰ä¿¡æ¯ï¼Œå¦‚æœ sn ä¸¢å¤±åˆ·å®˜æ–¹ bootloader åˆ·å›åŸå‚ä¹Ÿä¸èƒ½ç»‘å®šæ‰‹æœº app çš„

- [ã€æ–°æé†’ã€‘[20210919 æ›´æ–°]å°ç±³è·¯ç”± 4A åƒå…†ç‰ˆ LEDE å›ºä»¶_é›†æˆå¿«ä¹ä¸Šç½‘ã€å†…ç½‘ç©¿é€ã€KMSã€ç½‘ç»œåŠ é€Ÿ - å°ç±³æ— çº¿è·¯ç”±å™¨ä»¥åŠå°ç±³æ— çº¿ç›¸å…³çš„è®¾å¤‡ - æ©å±±æ— çº¿è®ºå› - Powered by Discuz! (right.com.cn)](https://www.right.com.cn/forum/thread-4054821-1-1.html)

> æˆ‘çœ‹äº†ä¸‹æœç„¶æ˜¯é”™çš„ï¼Œæˆ‘ä¹‹å‰ä¹Ÿæ˜¯è¿™ä¸ªæƒ…å†µï¼Œåæ¥åˆ†æäº†ä¸‹æŠŠ eeprom ç”¨ä¸Šäº†æ­£ç¡®çš„å°±å¥½äº†ï¼Œä½ åˆ·æˆ‘è¿™ä¸ª eepromï¼Œå¦‚æœè¿˜ä¸è¡Œå°±åˆ·æˆ‘çš„è§£é”åˆ†åŒºçš„ lede å›ºä»¶ï¼Œç”¨ mtd å‘½ä»¤åˆ·å†™ï¼Œssh ä¸Šè·¯ç”±ï¼Œæœ¬åœ° scp å‘½ä»¤æ‹·è´ä¸Šä¼ åˆ° tmp ç›®å½•ï¼Œ  
  mtd -r write /tmp/eeprom.bin factory  
é‡å¯å®Œäº†å°± ok  
åˆ·å®Œ mac ä¼šå˜ï¼ŒæŠŠä½ çš„ mac åœ°å€æ”¹æˆä½ åŸæ¥çš„ mac åœ°å€ã€‚  
å¦‚æœæœ‰åŸæ¥çš„å›ºä»¶å¤‡ä»½ï¼Œå‘æˆ‘æˆ‘æ¥å¸®ä½ æå–

- [ã€æ–°æé†’ã€‘å¸®åŠ©æå– eeprom å°ç±³ 4A åƒå…† (22 å¹´ 8 æœˆæ–°ç‰ˆ)-å°ç±³æ— çº¿è·¯ç”±å™¨ä»¥åŠå°ç±³æ— çº¿ç›¸å…³çš„è®¾å¤‡ - æ©å±±æ— çº¿è®ºå› - Powered by Discuz! (right.com.cn)](https://www.right.com.cn/forum/thread-8252165-1-1.html)

#### EEPROM ä¿®æ”¹

[ã€æ–°æé†’ã€‘å…³äºæ–° 3(newifi 3) çš„ eeprom æ–‡ä»¶ä¸­ MAC-SN ç­‰å‚æ•°ä½ç½®-newifi æ— çº¿è·¯ç”±å™¨åŠç½‘ç»œè®¾å¤‡ - æ©å±±æ— çº¿è®ºå› - Powered by Discuz! (right.com.cn)](https://www.right.com.cn/forum/thread-384637-1-1.html)

ç”¨ SSH ç™»å½•è¿›å…¥è·¯ç”±å™¨çš„ Console å°åï¼Œç”¨å‘½ä»¤ (cat /proc/mtd)çš„è¾“å‡ºä¸­ï¼ŒFactoryåŒºå¯¹åº”çš„å°±æ˜¯æ— çº¿å’ŒMAC/SNç­‰çš„é…ç½®æ–‡ä»¶ã€‚
è¿™ä¸ªæ–‡ä»¶å¤‡ä»½å‡ºæ¥åï¼Œå¤§å°ä¸º 64KBï¼Œå¯ä»¥åœ¨ breed ä¸­æ›´æ–° eeprom å¤„åˆ·å…¥è·¯ç”±å™¨ã€‚

(ä¸‹å›¾ä¸ºè§£é”åçš„è¾“å‡º)
ç”¨ WinHex æ‰“å¼€å¤‡ä»½çš„æ–‡ä»¶ (å‡è®¾ä¸º eeprom.bin)

1)     è·¯ç”±å™¨çš„ SN

è·¯ç”±å™¨çš„ SN å·åœ¨è·¯ç”±å™¨çš„èƒŒé¢è´´çº¸å¤„æœ‰ï¼ŒSN çš„å­˜å‚¨åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­çš„åç§» 0x7000(å¤„)ï¼Œæ ¼å¼ä¸ºä»¥ MND å¼€å¤´ï¼Œå¦‚ä¸‹ï¼š

1)     è·¯ç”±å™¨çš„ MAC åœ°å€

è·¯ç”±å™¨çš„ MAC å·åœ¨è·¯ç”±å™¨çš„èƒŒé¢è´´çº¸å¤„æœ‰ï¼ŒMAC çš„å­˜å‚¨åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­çš„åç§» 0xE000(å¤„)ï¼Œæ ¼å¼ä¸ºè¿ç»­çš„ä¸¤ä¸ª MAC åœ°å€ï¼Œå…±å  12 å­—èŠ‚ã€‚
åˆ†åˆ«ä¸ºèµ·å§‹â€MAC åœ°å€ - ç»“æŸ MAC åœ°å€â€, ç»“æŸ MAC åœ°å€ä¸ºèµ·å§‹ MAC åœ°å€çš„æœ€åä¸€ä¸ªå­—èŠ‚å†…å®¹ +2. å¦‚å›¾ï¼š
èµ·å§‹ MAC åœ°å€ï¼š20 76 93 48 A9 1F (è·¯ç”±å™¨èƒŒé¢å¤„çš„è´´çº¸)
ç»“æŸ MAC åœ°å€ï¼š20 76 93 48 A9 21

1)     å’Œæ— çº¿æœ‰å…³çš„å‚æ•°

2.4G æ— çº¿çš„ BSSID åœ¨æ–‡ä»¶å¼€å¤´åç§» 0x4-0x9 å¤„ï¼Œæ€»å…± 6 å­—èŠ‚ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

5G æ— çº¿çš„ BSSID åœ¨åç§» 0x8004-0x8009 å¤„ï¼Œæ€»å…± 6 å­—èŠ‚ï¼Œ(2.4G æ— çº¿çš„ BSSID ä¸ 5G-BSSID çš„æœ€åä¸€ä¸ªå­—èŠ‚å†…å®¹ç›¸å·® 2)ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

å’Œæ— çº¿æœ‰å…³çš„å‚æ•°åº”è¯¥æ˜¯åœ¨åç§» 0x8000-0x80C0 å¤„ã€‚çœ‹ç½‘å‹ä»¬æ”¹çš„è¯ï¼Œéƒ½æ˜¯åœ¨ 0x8060-0x809F è¿™ä¸‰è¡Œä¸Šä¿®æ”¹ï¼Œç”±äºæ²¡æœ‰å…·ä½“è¯´æ˜å‚æ•°å«ä¹‰ï¼Œå› æ­¤ä¸æ¨èè‡ªå·±ä¿®æ”¹ã€‚
å¦‚å›¾æ‰€ç¤ºï¼š

1) æœªçŸ¥çš„å†…å®¹

æ–‡ä»¶å¼€å¤´çš„ 0x56-0x61 åç§»å¤„ï¼Œä¸€å…± 12 å­—èŠ‚ï¼Œåˆ†ä¸º 2 ç»„ã€‚å‰ 6 å­—èŠ‚å’Œå 6 å­—èŠ‚å†…å®¹ä¹Ÿæ¯”è¾ƒç›¸ä¼¼ã€‚ä¸æ˜¯ mac ä¹Ÿä¸æ˜¯ bssid.

å¦å¤–åœ¨åç§» 0x8060-0x80A0 å…± 4 è¡Œå†…ï¼Œæœ‰å‡ ä¸ªå‚æ•°æ˜¯ä»¥ 5 ä¸ªå­—èŠ‚ä¸ºä¸€ç»„çš„å‚æ•°ï¼Œå…·ä½“æ ¼å¼ç‰¹å¾å¦‚ä¸‹ï¼š
00 00 26 xx xx, æˆ–è€… 00 01 26 xx xx, æˆ–è€… 00 02 26 xx xx ç­‰ã€‚

å»ºè®®ï¼š
    å¯ä»¥ç”¨å…¶å®ƒäººçš„ EEPROM å›ºä»¶ï¼Œä»…ä»…ä¿®æ”¹ MAC å’Œ SN (å¯é€‰ï¼šBSSID) ä¸ºè‡ªå·±çš„è·¯ç”±å™¨çš„å³å¯ï¼Œä¸æ¨èè‡ªå·±ä¿®æ”¹æ— çº¿å‚æ•°éƒ¨åˆ†å†…å®¹ã€‚

#### ç©ºé—´ä¸è¶³ï¼ˆå¯ä»¥å®‰è£…çš„è½¯ä»¶ï¼‰

```
Configuring terminfo.
Configuring iputils-arping.
Configuring libatomic1.
Configuring libiperf3.
Configuring kmod-netlink-diag.
Configuring libqrencode.
Configuring qrencode.
Configuring ss.
Configuring ethtool-full.
Configuring tree.
Configuring ip-bridge.
Configuring libncurses6.
Configuring libpcap1.
Configuring htop.
Configuring ncat.
Configuring mtr-json.
Configuring iperf3.
Collected errors:
 * verify_pkg_installable: Only have 140kb available on filesystem /overlay, pkg vim-full needs 776
 * opkg_install_cmd: Cannot install package vim-full.
 * verify_pkg_installable: Only have 140kb available on filesystem /overlay, pkg tmux needs 238
 * opkg_install_cmd: Cannot install package tmux.
 * wfopen: //usr/lib/opkg/info/terminfo.control: No space left on device.
 * wfopen: //usr/lib/opkg/info/terminfo.postinst: No space left on device.
 * wfopen: //usr/lib/opkg/info/terminfo.prerm: No space left on device.
 * wfopen: /usr/share/terminfo/a/ansi: No space left on device.
 * wfopen: /usr/share/terminfo/d/dumb: No space left on device.
 * wfopen: /usr/share/terminfo/l/linux: No space left on device.
 * wfopen: /usr/share/terminfo/r/rxvt: No space left on device.
 * wfopen: /usr/share/terminfo/r/rxvt-unicode: No space left on device.
 * wfopen: /usr/share/terminfo/s/screen: No space left on device.
 * wfopen: /usr/share/terminfo/s/screen-256color: No space left on device.
 * verify_pkg_installable: Only have 164kb available on filesystem /overlay, pkg tcpdump needs 281
 * opkg_install_cmd: Cannot install package tcpdump.
 * verify_pkg_installable: Only have 164kb available on filesystem /overlay, pkg ip-full needs 168
 * opkg_install_cmd: Cannot install package ip-full.
 * verify_pkg_installable: Only have 168kb available on filesystem /overlay, pkg libopenssl1.1 needs 966
 * opkg_install_cmd: Cannot install package bind-dig.
 * verify_pkg_installable: Only have 168kb available on filesystem /overlay, pkg file needs 193
 * opkg_install_cmd: Cannot install package file.
 * opkg_conf_write_status_files: Couldn't close //usr/lib/opkg/status: No space left on device.
```

ç”±äºæ²¡æœ‰å®Œæˆé…ç½®ï¼Œå®‰è£…å¤±è´¥çš„è½¯ä»¶ä¸ä¼šå‡ºç°åœ¨ opkg list-installed ä¸­ã€‚

ä¸¤æ¬¡ opikg install éƒ½å¤±è´¥åï¼Œopkg å¼€å§‹ segmentfault äº†

[OpenWrt Forum Archive](https://forum.archive.openwrt.org/viewtopic.php?id=13171)

è§£å†³åŠæ³•åªæœ‰ upgrade å¹¶é€‰æ‹©ä¿å­˜é…ç½®äº†ã€‚

å®‰è£… 23.05 å¹¶å®‰è£… wiregurad åå‰©ä½™ç©ºé—´

```
root@mi4a:~# df -h
Filesystem                Size      Used Available Use% Mounted on
/dev/root                 3.8M      3.8M         0 100% /rom
tmpfs                    58.8M      1.1M     57.7M   2% /tmp
/dev/mtdblock10           8.3M    512.0K      7.8M   6% /overlay
overlayfs:/overlay        8.3M    512.0K      7.8M   6% /
tmpfs                   512.0K         0    512.0K   0% /dev
```

å‡ ä¸ªå¤§è½¯ä»¶

- bash: 359KB
- zsh: 1.8MB
- vim-full: 900KB
- tmux: 400KB
- tcpdump 400KB

```
iputils-arping ncat iperf3 curl mtr-json htop tcpdump tmux
```

```
root@mi4a:~# df -h
Filesystem                Size      Used Available Use% Mounted on
/dev/root                 3.8M      3.8M         0 100% /rom
tmpfs                    58.8M      1.1M     57.7M   2% /tmp
/dev/mtdblock10           8.3M      2.1M      6.2M  25% /overlay
overlayfs:/overlay        8.3M      2.1M      6.2M  25% /
tmpfs                   512.0K         0    512.0K   0% /dev
```

### MI R3G

å®˜æ–¹æ•™ç¨‹ï¼š[[OpenWrt Wiki\] Xiaomi Mi WiFi R3G (Mi Wifi Router 3G / MIR3G / MI3G / mi4a Gigabit)](https://openwrt.org/toh/xiaomi/mir3g)

r3g å®˜æ–¹å›ºä»¶ä¸‹è½½ï¼š[OpenWrt Firmware Selector](https://firmware-selector.openwrt.org/?version=21.02.3&target=ramips%2Fmt7621&id=xiaomi_mi-router-3g)

#### å‡†å¤‡

- FAT32 æ ¼å¼ U ç›˜
- ä¸€æšé’ˆç”¨äºæˆ³è·¯ç”±å™¨ reset é”®
- æ‰‹æœºå®‰è£… MIWIFI app

#### å¼€å¯ ssh

1. æ›´æ–°ä¸ºå°ç±³å¼€å‘ç‰ˆå›ºä»¶ï¼š<https://bigota.miwifi.com/xiaoqiang/rom/r3g/miwifi_r3g_firmware_12f97_2.25.124.bin>

2. **ä¸‹è½½å°ç±³è·¯ç”±å™¨æ‰‹æœºå®¢æˆ·ç«¯ (åº”ç”¨å•†åº— MI WIFI) è½¯ä»¶ï¼Œç»‘å®šè·¯ç”±å™¨**

3. æ ¹æ® <https://d.miwifi.com/rom/sshï¼Œå¼€å¯> SSH

   *p.s. 1. å³ä½¿æ˜¯åŒä¸€å‹å·ï¼Œmiwifi_ssh.bin ä¹Ÿæ˜¯ä¸åŒçš„ï¼›2. ssh å¯†ç æ˜¾ç¤ºåœ¨è¯¥é¡µé¢*

   1. è¯·å°†ä¸‹è½½çš„å·¥å…·åŒ… bin æ–‡ä»¶å¤åˆ¶åˆ° U ç›˜ï¼ˆFAT/FAT32 æ ¼å¼ï¼‰çš„æ ¹ç›®å½•ä¸‹ï¼Œä¿è¯æ–‡ä»¶åä¸º miwifi_ssh.binï¼›
   2. æ–­å¼€å°ç±³è·¯ç”±å™¨çš„ç”µæºï¼Œå°† U ç›˜æ’å…¥ USB æ¥å£ï¼›
   3. æŒ‰ä½ reset æŒ‰é’®ä¹‹åé‡æ–°æ¥å…¥ç”µæºï¼ŒæŒ‡ç¤ºç¯å˜ä¸ºé»„è‰²é—ªçƒçŠ¶æ€å³å¯æ¾å¼€ reset é”®ï¼›
   4. ç­‰å¾… 3-5 ç§’åå®‰è£…å®Œæˆä¹‹åï¼Œå°ç±³è·¯ç”±å™¨ä¼šè‡ªåŠ¨é‡å¯ï¼Œä¹‹åæ‚¨å°±å¯ä»¥å°½æƒ…æŠ˜è…¾å•¦ï¼šï¼‰

#### å¤‡ä»½

æŸ¥çœ‹ mtd åˆ†åŒº

```
root@XiaoQiang:~# cat /proc/mtd
dev:    size   erasesize  name
mtd0: 07f80000 00020000 "ALL"
mtd1: 00080000 00020000 "Bootloader"
mtd2: 00040000 00020000 "Config"
mtd3: 00040000 00020000 "Bdata"
mtd4: 00040000 00020000 "Factory"
mtd5: 00040000 00020000 "crash"
mtd6: 00040000 00020000 "crash_syslog"
mtd7: 00040000 00020000 "reserved0"
mtd8: 00400000 00020000 "kernel0"
mtd9: 00400000 00020000 "kernel1"
mtd10: 02000000 00020000 "rootfs0"
mtd11: 02000000 00020000 "rootfs1"
mtd12: 03580000 00020000 "overlay"
mtd13: 012a6000 0001f000 "ubi_rootfs"
mtd14: 030ec000 0001f000 "data"
```

å¤‡ä»½ factory åˆ†åŒº

```
cat /dev/mtd4 > /tmp/factory.bin

#on windows
scp root@192.168.33.193:/tmp/factory.bin .
scp root@192.168.33.228:/tmp/factory.bin .
```

#### åˆ· openwrt

```
mtd write openwrt-18.06.2-ramips-mt7621-mir3g-squashfs-kernel1.bin kernel1
mtd write openwrt-18.06.2-ramips-mt7621-mir3g-squashfs-rootfs0.bin rootfs0
nvram set flag_try_sys1_failed=1
nvram commit
reboot
```

### AX6S

#### æ­¥éª¤

[[OpenWrt Wiki] Xiaomi AX3200 / Redmi AX6S](https://openwrt.org/toh/xiaomi/ax3200)
[YangWang92/AX6S-unlock (github.com)](https://github.com/YangWang92/AX6S-unlock)
[[2-2]AX6S é—­æºæ— çº¿é©±åŠ¨Openwrt åˆ·æœºæ•™ç¨‹/å›ºä»¶ä¸‹è½½-å°ç±³æ— çº¿è·¯ç”±å™¨åŠå°ç±³ç½‘ç»œè®¾å¤‡-æ©å±±æ— çº¿è®ºå› (right.com.cn)](https://www.right.com.cn/forum/forum.php?mod=viewthread&tid=8187405)

- telnet åæ‰‹åŠ¨å¼€å¯ ssh

  ```
  /etc/init.d/dropbear start
  ```

  â€‹ tips: ä½¿ç”¨ git-bash ç‰ˆæœ¬çš„ ssh è¿æ¥æŠ¥é”™ã€‚ä½¿ç”¨ cmd çš„ ssh å¯ä»¥ã€‚

  ```
  Unable to negotiate with 192.168.31.1 port 22: no matching host key type found. Their offer: ssh-rsa
  ```

- å¿…é¡»æ·»åŠ  boot_fw1 æ”¹è¡Œï¼Œå¦åˆ™é‡å¯åè¿›å…¥åŸç³»ç»Ÿã€‚

  ```
  nvram set ssh_en=1
  nvram set uart_en=1
  nvram set boot_wait=on
  nvram set flag_boot_success=1
  nvram set flag_try_sys1_failed=0
  nvram set flag_try_sys2_failed=0
  nvram set "boot_fw1=run boot_rd_img;bootm"
  nvram commit
  ```

- åˆ·å†™ factory.bin-> firmware åˆ†åŒº

AX6S ä¸ºå›½å†…ç‰ˆï¼Œå›½å¤–ç‰ˆç§°ä¸º AX3200

- SoCï¼š**MT7622**B: 2 x <A53@1.35GHz> CPUã€‚
  - æ»¡è¡€ç‰ˆæœ¬æ˜¯ MT7622Aï¼Œå°‘äº†è“ç‰™å°±æ˜¯ MT7622BVï¼Œæ²¡æœ‰è“ç‰™å’Œå¤šåª’ä½“åŠŸèƒ½çš„æ˜¯ MT7622Bï¼ŒåŸºæœ¬å‰©ä¸‹æ— çº¿åŠŸèƒ½çš„æ˜¯ MT7622E
- ram: 256 + flash: 128
- [[OpenWrt Wiki] Xiaomi AX3200 / Redmi AX6S](https://openwrt.org/toh/xiaomi/ax3200)

#### å‘ï¼šsysupgrade å˜ç –

ä¸çŸ¥é“ä¸ºä»€ä¹ˆ wifi ä¸‹è½½é€Ÿåº¦åªèƒ½è·‘åˆ° 100Mbpsï¼Œwin11 ä¸­æ˜¾ç¤ºé“¾æ¥é€Ÿåº¦ä¸€è¾¹å¾ˆä½ã€‚å› æ­¤æƒ³è¦å‡çº§ä¸‹ç³»ç»Ÿã€‚

2024-06-02 ä» 22 å‡çº§åˆ° 23.05.3 åï¼Œæœºå™¨å¯åŠ¨ä¸€ç›´åå¤é»„ç¯ã€‚å‡çº§æ—¶ä¿ç•™äº†é…ç½®ã€‚æš‚æ—¶ä¸æ¸…æ¥šæ˜¯ä»€ä¹ˆåŸå› 

å‘ç°æ˜¯ä¸ªæ™®éé—®é¢˜ï¼Œå®˜æ–¹æ–‡æ¡£é‡Œå†™äº†ã€‚

[AX6Såˆ·OPå¿…ç –-å°ç±³æ— çº¿è·¯ç”±å™¨åŠå°ç±³ç½‘ç»œè®¾å¤‡-æ©å±±æ— çº¿è®ºå› (right.com.cn)](https://www.right.com.cn/forum/forum.php?mod=viewthread&tid=8215037&extra=page=2&filter=typeid&typeid=94&page=1)
<https://openwrt.org/toh/xiaomi/ax3200#upgrading_openwrt>
[AX6s å˜ç –äº†ï¼Œæœ‰å¤§ç¥å¯ä»¥çœ‹çœ‹å¦‚ä½•æ•‘ç –å—ï¼Ÿ-å°ç±³æ— çº¿è·¯ç”±å™¨åŠå°ç±³ç½‘ç»œè®¾å¤‡-æ©å±±æ— çº¿è®ºå› (right.com.cn)](https://www.right.com.cn/forum/thread-8199483-1-1.html)

æ•‘ç –

- å°ç±³å®˜æ–¹å·¥å…·ï¼šæ²¡æ˜¾ç¤ºæ”¯æŒçº¢ç±³ ax6sã€‚ä½†æ˜¯æœ‰äººè¯´å¯ä»¥ï¼Œæœ‰äººè¯´ä¸å¯ä»¥
- op å®˜æ–¹æ•™ç¨‹ä¸­çš„ tftp æ¢å¤
  - ä¸­æ–‡æåˆ°äº†è®¾ç½® dhcp server start 192.168.31.2ï¼Œé•¿åº¦ä¸º1ï¼š[AX6s å˜ç –äº†ï¼Œæœ‰å¤§ç¥å¯ä»¥çœ‹çœ‹å¦‚ä½•æ•‘ç –å—ï¼Ÿ-å°ç±³æ— çº¿è·¯ç”±å™¨åŠå°ç±³ç½‘ç»œè®¾å¤‡-æ©å±±æ— çº¿è®ºå› (right.com.cn)](https://www.right.com.cn/forum/thread-8199483-1-1.html)
  - tftpd è½¯ä»¶æ²¡æœ‰ start æŒ‰é’®ï¼Œé…ç½® dhcp server å’Œ tftp server å³å¯ã€‚
- å°±ç®—ä½¿ç”¨ç¼–ç¨‹å™¨ï¼Œæ˜¯ WSON æ¥å£ï¼Œä¹Ÿæ²¡æ³•ä½¿ç”¨å¤¹å­ã€‚å› æ­¤å¿…é¡»ç„Šæ¥ï¼Œè€Œæˆ‘æ²¡å™¨æï¼Œä¹Ÿä¸å¤ªä¼šã€‚

ç»“æœä¸¤ä¸ªæ–¹æ³•å¯¹æˆ‘éƒ½æ²¡ç”¨ã€‚

**å‘ç°é—®é¢˜åœ¨äºæŠŠ mesh æŒ‰é’®çœ‹æˆäº† reset é”®**ã€‚å¯¼è‡´ç¬¬ä¸€æ­¥è¿›å…¥ reset æ¨¡å¼å°±å¤±è´¥äº†ï¼Œç½‘å¡æ²¡æœ‰åˆå§‹åŒ–ï¼ŒPC ä¸Šæ˜¾ç¤ºä¸ºæœªè¿æ¥ã€‚ï¼ˆä¸ºäº†å‘ç°è¿™ä¸€ç‚¹å¯¹â€œresetâ€åé»„ç¯çš„äº®çš„è§„å¾‹è¿›è¡Œäº†è®¡æ—¶ï¼Œå‘ç°æŒ‰ä¸æŒ‰ï¼Œéƒ½æ˜¯12så·¦å³ç­ä¸€æ¬¡ï¼‰

æ­£ç¡®çš„æŒ‰ reset åï¼Œé€šè¿‡ tftp æ–¹æ³•æ¢å¤äº†åŸå‚ç³»ç»Ÿã€‚

ä¹‹åé€šè¿‡ telnet çš„æ–¹å¼ï¼Œåˆ·å…¥äº† 23.5.2 çš„ factoryã€‚æ¢å¤ backup çš„é…ç½®ï¼Œå°±å›åˆ°äº†ä¹‹å‰çš„çŠ¶æ€ã€‚

### ç«æ–—äº‘ 2.0ï¼ˆP&W)

#### èµ„æ–™

[[OpenWrt Wiki] P&W R619AC](https://openwrt.org/toh/p_w/r619ac)

#### æ•™ç¨‹

éœ€è¦å…ˆåˆ·å…¥ opbootï¼ˆä¸€ä¸ªç¬¬ä¸‰æ–¹ bootloaderï¼‰[ç«æ–—äº‘ 2 åˆ· opboot - è·¯ç”±æ™ºæ€ (red-yellow.net)](https://www.red-yellow.net/ç«æ–—äº‘2åˆ·opboot.html)

ç„¶åå†åˆ· openwrtã€‚
ç¼–è¯‘ï¼š[ç«æ–—äº‘ 2 çš„ OpenWrt å›ºä»¶ - è·¯ç”±æ™ºæ€ (red-yellow.net)](https://www.red-yellow.net/%e7%ab%9e%e6%96%97%e4%ba%912%e7%9a%84openwrt%e5%9b%ba%e4%bb%b6.html)
åˆ·çš„è¿™é‡Œä½œè€…æä¾›çš„ immortalwrtï¼š[ã€æ–°æé†’ã€‘ã€2023-6-13ã€‘ç«æ–—äº‘ 2.0P&W-R619AC OPENWRT å›ºä»¶ | æ’ä»¶å…¨é¢ | å¤šç‰ˆæœ¬-OPENWRT ä¸“ç‰ˆ - æ©å±±æ— çº¿è®ºå› - Powered by Discuz! (right.com.cn)](https://www.right.com.cn/forum/thread-4061585-1-1.html)

ä¹‹å‰ä½¿ç”¨ switch å®˜æ–¹å›ºä»¶ 22.03ï¼Œçœ‹åˆ° device æœ‰ eth0, eth1ï¼Œç„¶å switch ç•Œé¢å¯ä»¥è®¾ç½® 4 ä¸ª lan å£
ä½†æ˜¯é—®é¢˜æ˜¯åªè¦ä¸€æ”¹åŠ¨ vlan è®¾ç½®ï¼Œé€šè¿‡ wan å£ï¼ˆå¼€å¯ 192.168.99.0 çš„ dhcpï¼‰è®¿é—® p2w å°±ä¼šæ‰

åé¢åˆ·äº†ä¸€ä¸ªå…¶å®ƒäººç¼–è¯‘çš„ immortalwrt å›ºä»¶ï¼Œå‘ç°å…¶å®åªæœ‰ä¸€ä¸ª eth0ã€‚wan å£ eth0.2 æ˜¯ä¸€ä¸ª vlanã€‚switch ç•Œé¢æœ‰ 4 ä¸ª lan å’Œ 1 ä¸ª wan å¯ä»¥é…ç½®ã€‚
è¿™ä¸‹é…ç½® switch vlan å¼‚å¸¸ç¨³å®šé¡ºç•…
![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/vlan-plan.jpg)

è¿™é‡Œ CPU ç«¯å£çš„ tag å’Œ untag

- è®¾ç½®ä¸º offï¼Œåˆ™ä¸å­˜åœ¨ eth0.3 è®¾å¤‡
- è®¾ç½®ä¸º tag åˆ™ eth0.3 ä¸Š tcpdump èƒ½æ”¶åˆ°å¾ˆå¤šåŒ…
- è®¾ç½®ä¸º untagï¼Œåˆ™æ”¶ä¸åˆ°åŒ…

æ”¶åˆ°çš„åŒ…å…¶å®åªæœ‰å¹¿æ’­ç­‰æƒ…å†µï¼Œå¦åˆ™åŒ…ç›´æ¥ä»ç‰¹å®šç«¯å£å‡ºå»äº†ï¼Œä¸ä¼šå¾€å…¶å®ƒç«¯å£å‘ã€‚

```
root@p2w:~# tcpdump -ni eth0.3 host 114.214.236.72
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on eth0.3, link-type EN10MB (Ethernet), capture size 262144 bytes
q01:50:16.005639 IP 114.214.236.72.45520 > 239.255.255.250.1900: UDP, length 94
01:50:16.006412 ARP, Request who-has 114.214.236.74 tell 114.214.236.72, length 46
01:50:16.173072 ARP, Request who-has 114.214.236.96 tell 114.214.236.72, length 46
01:50:16.926278 ARP, Request who-has 114.214.236.200 tell 114.214.236.72, length 46
```

#### é‡åˆ°é—®é¢˜

ç»å¸¸æ€§çš„æ‰ç½‘ç»œï¼Œç ”ç©¶åå‘ç°æ˜¯ ap çš„ br-lan å’Œä¸Šæ¸¸æ— æ³•è¿æ¥äº†ã€‚é€šè¿‡æ— çº¿æ‰‹åŠ¨è®¾ç½®é™æ€ ip å¯ä»¥è¿ä¸Š p2wã€‚å°è¯• ping ç½‘å…³åœ°å€ï¼Œå‘ç° eth0.1 ä¸Šèƒ½æŠ“åˆ° arp åŒ…ï¼Œä½†æ˜¯ä¸Šæ¸¸å¯¹åº” bridge å´æŠ“ä¸åˆ°ã€‚åè¿‡æ¥ï¼Œä¸Šæ¸¸ arping ap åœ°å€ï¼Œap ä¹Ÿæ”¶ä¸åˆ°åŒ…ã€‚

- æµ‹è¯•å¦‚æœæŠŠè¿æ¥ ap çš„ç½‘çº¿è¿æ¥ç¬”è®°æœ¬ï¼Œç½‘ç»œæ˜¯æ­£å¸¸çš„ï¼Œå› æ­¤æ’é™¤ä¸Šæ¸¸é—®é¢˜ã€‚

```
arping -i interface æµ‹è¯•äºŒå±‚æ˜¯å¦é€š
arpæŸ¥çœ‹å½“å‰macè¡¨
tcpdump -ni eth0.1 arp
```

æ²¡åŠæ³•ï¼Œä¸çŸ¥å¦‚ä½•è§£å†³ï¼Œåªå¥½é‡è£…äº†å®˜æ–¹ 22.03.5 çš„ç³»ç»Ÿã€‚å®˜æ–¹ç³»ç»ŸæŠŠ wan å•ç‹¬æ‹¿äº†å‡ºæ¥ä½œä¸º eth1ï¼Œè€Œ switch ç•Œé¢å¯ä»¥é…ç½® eth0 å’Œå‰©ä½™å››ä¸ªç«¯å£

### 360 T7

#### åŸºæœ¬å‚æ•°

mt7681:<2xA53@1.3GHz>
256 RAM+ 128 NAND

ä»·æ ¼

- åŸç‰ˆ 118x2 åŒ…é‚®ï¼Œé­”æ”¹ 512 å†…å­˜ç‰ˆï¼š150

![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230815125432.png)

å¾…æœº 60 å¤šåº¦æœ‰æ¯’ï¼Œçœ‹æ¥è¿˜æ˜¯éœ€è¦è‡ªå·±åŠ æ•£çƒ­ç‰‡

40(30ï¼Œæœ€å°è¦†ç›–ä¸¤ä¸ªçš„è·ç¦») x25ï¼ˆæ·±åº¦ 10mmï¼‰

- 13x7
- 12x13
25x25
- 10x12
30x25ï¼ˆæ·±åº¦ï¼š15mmï¼‰
- 13x14

å•ä¸ªèŠ¯ç‰‡ï¼š14x14
æ•´ä¸ªç›–ä½ï¼š25x25ï¼Œ30x20

[hanwckf's blog](https://cmi.hanwckf.top/)
[360 T7 åˆ· openwrt æ•™ç¨‹ï½œæœ€å¼ºçš„ç™¾å…ƒè·¯ç”±å™¨ | é…±ç´«è¡¨ (qust.me)](https://qust.me/post/360t7-openwrt/)
[ã€æ–°æé†’ã€‘360T7 openwrt å›ºä»¶å‘å¸ƒï¼Œæ„Ÿè°¢ H å¤§-OPENWRT ä¸“ç‰ˆ - æ©å±±æ— çº¿è®ºå› - Powered by Discuz! (right.com.cn)](https://www.right.com.cn/forum/thread-8263290-1-1.html)
æåˆ°äº† ipv6 + wiregaurd + hnat æœ‰é—®é¢˜ï¼Ÿ[[é¿å‘] 360T7 - V2EX](https://www.v2ex.com/t/930398)

#### å‡†å¤‡

ç¡¬ä»¶

- æ‹†æœºå·¥å…·ï¼šèºä¸åˆ€ï¼Œæ’¬ç‰‡ï¼ˆæ²¡å®ƒçœŸæ‰“ä¸å¼€ï¼‰
- usb è½¬ ttl æ¨¡å—ï¼Œæœé‚¦çº¿å…¬å¯¹æ¯

è½¯ä»¶

- putty ç­‰ä¸²å£è½¯ä»¶
- ä¿®æ”¹ç‰ˆ ubootï¼š[Release 20230727 Â· hanwckf/bl-mt798x (github.com)](https://github.com/hanwckf/bl-mt798x/releases/tag/20230727)
- å›ºä»¶ï¼š237, immortal åŸç‰ˆ
- å¯èƒ½éœ€è¦ï¼šæ—§ç‰ˆåŸå‚å›ºä»¶ï¼Œæ–°ç‰ˆå›ºä»¶å…³é—­äº† failsafe æ¨¡å¼[hqvv/360T7: qihoo 360T7 resources and official firmware (github.com)](https://github.com/hqvv/360T7)
- å¯é€‰ï¼Œwindows netcatï¼Œç”¨äºåœ¨ failsafe æ¨¡å¼ä¸‹å¤‡ä»½è·¯ç”±å™¨ flashã€‚

#### 1. æ‹†æœºå’Œ TTL æ¨¡å—è¿æ¥

æ‹†æœºæ³¨æ„ï¼š

- è·¯ç”±å™¨åªæœ‰ä¸¤ä¸ªèºä¸ï¼Œéƒ½è¢«èƒŒé¢è´´çº¸ç›–ä½äº†
- ä¸€å…±æœ‰ 2+8 ä¸ªå¡å£ï¼Œéå¸¸éš¾æ‹†ã€‚ä¼˜å…ˆä»è·¯ç”±å™¨ä¸‹æ–¹æ’¬å¼€ï¼Œç„¶åå†ä¸¤ä¾§ï¼Œæœ€åä¸Šä¾§æ¯”è¾ƒå®¹æ˜“ã€‚
  - è§†é¢‘å‚è€ƒï¼š[360T7 ç¬¬äºŒéƒ¨åˆ†æ‹†æœº_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV1GV4y1P74A/?spm_id_from=333.880.my_history.page.click)

TTL æ¨¡å—è¿æ¥
æ¿å­å·¦ä¸Šè§’å››ä¸ªè§¦å­”ï¼Œä»ä¸Šåˆ°ä¸‹ï¼šRX, TX, GNDã€‚**æ³¢ç‰¹ç‡ 115200**

- æ³¨æ„ï¼Œå¯¹åº” TTL æ¨¡å—ä¸€ä¾§ï¼ŒRX éœ€è¦å¯¹åº” TXï¼ŒTX å¯¹åº” RX

#### 2. TTL è¿›å…¥ failsafe æ¨¡å¼å¼€å¯ telnet

åŸç†

- åŸç³»ç»Ÿä½¿ç”¨ ubootï¼Œä½†æ˜¯å…³é—­äº† uboot èœå•ï¼Œå¼€æœºåä¼šç›´æ¥å¼•å¯¼å†…æ ¸
- åŸç³»ç»Ÿå¼•å¯¼è¿‡ç¨‹ä¸­æ”¯æŒ failsafe æ¨¡å¼ï¼Œè¿›å…¥åå¯ä»¥ mount_rootï¼Œå¯¹æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œä¿®æ”¹ï¼Œä»è€Œå¯ä»¥å¼€å¯ telnet

è¿‡ç¨‹

- è¿æ¥å¥½ä¸²å£ï¼Œå¹¶æ‰“å¼€ putty åï¼Œæ’ç”µå¼€æœºï¼Œè·¯ç”±å™¨å¯åŠ¨å¹¶è¾“å‡ºä¿¡æ¯
- åœ¨å¼•å¯¼å†…æ ¸è¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç°è¿›å…¥ failsafe æç¤ºï¼ŒæŒ‰ f+enter å³å¯è¿›å…¥ã€‚å¤§æ¦‚æœ‰ 3 ç§’ç­‰å¾…æ—¶é—´ã€‚
  - å¦‚æœæ²¡å‡ºç°ï¼Œéœ€è¦é™çº§åŸç³»ç»Ÿã€‚[ã€æ–°æé†’ã€‘360t7m(t7 ç§»åŠ¨å®šåˆ¶ç‰ˆ) æ— æ³•è¿›å…¥ failsafe æ¨¡å¼-OPENWRT ä¸“ç‰ˆ - æ©å±±æ— çº¿è®ºå› - Powered by Discuz! (right.com.cn)](https://www.right.com.cn/forum/thread-8297040-1-1.html)
![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230815140202.png)

è¿›å…¥å

```bash
# å¼€å¯ubootæ§åˆ¶å°èœå•
fw_setenv bootmenu_delay 3

# æŒ‚è½½rootfså¹¶å¼€å¯telnet
mount_root
sed -i 's/.*local debug=.*/\tlocal debug=1/' /etc/init.d/telnet

# ä¿®æ”¹rootå¯†ç 
passwd root

# é‡å¯
reboot
```

å¯ä»¥é€‰æ‹©å¤‡ä»½å›ºä»¶

- æ³¨æ„åƒä¸‡ä¸è¦ pingï¼Œå¦åˆ™æ— æ³• ctrl-c
- nc ç»“æŸåä¼šè‡ªåŠ¨é€€å‡ºï¼Œ128MB çš„ flash ä¸åˆ° 1 åˆ†é’Ÿèƒ½å¤Ÿä¸‹è½½å®Œã€‚

```bash
# å°†ç”µè„‘çš„IPåœ°å€è®¾ç½®ä¸º192.168.1.8ï¼Œæ’å…¥è·¯ç”±å™¨LANå£
# ä½¿ç”¨ncç›‘å¬3333ç«¯å£å¹¶å†™å…¥all.bin
# Windowsç³»ç»Ÿå¯ä»¥ä½¿ç”¨netcat
# nc -l -p 3333 > all.bin

# åœ¨è·¯ç”±å™¨failsafeæ¨¡å¼ä¸‹å¼€å¯ç½‘ç»œ
ifconfig eth0 0.0.0.0
brctl addbr br-lan
ifconfig br-lan 192.168.1.1 netmask 255.255.255.0 up
brctl addif br-lan eth0

# è¯»å–/dev/mtd0ï¼Œä½¿ç”¨ncå‘é€åˆ°192.168.1.8:3333
cat /dev/mtd0 | nc 192.168.1.8 3333
```

#### 3. åˆ·æ”¹ç‰ˆ uboot å¹¶åˆ·å›ºä»¶

æ”¹ç‰ˆ uboot åŠŸèƒ½è¯¦ç»†ä»‹ç»ï¼š[mt798x uboot åŠŸèƒ½ä»‹ç» (hanwckf.top)](https://cmi.hanwckf.top/p/mt798x-uboot-usage/)

- å¦‚æœä½¿ç”¨åŸç‰ˆ ubootï¼Œåˆ™å›ºä»¶å¤§å°æœ€å¤šåªèƒ½ä½¿ç”¨ 36MBï¼Œæ”¹ç‰ˆæ”¯æŒ 108MB
- æ”¯æŒ webui æ–¹ä¾¿åˆ·å›ºä»¶

æ­¥éª¤

- ä¸Šä¸€æ­¥å¼€å¯ telnet åï¼Œæ­£å¸¸é‡å¯ç³»ç»Ÿ
- telnet è¿æ¥è·¯ç”±å™¨ï¼Œroot ç”¨æˆ·åï¼Œå¯†ç ä¸ºä¸Šä¸€æ­¥ä¿®æ”¹çš„å¯†ç 
- æœ¬åœ° python æ­å»ºä¸€ä¸ª http æœåŠ¡ï¼Œè·¯ç”±å™¨ä¸Šé€šè¿‡ wget ä¸‹è½½æ”¹ç‰ˆ uboot
- åˆ·å†™

  ```
  mtd write 360t7-fip-fixed-parts.bin fip
  ```

- æŒ‰ä½ reset é”®ï¼Œæ’ä¸Šè·¯ç”±å™¨ç”µæºï¼Œä¿æŒ 3 ç§’å·¦å³ï¼Œç¯å˜ä¸ºç»¿è‰²
- è®¾ç½®é™æ€ ip 192.168.1.2ï¼Œå³å¯æ‰“å¼€è·¯ç”±å™¨ web ç•Œé¢ã€‚
- é€‰æ‹©å›ºä»¶ä¸Šä¼ å³å¯ï¼ˆéœ€è¦å¯¹åº”æ”¹ç‰ˆ uboot åˆ†åŒºæ ¼å¼çš„ï¼‰

#### æ€§èƒ½é—®é¢˜

##### wifi è·‘ä¸åˆ°åƒå…†

360t7, QWRT

```
NAME="OpenWrt"
VERSION="SNAPSHOT"
ID="openwrt"
ID_LIKE="lede openwrt"
PRETTY_NAME="OpenWrt SNAPSHOT"
VERSION_ID="snapshot"
HOME_URL="https://openwrt.org/"
BUG_URL="https://bugs.openwrt.org/"
SUPPORT_URL="https://forum.openwrt.org/"
BUILD_ID="r5044-12209a7f2"
OPENWRT_BOARD="mediatek/mt7981"
OPENWRT_ARCH="aarch64_cortex-a53"
OPENWRT_TAINTS="no-all"
OPENWRT_DEVICE_MANUFACTURER="OpenWrt"
OPENWRT_DEVICE_MANUFACTURER_URL="https://openwrt.org/"
OPENWRT_DEVICE_PRODUCT="Generic"
OPENWRT_DEVICE_REVISION="v0"
OPENWRT_RELEASE="OpenWrt SNAPSHOT r5044-12209a7f2"

root@360T7 âœ  ~ uname -r
5.4.243
```

æ— çº¿æé™é€Ÿç‡

cpu å ç”¨ 150%

```
root@360T7 âœ  ~ iperf3 -c 192.168.35.135
- - - - - - - - - - - - - - - - - - - - - - - - -
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.00  sec  1.12 GBytes   962 Mbits/sec  310             sender
[  5]   0.00-10.00  sec  1.12 GBytes   962 Mbits/sec                  receiver


root@360T7 âœ  ~ iperf3 -c 192.168.35.135 -P 4
- - - - - - - - - - - - - - - - - - - - - - - - -
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.00  sec   438 MBytes   368 Mbits/sec  1219             sender
[  5]   0.00-10.01  sec   438 MBytes   367 Mbits/sec                  receiver
[  7]   0.00-10.00  sec   278 MBytes   234 Mbits/sec  201             sender
[  7]   0.00-10.01  sec   278 MBytes   233 Mbits/sec                  receiver
[  9]   0.00-10.00  sec   174 MBytes   146 Mbits/sec  275             sender
[  9]   0.00-10.01  sec   174 MBytes   145 Mbits/sec                  receiver
[ 11]   0.00-10.00  sec   311 MBytes   261 Mbits/sec  1025             sender
[ 11]   0.00-10.01  sec   311 MBytes   260 Mbits/sec                  receiver
[SUM]   0.00-10.00  sec  1.17 GBytes  1.01 Gbits/sec  2720             sender
[SUM]   0.00-10.01  sec  1.17 GBytes  1.01 Gbits/sec                  receiver

root@360T7 âœ  ~ iperf3 -c 192.168.35.135 -R
- - - - - - - - - - - - - - - - - - - - - - - - -
[ ID] Interval           Transfer     Bitrate
[  5]   0.00-10.00  sec   816 MBytes   684 Mbits/sec                  sender
[  5]   0.00-10.00  sec   815 MBytes   683 Mbits/sec                  receiver
```

```
$ iperf3.exe -B 192.168.35.135 -c 192.168.35.1
- - - - - - - - - - - - - - - - - - - - - - - - -
[ ID] Interval           Transfer     Bitrate
[  5]   0.00-10.00  sec  1.08 GBytes   930 Mbits/sec                  sender
[  5]   0.00-10.02  sec  1.08 GBytes   927 Mbits/sec                  receiver

$ iperf3.exe -B 192.168.35.135 -c 192.168.35.1 -R
- - - - - - - - - - - - - - - - - - - - - - - - -
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.02  sec  1.05 GBytes   900 Mbits/sec   30             sender
[  5]   0.00-10.00  sec  1.05 GBytes   900 Mbits/sec                  receiver

$ iperf3.exe -B 192.168.35.135 -c 192.168.35.253
- - - - - - - - - - - - - - - - - - - - - - - - -
[ ID] Interval           Transfer     Bitrate
[  5]   0.00-10.00  sec   820 MBytes   688 Mbits/sec                  sender
[  5]   0.00-10.01  sec   820 MBytes   688 Mbits/sec                  receiver
$ iperf3.exe -B 192.168.35.135 -c 192.168.35.253 -R
- - - - - - - - - - - - - - - - - - - - - - - - -
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.01  sec  1.18 GBytes  1.01 Gbits/sec   22             sender
[  5]   0.00-10.00  sec  1.18 GBytes  1.01 Gbits/sec                  receiver

$ iperf3.exe -B 192.168.35.135 -c 192.168.35.2
- - - - - - - - - - - - - - - - - - - - - - - - -
[ ID] Interval           Transfer     Bitrate
[  5]   0.00-10.00  sec  1.08 GBytes   924 Mbits/sec                  sender
[  5]   0.00-10.07  sec  1.08 GBytes   918 Mbits/sec                  receiver
$ iperf3.exe -B 192.168.35.135 -c 192.168.35.2 -R
- - - - - - - - - - - - - - - - - - - - - - - - -
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.05  sec   657 MBytes   548 Mbits/sec   16             sender
[  5]   0.00-10.00  sec   653 MBytes   548 Mbits/sec                  receiver
```

#### å›ºä»¶é€‰æ‹©

##### mtwifi é—­æºé©±åŠ¨

[æ©å±± 237 å¤§ä½¬å›ºä»¶](https://www.right.com.cn/forum/thread-8263340-1-1.html)

- Hanwckf çš„æºç  +18.06 è½¯ä»¶åŒ…
- æ”¯æŒ 802.11 k/v/r æ— ç¼æ¼«æ¸¸ã€ç¡¬ä»¶ QOS ç­‰åŠŸèƒ½
- é€šè¿‡ uboot åˆ·å…¥è¿‡ç¨‹ä¸­ï¼Œä¸çŸ¥ä¸ºä½•åˆ·å®Œé‡å¯åç¯ç­äº†ä¸€æ®µæ—¶é—´ã€‚åˆšå¼€å§‹è¿˜ä»¥ä¸ºæ˜¯è¿›ä¸äº†ç³»ç»Ÿï¼Œä½†æ˜¯åé¢å‘ç°æ²¡é—®é¢˜çš„ã€‚
- ç•Œé¢ä¸»é¢˜æ˜¯ designï¼Œç¡®å®å¾ˆå¥½çœ‹
- è‡´å‘½é—®é¢˜ï¼šç”±äºæ˜¯è‡ªç¼–è¯‘ï¼Œæ— æ³•å®‰è£… wireguard
- ç¬¬äºŒä¸ªä¸¥é‡é—®é¢˜ï¼šæ²¡æœ‰ä½¿ç”¨ wpadï¼Œè€Œæ˜¯ä½¿ç”¨ luci-app-mtk ç®¡ç†æ— çº¿ï¼Œè¿™å¯¼è‡´é…ç½® FT æ²¡æ³•

![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230818012311.png)

![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230818012256.png)

[hanwckf/immortalwrt-mt798x (github.com)](https://github.com/hanwckf/immortalwrt-mt798x)

- [immortalwrt-mt798x é¡¹ç›®ä»‹ç» (hanwckf.top)](https://cmi.hanwckf.top/p/immortalwrt-mt798x/)

QWRT(lean)
[ã€æ–°æé†’ã€‘æ½˜å¤šæ‹‰ QWRT MT7981 360T7 R23.5.4 é«˜æ€§èƒ½é—­æºå›ºä»¶å‘å¸ƒï¼ˆåŸç”Ÿæ— çº¿é…ç½®ï¼‰-OPENWRT ä¸“ç‰ˆ - æ©å±±æ— çº¿è®ºå› - Powered by Discuz! (right.com.cn)](https://www.right.com.cn/forum/thread-8283847-1-1.html)

- lua ç•Œé¢
- åŸç‰ˆæ— çº¿é…ç½®

åŠ ç¾¤åï¼Œç¾¤ä¸»å‘Šè¯‰æˆ‘ï¼Œé—­æºé©±åŠ¨åªèƒ½å’Œé—­æºé©±åŠ¨ç»„ meshï¼Œå¹¶ä¸”ä¹Ÿä¸å¤ªæ”¯æŒ 802.11rã€‚

ImmortalwrtARM
[ã€æ–°æé†’ã€‘ã€2023-08-12ã€‘å°ç±³ WR30U é—­æºé©±åŠ¨ immortalwrt å›ºä»¶ - å°ç±³æ— çº¿è·¯ç”±å™¨ä»¥åŠå°ç±³æ— çº¿ç›¸å…³çš„è®¾å¤‡ - æ©å±±æ— çº¿è®ºå› - Powered by Discuz! (right.com.cn)](https://www.right.com.cn/forum/thread-5053708-1-1.html)

- [[é¿å‘] 360T7 - V2EX](https://www.v2ex.com/t/930398) åœ¨è¿™é‡Œçœ‹åˆ°è¯´ padavanonly/immortalwrtARM FT æ­£å¸¸

##### ä¸ç¡®å®š

[åŸç‰ˆ immortalwrt](https://firmware-selector.immortalwrt.org/?version=23.05.0-rc3&target=mediatek%2Ffilogic&id=qihoo_360t7-ubootmod)

- ä½¿ç”¨äº†ä¸‹å‘ç° wan å£è®¾ç½® dhcp åˆšå¼€å§‹æ€»æœ‰é—®é¢˜ï¼Œè™½ç„¶æœ€åé€šè¿‡æ‰‹åŠ¨é‡å¯ dnsmasq æ–¹å¼è§£å†³äº†ï¼Œä½†æ˜¯ç¡®å®ä¸æ˜¯å¾ˆé¡ºåˆ©ã€‚

è‡ªç¼–è¯‘

å¤§ä½¬ä½ å¥½ã€‚æˆ‘è´­ä¹°äº† 360T7 å’Œ wr30u æ¥å¯¹å®¶ä¸­ç½‘ç»œè¿›è¡Œå‡çº§ã€‚ä½†æ˜¯ç”±äºè¿™ä¸¤ä¸ªéƒ½æ²¡æœ‰å®˜æ–¹ openwrt æ”¯æŒï¼Œæˆ‘ç”¨çš„éƒ½æ˜¯åˆ«äººç¼–è¯‘çš„ç‰ˆæœ¬ã€‚
360T7 ç”¨çš„æ˜¯è¿™ä¸ª[hanwckf/immortalwrt-mt798x (github.com)]( https://github.com/hanwckf/immortalwrt-mt798x)ï¼Œä½†æ˜¯å®ƒçš„æ— é™é…ç½®æ˜¯ luci-app-mtkï¼Œæˆ‘æ‰¾ä¸åˆ° 802.11r çš„é…ç½®é€‰é¡¹ã€‚
wr30u ç”¨çš„æ˜¯è¿™ä¸ª(QWRT) <https://www.right.com.cn/forum/thread-8284824-1-1.htmlï¼Œå®ƒæœ‰> 802.11r ä½†æ˜¯å´å•¥éƒ½ä¸èƒ½è®¾ç½®ï¼Œæˆ‘æŸ¥çœ‹æ—¥å¿—çœ‹åˆ° FT ä¼šæœ‰ The PMKID is invalid é”™è¯¯ã€‚ç°è±¡å°±æ˜¯è¿ä¸Šå®ƒä¹‹åå‹æ ¹ä¸ä¼šæ¼«æ¸¸ï¼Œç”šè‡³å¼ºåº¦ä½äº -80db äº†éƒ½ä¸ä¼šï¼Œåªèƒ½æ‰‹åŠ¨æ–­å¼€ wifi é‡è¿ã€‚

çœ‹åˆ°ä½ æµ‹è¯•äº†æ— çº¿å¼€æºå’Œé—­æºçš„å›ºä»¶ï¼Œæˆ‘æƒ³é—®ä¸‹å¼€æºçš„å›ºä»¶åœ¨é‚£æ‰¾ã€‚æˆ‘ä¸éœ€è¦æœ€å¼ºçš„æ€§èƒ½ï¼Œæˆ‘åªæƒ³è¦å®ƒçš„è®¾ç½®å’Œå®˜æ–¹ openwrt ä¸€æ ·ï¼Œå¯ä»¥ä¸€èµ·å·¥ä½œå°±è¡Œã€‚ğŸ˜­

æ³¨ï¼šå®¶ä¸­ç½‘ç»œåŸæœ¬æ˜¯ ax6s(åš acï¼‰+3 R3gï¼ˆapï¼‰ï¼Œ802.11r å·¥ä½œå¾—å¾ˆæ­£å¸¸ã€‚

#### 2025 æ–°

ç›®å‰ç³»ç»Ÿç‰ˆæœ¬

QWRT R23.6.1 / LuCI Master (git-23.141.16773-28dd4b3)

```
root@360T7 âœ  ~ df -h
Filesystem                Size      Used Available Use% Mounted on
/dev/root                41.0M     41.0M         0 100% /rom
tmpfs                   112.8M      2.0M    110.9M   2% /tmp
/dev/ubi0_2              52.0M     34.2M     15.0M  69% /overlay
overlayfs:/overlay       52.0M     34.2M     15.0M  69% /
tmpfs                   512.0K         0    512.0K   0% /dev
cgroup                  112.8M         0    112.8M   0% /sys/fs/cgroup
```

æœºå™¨æ‹†æœºï¼Œé€šè¿‡ä¸²å£åˆ·äº† hanwckf çš„ubootã€‚å¸¦ webuiï¼Œé•¿æŒ‰ reset åä¸Šä¼ ç³»ç»Ÿé•œåƒå³å¯

immortalwrt 23.04 æœ‰ openwrt uboot layoutï¼ˆæ–‡ä»¶ä¸­åŒ…å« ubootmodï¼‰å’Œ custom layoutã€‚é€‰æ‹© custom layout çš„ï¼Œä¸‹è½½ sysupgrade å³å¯ã€‚
24.04 çš„æ²¡æœ‰åç¼€äº†ï¼ˆåº”è¯¥åªæœ‰ openwrt layoutäº†ï¼‰ï¼Œéœ€è¦å®‰è£… openwrt å®˜æ–¹æ•™ç¨‹é‡æ–°åˆ·å®˜æ–¹ ubootï¼Œæ‰å¯ä»¥ç”¨ã€‚

### å°ç±³ WR30U

å‚è€ƒèµ„æ–™ï¼š

- ä¸€ä¸ªæ¯”è¾ƒå¹¿æ³›çš„æ•™ç¨‹ï¼š[å°ç±³ WR30U è§£é” SSH åˆ· openwrtï¼Œæœ€æœ‰æ€§ä»·æ¯”çš„ç™¾å…ƒè·¯ç”±å™¨ (qust.me)](https://blog.qust.me/wr30u)
- æ¢å¤åŸå‚å›ºä»¶å‡ ç§æ–¹æ³•ï¼š[ã€æ–°æé†’ã€‘å°ç±³ WR30U æ¢å¤åŸå‚å›ºä»¶çš„å‡ ç§æ–¹æ³• - å°ç±³æ— çº¿è·¯ç”±å™¨ä»¥åŠå°ç±³æ— çº¿ç›¸å…³çš„è®¾å¤‡ - æ©å±±æ— çº¿è®ºå› - Powered by Discuz! (right.com.cn)](https://www.right.com.cn/forum/thread-8291160-1-1.html)
  - hanwckf çš„å¤šåˆ†åŒº ubootï¼Œç›´æ¥æ”¯æŒåŸå‚ã€‚å…ˆåˆ·å…¥ ubootï¼Œç„¶å web åˆ·åŸå‚ mtd8 å¤‡ä»½
  - mtd è¦†ç›–æ•´ä¸ª mtd0
  - ttl ä¸­æ–­ ubootï¼Œtftp ä¸‹è½½ flash å¤‡ä»½ï¼Œç„¶ååˆ·

æƒ³ä» QWRT åˆ·æˆä¸»çº¿ openwrtï¼Œåˆ·äº† FIP åˆ†åŒºå’Œ ubi åˆ†åŒºï¼ˆåˆ·äº† ubootmod å’Œå¯¹åº”å›ºä»¶ï¼‰ï¼Œç»“æœæŠŠ WR30U åˆ·åäº†ã€‚è¯¦ç»†è§ WR30U æ•‘ç –
åŸæœ¬çš„ QWRT åº”è¯¥ä½¿ç”¨çš„æ˜¯ hanwckf's uboot(immortalwrt-112m)

#### åˆ·æœº

ä½¿ç”¨ hanwckf's å¤§ä½¬æä¾›çš„ bl-mt798x uboot æ”¯æŒå¤šç§æœºå‹ + åˆ†åŒºæ ¼å¼ï¼š[mt798x uboot åŠŸèƒ½ä»‹ç» (hanwckf.top)](https://cmi.hanwckf.top/p/mt798x-uboot-usage/)

bl-mt798x é¡¹ç›®åŸºäº mtk åŸå‚æä¾›çš„ ATF åŠ uboot æºç ï¼Œç‰¹ç‚¹å¦‚ä¸‹

- uboot è‡ªå¸¦ mtk åŸå‚å¼€å‘çš„ç®€æ˜“ webui æ¢å¤ç•Œé¢ï¼Œå¯ä»¥é€šè¿‡ webui ç›´æ¥åˆ·å…¥å›ºä»¶æˆ–è€…æ›´æ–° ubootï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸²å£+TFTP åˆ·å…¥å›ºä»¶
- æ”¯æŒå¤šç§ Flash åˆ†åŒºå¸ƒå±€åˆ‡æ¢åŠŸèƒ½ï¼ˆä»…æ”¯æŒ spi-nandï¼‰ï¼Œå¯ä»¥åœ¨ webui ä¸­åˆ‡æ¢ä¸åŒçš„åˆ†åŒºå¸ƒå±€ï¼Œå®Œç¾å…¼å®¹å°ç±³åŸå‚å›ºä»¶

hanwckf çš„ uboot æ”¯æŒå¤šç§ dts å¸ƒå±€ï¼Œå¯ä»¥å¼•å¯¼ä¸åŒçš„å›ºä»¶ï¼ˆåŒ…å«å®˜æ–¹å›ºä»¶ï¼‰ã€‚ä½†æ˜¯éœ€æ³¨æ„

- uboot æ”¯æŒåˆ·å…¥å°ç±³åŸå‚ mtd8/mtd9 å¤‡ä»½æ–‡ä»¶ï¼ˆå¯ä»[æ­¤å¤„](https://github.com/hanwckf/xiaomi-router-stock-ubi-bin)ä¸‹è½½ï¼‰ï¼Œä¸æ”¯æŒ`miwifi.com`å®˜ç½‘ä¸‹è½½çš„å›ºä»¶
- ç”±äº OpenWrt ä¸»çº¿çš„ ubootmod å›ºä»¶æœªå¼€å¯ nmbm æ”¯æŒï¼Œå› æ­¤**ä¸æ”¯æŒä»»ä½• ubootmod åˆ†åŒºå¸ƒå±€çš„ä¸»çº¿å›ºä»¶**ï¼ˆåŒ…æ‹¬ OpenWrt, X-Wrt ç­‰å¸¦æœ‰ ubootmod å­—æ ·çš„å›ºä»¶ï¼‰ï¼Œè¯·ä½¿ç”¨ OpenWrt ä¸»çº¿æä¾›çš„ uboot å¯åŠ¨ ubootmod å›ºä»¶

| å›ºä»¶ç±»å‹                                                                                                                                                                                              | uboot (default) | uboot (immortalwrt-112m) | uboot (qwrt) |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------- | ------------------------ | ------------ |
| [å°ç±³åŸå‚ mtd8/mtd9 å¤‡ä»½æ–‡ä»¶](https://github.com/hanwckf/xiaomi-router-stock-ubi-bin/tree/main/xiaomi-wr30u)                                                                                              | âˆš               | Ã—                        | Ã—            |
| [immortalwrt-mt798x stock](https://github.com/hanwckf/immortalwrt-mt798x/blob/openwrt-21.02/target/linux/mediatek/files-5.4/arch/arm64/boot/dts/mediatek/mt7981-xiaomi-mi-router-wr30u-stock.dts) | âˆš               | Ã—                        | Ã—            |
| [OpenWrt stock](https://github.com/openwrt/openwrt/blob/main/target/linux/mediatek/dts/mt7981b-xiaomi-mi-router-wr30u-stock.dts)                                                                  | âˆš               | Ã—                        | Ã—            |
| [immortalwrt stock](https://github.com/immortalwrt/immortalwrt/blob/master/target/linux/mediatek/dts/mt7981b-xiaomi-mi-router-wr30u-stock.dts)                                                    | âˆš               | Ã—                        | Ã—            |
| [X-Wrt stock](https://github.com/x-wrt/x-wrt/blob/master/target/linux/mediatek/dts/mt7981b-xiaomi-mi-router-wr30u-stock.dts)                                                                      | âˆš               | Ã—                        | Ã—            |
| [immortalwrt-mt798x 112m](https://github.com/hanwckf/immortalwrt-mt798x/blob/openwrt-21.02/target/linux/mediatek/files-5.4/arch/arm64/boot/dts/mediatek/mt7981-xiaomi-mi-router-wr30u-112m.dts)   | Ã—               | âˆš                        | Ã—            |
| [GL.iNet by 237176253](https://www.right.com.cn/forum/thread-8297881-1-1.html)                                                                                                                    | Ã—               | âˆš                        | Ã—            |
| [X-Wrt 112m nmbm](https://github.com/x-wrt/x-wrt/blob/master/target/linux/mediatek/dts/mt7981b-xiaomi-mi-router-wr30u-112m-nmbm.dts)                                                              | Ã—               | âˆš                        | Ã—            |
| [OpenWrt 112m nmbm](https://github.com/openwrt/openwrt/blob/main/target/linux/mediatek/dts/mt7981b-xiaomi-mi-router-wr30u-112m-nmbm.dts)                                                          | Ã—               | âˆš                        | Ã—            |
| [immortalwrt 112m nmbm](https://github.com/immortalwrt/immortalwrt/blob/master/target/linux/mediatek/dts/mt7981b-xiaomi-mi-router-wr30u-112m-nmbm.dts)                                            | Ã—               | âˆš                        | Ã—            |
| [X-Wrt 112m nmbm](https://github.com/x-wrt/x-wrt/blob/master/target/linux/mediatek/dts/mt7981b-xiaomi-mi-router-wr30u-112m-nmbm.dts)                                                              | Ã—               | âˆš                        | Ã—            |
| [QWRT](https://www.right.com.cn/forum/thread-8284824-1-1.html)                                                                                                                                    | Ã—               | Ã—                        | âˆš            |
| [OpenWrt ubootmod](https://github.com/openwrt/openwrt/blob/main/target/linux/mediatek/dts/mt7981b-xiaomi-mi-router-wr30u-ubootmod.dts)                                                            | Ã—               | Ã—                        | Ã—            |
| [immortalwrt ubootmod](https://github.com/immortalwrt/immortalwrt/blob/master/target/linux/mediatek/dts/mt7981b-xiaomi-mi-router-wr30u-ubootmod.dts)                                              | Ã—               | Ã—                        | Ã—            |
| [X-Wrt ubootmod](https://github.com/x-wrt/x-wrt/blob/master/target/linux/mediatek/dts/mt7981b-xiaomi-mi-router-wr30u-ubootmod.dts)                                                                | Ã—               | Ã—                        | Ã—            |
|                                                                                                                                                                                                   |                 |                          |              |

#### å›ºä»¶

**ä»¥ä¸‹å›ºä»¶å‡ä½¿ç”¨é—­æºæ— çº¿é©±åŠ¨ï¼Œæ— æ³•å’Œå®˜æ–¹ openwrt ç»„ mesh**
QWRT
[ã€æ–°æé†’ã€‘æ½˜å¤šæ‹‰ QWRT MT7981 å°ç±³ WR30U è”é€šç‰ˆ é«˜æ€§èƒ½é—­æºå›ºä»¶å‘å¸ƒï¼ˆåŸç”Ÿæ— çº¿é…ç½®ï¼‰-OPENWRT ä¸“ç‰ˆ - æ©å±±æ— çº¿è®ºå› - Powered by Discuz! (right.com.cn)](https://www.right.com.cn/forum/thread-8284824-1-1.html)

X-Wrt
[X-Wrt, for IoT, a custom Distribution for OpenWrt](https://x-wrt.com/)

hanwckf's immortalwrt
[hanwckf/immortalwrt-mt798x (github.com)](https://github.com/hanwckf/immortalwrt-mt798x)
[immortalwrt-mt798x é¡¹ç›®ä»‹ç» (hanwckf.top)](https://cmi.hanwckf.top/p/immortalwrt-mt798x/)

#### å®˜æ–¹æ•™ç¨‹

å®˜æ–¹æ•™ç¨‹[git.openwrt.org Git - openwrt/openwrt.git/commit](https://git.openwrt.org/?p=openwrt/openwrt.git;a=commit;h=54dc1cde48a47a3ebf4c182916802f33786f000a)

stock å›ºä»¶ uboot

- åŸå‚è§£é” ssh
- åˆ· initramfs-factory.ubi (ubiformat)
- ä½¿ç”¨ squashfs-sysupgrade.bin å‡çº§ï¼ˆå‘½ä»¤è¡Œ sysupgrade æˆ–è€… luciï¼‰
stock uboot åˆ†åŒºå¸ƒå±€ï¼Œubi éƒ¨åˆ†å¾ˆå°ï¼Œåªæœ‰ 34MB(128MB flash)

æ”¹ç‰ˆ uboot
å¯ä»¥ä½¿ç”¨æ”¹ç‰ˆ uboot åˆ†åŒºæ ¼å¼ï¼ˆä¸æ˜¯ä½¿ç”¨æ”¹ç‰ˆ bootloaderï¼Œæ¯”å¦‚ breedã€‚è€Œä¸”ç¥å¥‡çš„æ˜¯ uboot å±…ç„¶ä¹Ÿæ”¯æŒç½‘é¡µä¸Šä¼ å›ºä»¶åŠŸèƒ½ï¼‰

- åˆ· ubootmod-initramfs-factory.ubi
- kmod-mtd-rw
- FormatÂ ubiÂ andÂ createÂ newÂ ubootenvÂ volume

```
ubidetachÂ -pÂ /dev/mtd8;Â ubiformatÂ /dev/mtd8Â -y;Â ubiattachÂ -pÂ /dev/mtd8  
Â Â Â ubimkvolÂ /dev/ubi0Â -nÂ 0Â -NÂ ubootenvÂ -sÂ 128KiB  
Â Â Â ubimkvolÂ /dev/ubi0Â -nÂ 1Â -NÂ ubootenv2Â -sÂ 128KiB
```

- FlashÂ OpenwrtÂ U-Boot
  - BL2 æ˜¯ ARM è®¾å¤‡å…³äºå¤šçº§ Bootloader ä¸­çš„ä¸€çº§ã€‚
  - FIP åŒ…å« uboot

```
mtdÂ writeÂ /tmp/ubootmod-preloader.binÂ BL2  
 mtdÂ writeÂ /tmp/ubootmod-bl31-uboot.fipÂ FIP
```

- sysupgrade

æ¢å¤åŸå‚å›ºä»¶

- sysupgradeÂ -FÂ -nÂ /tmp/ubootmod-initramfs-recovery.itbã€‚ç³»ç»Ÿä¼šé‡å¯è¿›å…¥ openwrt initramfs ç³»ç»Ÿ
- FormatÂ ubiÂ andÂ Nvram  
Â Â Â ```
ubidetachÂ -pÂ /dev/mtd8;Â ubiformatÂ /dev/mtd8Â -y;Â ubiattachÂ -pÂ /dev/mtd8  
Â Â Â mtdÂ eraseÂ Nvram
Â Â Â ```
Â Â Â - FlashÂ stockÂ U-BootÂ andÂ ubi  
Â Â Â ```
mtdÂ writeÂ /tmp/BL2.binÂ BL2  
Â Â Â mtdÂ writeÂ /tmp/FIP.binÂ FIP  
Â Â Â mtdÂ writeÂ /tmp/ubi.binÂ ubi  
Â Â Â ```
- åˆ·å›å¤‡ä»½ mtd8ï¼ˆåŸå‚å›ºä»¶ï¼‰
Â Â Â JustÂ runÂ command:Â `ubiformatÂ /dev/mtd8Â -yÂ -fÂ /tmp/ubi.bin`

### å…¶å®ƒ 7981

åšå·¥æœç„¶è¿˜æ˜¯æœ‰åŒºåˆ«çš„ï¼Œax6s wifi6 160Mhz æé™å¯ä»¥è·‘åˆ°1.56Gbits/secã€‚è€Œ jcg q30 pro æœ€é«˜è·‘åˆ° 1.2Gã€‚

> æ— çº¿è§„æ ¼æ˜¯ ax3000ï¼Œæ”¯æŒ 160Mhz é¢‘å®½çš„ Wi-Fiï¼Œç›¸æ¯”çº¢ç±³ ax6s çš„ 4x4mimo 80Mhz é¢‘å®½ï¼Œç›®å‰ 2*2 mimo 160Mhz è¿˜æ˜¯æ›´å®ç”¨ï¼Œèƒ½è®©è¿‘å‡ å¹´çš„å®‰å“ã€Windows è®¾å¤‡éƒ½èƒ½è¾¾åˆ° 2400Mbps çš„è¿æ¥é€Ÿç‡ï¼›

ax6s æˆ‘æˆåŠŸå¼€å¯äº† 160Mhzï¼Œè™½ç„¶å¼€å§‹ç¡®å®é‡åˆ°äº†å¼€å¯åï¼Œæ²¡æœ‰ wifi ä¿¡å·çš„é—®é¢˜ã€‚ä½†æ˜¯è¯•äº†ï¼šå›½å®¶ç æ”¹æˆ AUï¼Œ60 channel åå°±æˆåŠŸäº†ï¼ˆ36 è¯•äº†å¼€ä¸å¼€ï¼‰ã€‚åœ¨ wifi analyzer å’Œ wifi man æ‰‹æœºè½¯ä»¶ä¸­çœ‹ç¡®å®æ˜¯ 60 å¼€å§‹çš„ 80 Mhzã€‚ä½†æ˜¯ç¬”è®°æœ¬è¿æ¥ç¡®å®èƒ½åå•†åˆ° 2400ï¼Œå¹¶ä¸” iperf3 æµ‹é€Ÿä¸Šä¼ ä¹Ÿèƒ½åˆ° 1.5Gã€‚

```
$ iperf3.exe -c ax6s.op2 -P 2
- - - - - - - - - - - - - - - - - - - - - - - - -
[ ID] Interval           Transfer     Bitrate
[  5]   0.00-10.00  sec   949 MBytes   796 Mbits/sec                  sender
[  5]   0.00-10.01  sec   949 MBytes   796 Mbits/sec                  receiver
[  7]   0.00-10.00  sec   911 MBytes   764 Mbits/sec                  sender
[  7]   0.00-10.01  sec   911 MBytes   764 Mbits/sec                  receiver
[SUM]   0.00-10.00  sec  1.82 GBytes  1.56 Gbits/sec                  sender
[SUM]   0.00-10.01  sec  1.82 GBytes  1.56 Gbits/sec                  receiver
```

ä¸»çº¿opï¼š[OpenWrt Firmware Selector](https://firmware-selector.openwrt.org/?version=23.05.3&target=mediatek%2Ffilogic&id=jcg_q30-pro)
JCG Q30 Pro (OpenWrt U-Boot layout)) [ImmortalWrt Firmware Selector](https://firmware-selector.immortalwrt.org/?version=23.05.2&target=mediatek%2Ffilogic&id=jcg_q30)
JCG Q30 Pro (custom U-Boot layout)[ImmortalWrt Firmware Selector](https://firmware-selector.immortalwrt.org/?version=23.05.2&target=mediatek%2Ffilogic&id=jcg_q30)

CMCC RAX3000Mï¼š[åœ¨ä¸­å›½ç§»åŠ¨ RAX3000M ä¸Šä½¿ç”¨ä¸»çº¿ openwrt è®°å½• - sh1marin's blog](https://blog.sh1mar.in/post/cmcc-rax3000m/)

- æƒŠç° cyy
- æœ‰ USB3.0
- å¤§å°æ¯” jcg ç•¥å°ç‚¹ï¼Œä½†æ˜¯æ¯” jcg åšä¸€ç‚¹

H3C NX30 Pro

å°ç±³ AX3000Tï¼šå¤©çº¿å¯ä»¥æŠ˜å ï¼Œå¤–å½¢æ¯”è¾ƒå¥½çœ‹ã€‚

### JCG Q30 PRO

- åˆ†åŸå‚ 512 MB å†…å­˜ç‰ˆï¼Œå’Œ 256 MB å†…å­˜ç‰ˆ
- æ‹†æœºç‰ˆï¼š[æ·ç¨€ JCG Q30 Pro åˆ·æœºè¯´æ˜ - æ‹†æœºç‰ˆ - Re: MX çš„è‡ªç•™åœ° (kevinmx.top)](https://mary.kevinmx.top/default/JCG-Q30-Pro.html)
- å…æ‹†ç‰ˆï¼š[æ·ç¨€ JCG Q30 Pro åˆ·æœºè¯´æ˜ - å…æ‹†ç‰ˆ - Re: MX çš„è‡ªç•™åœ° (kevinmx.top)](https://mary.kevinmx.top/default/JCG-Q30-Pro-Neo.html)
- å®˜æ–¹ï¼š[[OpenWrt Wiki] JCG Q30 Pro](https://openwrt.org/toh/jcg/q30_pro)
- [git.openwrt.org Git - openwrt/openwrt.git/commit](https://git.openwrt.org/?p=openwrt/openwrt.git;a=commit;h=626344c9926dcf2db2e10681c19aab0328fee160)

immortalwrt æ”¯æŒ

```
**Commit:**Â 2084a1a31c8faf1adc6b170f3f15fc0660a52ec4  
**Parents:**Â 1fabb1e2f5c79ddb8038e9675965cb41054139fc  
**Author:**Â Tianling Shen <[cnsztl@immortalwrt.org](mailto:cnsztl@immortalwrt.org)>  
**Author Date:**Â Mon Jun 26 2023 21:00:49 GMT+0800 (China Standard Time)  
**Committer:**Â Tianling Shen <[cnsztl@immortalwrt.org](mailto:cnsztl@immortalwrt.org)>  
**Committer Date:**Â Mon Jun 26 2023 21:02:02 GMT+0800 (China Standard Time)  
  
mediatek: add JCG Q30 (Pro) support  
  
Signed-off-by: Tianling Shen <cnsztl@immortalwrt.org>
```

ä¸»çº¿ç‰ˆæœ¬

```
**Commit:**Â 626344c9926dcf2db2e10681c19aab0328fee160  
**Parents:**Â b42c5272286ee248c698cc2cfac88df1bf51cbe3  
**Author:**Â Chukun Pan <[amadeus@jmu.edu.cn](mailto:amadeus@jmu.edu.cn)>  
**Author Date:**Â Fri Jun 16 2023 23:16:30 GMT+0800 (China Standard Time)  
**Committer:**Â Hauke Mehrtens <[hauke@hauke-m.de](mailto:hauke@hauke-m.de)>  
**Committer Date:**Â Sun Nov 19 2023 23:52:16 GMT+0800 (China Standard Time)  
  
mediatek: filogic: add JCG Q30 PRO support  
  
Hardware specification:  
Â Â SoC: MediaTek MT7981B 2x A53  
Â Â Flash: Winbond 128MB  
Â Â RAM: DDR3 256MB  
Â Â Ethernet: 4x 10/100/1000 Mbps  
Â Â Switch: MediaTek MT7531AE  
Â Â WiFi: MediaTek MT7976C  
Â Â Button: Reset  
Â Â Power: DC 12V 1A  
  
Flash instructions:  
Â Â 1. Connect to your PC via the Gigabit port of the router,  
Â Â Â Â Â set a static ip on the ethernet interface of your PC.  
Â Â Â Â Â (ip 192.168.1.254, gateway 192.168.1.1)  
Â Â 2. Attach UART, pause at u-boot menu.  
Â Â 3. Select "Upgrade ATF BL2", then use preloader.bin  
Â Â 4. Select "Upgrade ATF FIP", then use bl31-uboot.fip  
Â Â 5. Download the initramfs image, and type "reset",  
Â Â Â Â Â waiting for tftp recovery to complete.  
Â Â 6. After openwrt boots up, perform sysupgrade.  
  
Note:  
Â Â 1. Since NMBM is disabled, we must back up all partitions.  
Â Â 2. Although we can upgrade new firmware in the stock firmware,  
Â Â Â Â Â we need the special fit image signature of MediaTek and  
Â Â Â Â Â dual boot (hack kernel) to make u-boot boot it. So just  
Â Â Â Â Â abandon these hacks and flash it via the serial port.  
  
Signed-off-by: Chukun Pan <amadeus@jmu.edu.cn>
```

immortal åˆ é™¤äº† custom layout

```
**Commit:**Â 8593c213b018e380e465f9967225abc31b5b3e75  
**Parents:**Â a97a7d457528bdc6b3c325858edadbec7e7b8641  
**Author:**Â Tianling Shen <[cnsztl@immortalwrt.org](mailto:cnsztl@immortalwrt.org)>  
**Author Date:**Â Sat Jan 06 2024 14:24:12 GMT+0800 (China Standard Time)  
**Committer:**Â Tianling Shen <[cnsztl@immortalwrt.org](mailto:cnsztl@immortalwrt.org)>  
**Committer Date:**Â Thu Jan 11 2024 11:02:29 GMT+0800 (China Standard Time)  
  
mediatek: remove custom layout for JCG Q30  
  
Since the mainline implementation has been accepted by upstream,  
it doesn't make sense to keep these hacks. People are also confused  
with these "custom layouts".  
  
Signed-off-by: Tianling Shen <cnsztl@immortalwrt.org>
```

- ä¸»çº¿ op æ²¡æœ‰å…æ‹†åˆ·æœºæ–¹æ³•ï¼ˆåˆ·è¿‡æ¸¡åŒ…ï¼‰å—ï¼Ÿ
  - çœ‹æ¥ç¡®å®æ²¡æœ‰ï¼Œæ¥è‡ªä¸»çº¿ commit msgï¼šAlthough we can upgrade new firmware in the stock firmware, we need the special fit image signature of MediaTek and dual boot (hack kernel) to make u-boot boot it. So just abandon these hacks and flash it via the serial port.
- å¯ä»¥å…ˆç”¨ 237 è¿‡æ¸¡å›ºä»¶åˆ·å¥½ uboot åï¼Œç›´æ¥é€šè¿‡ WebUI ä¸Šä¼ ä¸»çº¿ op sysupgradeæ–‡ä»¶å—ï¼ˆä¸»çº¿åªæœ‰sysupgradeæ²¡æœ‰factoryï¼‰
- **å¯ä»¥åˆ·å¥½ä»»æ„ä¸€ä¸ª openwrt ç‰ˆæœ¬åï¼Œssh ä¸Šå»åï¼Œé€šè¿‡ mtd åˆ·å†™ä¸»çº¿ op å—**ï¼Œéœ€è¦ä¿®æ”¹å“ªäº›ä¸œè¥¿ï¼ˆæˆ‘ä¹‹å‰å› ä¸ºæ“ä½œä¸å½“æŠŠä¸€ä¸ª wr30u å˜ç –äº†ï¼Œå³ä½¿ TTL è¿›å…¥äº† ubootï¼Œç»“æœç½‘ç»œä¸é€šï¼Œæ²¡æ³•é€šè¿‡ tftp æ¢å¤ï¼‰
- immortalwrt ä¸¤ä¸ªç‰ˆæœ¬ï¼ˆOpenWrt U-Boot layout å’Œ custom U-Boot layoutï¼‰åŒºåˆ«æ˜¯ä»€ä¹ˆ
  - Tianling ç‰ˆæœ¬çš„å¼€å¯äº† nmbm åŠŸèƒ½ï¼Œä¸»çº¿çš„æ²¡æœ‰ã€‚flash åˆ†åŒºä¸ä¸€æ ·
- ä¸ºä»€ä¹ˆåˆ·å¤©çµç‰ˆæœ¬ uboot ä¸ç”¨ä¿®æ”¹ BL2ï¼ˆä¸»çº¿ op éœ€è¦å‡çº§ ATF BL2å’ŒFIPï¼‰

å‡ ä¸ªä¸€èˆ¬æ€§çš„é—®é¢˜

- ä¸»çº¿çš„ uboot æ²¡æœ‰ webui çš„åŠŸèƒ½å—
- å¾ˆå¤šåˆ·æœºæ–¹æ³•é‡Œçš„å…ˆåˆ· initramfs imageï¼Œå† sysupgrade çš„ç›®çš„æ˜¯ä¸ºä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆä¸ç›´æ¥ä¿®æ”¹ firmware åˆ†åŒº

#### é‡åˆ°é—®é¢˜

5g 160MHz æ— çº¿å¾ˆæ…¢ï¼Œping å¤§åŒ…ç›´æ¥ä¸¢åŒ…ã€‚é‡æ–°è¿æ¥ wifi å°±å¥½äº†

```
$ ping 192.168.1.1 -l 2000

æ­£åœ¨ Ping 192.168.1.1 å…·æœ‰ 2000 å­—èŠ‚çš„æ•°æ®:
è¯·æ±‚è¶…æ—¶ã€‚
è¯·æ±‚è¶…æ—¶ã€‚
è¯·æ±‚è¶…æ—¶ã€‚
æ¥è‡ª 192.168.1.1 çš„å›å¤: å­—èŠ‚=2000 æ—¶é—´=3ms TTL=64

192.168.1.1 çš„ Ping ç»Ÿè®¡ä¿¡æ¯:
    æ•°æ®åŒ…: å·²å‘é€ = 4ï¼Œå·²æ¥æ”¶ = 1ï¼Œä¸¢å¤± = 3 (75% ä¸¢å¤±)ï¼Œ
å¾€è¿”è¡Œç¨‹çš„ä¼°è®¡æ—¶é—´(ä»¥æ¯«ç§’ä¸ºå•ä½):
    æœ€çŸ­ = 3msï¼Œæœ€é•¿ = 3msï¼Œå¹³å‡ = 3ms
```

### TL-XDR6088

<https://lwz322.github.io/2023/07/11/Infrastructure.html#:~:text=%E7%AE%97%E6%98%AF%E6%AF%94%E8%BE%83%E5%A5%BD%E7%9A%84-,XDR6088%E5%88%B7OpenWrt,-%E5%8F%AF%E4%BB%A5%E6%9F%A5%E5%88%B0%E7%9A%84>

[TL-XDR6088/6086 åˆ·å…¥å®˜æ–¹ Openwrt/Immortalwrt - å·å¶ :: ä¸èˆæ˜¼å¤œ (typlog.io)](https://shun.typlog.io/tl-xdr608x-openwrt-install)

#### debug ç‰ˆæœ¬åˆ·æœº

å«å›ºä»¶ä¸‹è½½åœ°å€ï¼š[ã€æ–°æé†’ã€‘XTR8488 XDR6088/6086 UPNP DHCP è·³Ping Docker æ¼«æ¸¸ æ— çº¿ åˆ·æœº å®˜æ–¹ä¿®å¤å›ºä»¶1.3æ›´-Tp-linkæ— çº¿è·¯ç”±å™¨åŠç½‘ç»œè®¾å¤‡-æ©å±±æ— çº¿è®ºå›](https://www.right.com.cn/forum/thread-8296029-1-1.html)

- åªæœ‰æ­£å¼ç‰ˆå¯ä»¥åˆ·åˆ° debug ç‰ˆæœ¬ï¼Œä¿®å¤ç‰ˆä¸è¡Œ

[ã€æ–°æé†’ã€‘2024å¹´åˆ·XDR6088æœ‰æ„Ÿ;â€”â€”è¢«ä½ä¼°çš„ç‹è€…-Tp-linkæ— çº¿è·¯ç”±å™¨åŠç½‘ç»œè®¾å¤‡-æ©å±±æ— çº¿è®ºå›](https://www.right.com.cn/forum/forum.php?mod=viewthread&tid=8404193&highlight=xdr6088)

è®°å½•ä¿¡æ¯ï¼š
å½“å‰ç¡¬ä»¶ç‰ˆæœ¬ï¼šTL-XDR6088æ˜“å±•Turboç‰ˆ 1.0
å½“å‰è½¯ä»¶ç‰ˆæœ¬ï¼š1.0.30 Build 240327 Rel.27223

**åˆ·æœº**

1.0.30 -> 1.0.28 -> 1.0.29 æµ‹è¯•ç‰ˆ(debug ç‰ˆ) -> ä¸Šä¼  openwrt/immortalwrt sysupgrade.fip

**æ¢å¤å®˜æ–¹**ï¼š

å¦‚æœæˆ‘ä»¬åˆ·å®Œopenwrtæ„Ÿè§‰ä¸æ»¡æ„è¿˜å¯ä»¥åˆ·å›å®˜æ–¹åŸå‚å›ºä»¶ã€‚æˆ‘ä»¬åˆ·æœºå¤±è´¥ï¼Œæˆ–è€…æŒ‰ç€resetä¸Šç”µ,[è·¯ç”±å™¨](https://www.smzdm.com/fenlei/luyouqi/)éƒ½ä¼šè‡ªåŠ¨è¿›å…¥æ•‘æ´æ¨¡å¼ï¼Œç„¶åå°±å¯ä»¥åˆ·å…¥ä»tplinkä¸‹è½½çš„å®˜æ–¹å›ºä»¶äº†ã€‚

#### æ¥å£

2.5 2.5
eth1 lan5 lan1 lan2 lan3 lan4

### cudy tr3000 v1

ç¡¬ä»¶é…ç½®

- <mtk7981@1.3GHz>, 2c4t
- 512MB ram
- 2.5G + 1G
- usb 3.0
- type c ä¾›ç”µ

æœ‰ 128MB å’Œ 256MB flash çš„ç‰ˆæœ¬ï¼Œæˆ‘ä¹°çš„ä¸å¹¸æ˜¯ 128MB çš„ã€‚

#### åˆ· openwrt

å®˜æ–¹æä¾›äº†è¿‡æ¸¡å›ºä»¶ï¼ˆopenwrt å›ºä»¶ï¼Œç¦ç”¨äº†ä¿®æ”¹ fip åˆ†åŒºï¼‰ï¼š[OpenWrt Software Download â€“ Cudy](https://www.cudy.com/blogs/faq/openwrt-software-download)

ä¸Šä¼ è¿‡æ¸¡å›ºä»¶å³å¯è¿›å…¥ä¸€ä¸ª openwrt ç³»ç»Ÿï¼Œé€šè¿‡ openwrt sysupgrade å³å¯æ›´æ–°åˆ°å…¶ä»–ç‰ˆæœ¬ openwrt

æ³¨æ„äº‹é¡¹

- åˆ·å®˜æ–¹è¿‡æ¸¡å›ºä»¶å†åˆ· openwrt ä¸éœ€è¦ä¿®æ”¹ uboot
- hanwckf çš„ uboot æ²¡æœ‰æ”¯æŒï¼Œopenwrt firmware selector ä¹Ÿåªæœ‰ä¸€ä¸ªå¸ƒå±€çš„é•œåƒï¼ˆåº”è¯¥æ˜¯å°é•œåƒ 64MBï¼‰

openwrt è¿˜æä¾›äº†ä¸€ä¸ªä¸²å£åˆ·æœºçš„æ–¹æ³•ï¼š[[OpenWrt Wiki] Cudy TR3000 (AX3000 Travel Router)](https://openwrt.org/toh/cudy/tr3000)
åŸç†æ˜¯ reset è¿›å…¥æ¢å¤ï¼Œæ¢å¤å¤±è´¥åä¼šè¿›å…¥ uboot shellï¼Œäºæ˜¯å¯ä»¥ä½¿ç”¨ tftp æ¢å¤ initramfs-kernel.bin

#### ä» openwrt æ¢å¤ä¸ºå®˜æ–¹

å®˜æ–¹æä¾›äº†ä» openwrt åˆ·å›å®˜æ–¹å›ºä»¶æ–¹æ³•ï¼š[How to Recovery the Cudy Router From OpenWRT Firmware to Cudy Official](https://www.cudy.com/blogs/faq/how-to-recovery-the-cudy-router-from-openwrt-firmware-to-cudy-official-firmware)

- åŸºäº tftpï¼Œéœ€è¦ä¸€ä¸ª recover å›ºä»¶ã€‚å’Œè¿‡æ¸¡å›ºä»¶åœ¨ä¸€èµ·ï¼Œå®˜æ–¹è¿˜æä¾›äº† tftp è½¯ä»¶å’Œ pdf è¯´æ˜ã€‚ [Cudy Intermediary OpenWRT Firmware - Google äº‘ç«¯ç¡¬ç›˜](https://drive.google.com/drive/folders/1BKVarlwlNxf7uJUtRhuMGUqeCa5KpMnj)

#### immortalwrt

äº²æµ‹ä» immortalwrt å¯ä»¥ä¼  sysupgrade é•œåƒå‡çº§åˆ° openwrt

24.10.1 immortalwrt æœ‰ "Cudy TR3000 v1" å’Œ "Cudy TR3000 v1 (OpenWrt U-Boot layout)" ä¸¤ç§é•œåƒï¼Œè€Œ openwrt åªæœ‰é»˜è®¤ä¸€ç§ã€‚äºŒè€…ä»æ–‡ä»¶æ¥çœ‹ï¼Œimmortalwrt å‰ä¸€ç§åè€Œå’Œ openwrt ä¸€æ ·ï¼ŒåŒ…å« Kernel å’Œ sysupgrade ä¸¤ä¸ªæ–‡ä»¶ã€‚"Cudy TR3000 v1 (OpenWrt U-Boot layout)" åŒ…å« uboot çš„ fip æ–‡ä»¶ã€‚

- PRELOADER.BIN
- KERNEL
- BL31-UBOOT.FIP
- SYSUPGRADE

preloader æˆ‘å°è±¡ä¸­ä½¿ç”¨ 7981ä¸²å£ä¸‡èƒ½æ¢å¤æ—¶ä¹Ÿç”¨åˆ°äº†

#### åˆ·å¤§åˆ†åŒº

[Cudy TR3000 çš„ Ubootmod å¸ƒå±€ - é¢å‘å¼€å‘è€… - OpenWrt è®ºå› --- Ubootmod layout for Cudy TR3000 - For Developers - OpenWrt Forum](https://forum.openwrt.org/t/ubootmod-layout-for-cudy-tr3000/232058/8)

[mediatek: add ubootmod layout for cudy tr3000 v1 by 1715173329 Â· Pull Request #17712 Â· openwrt/openwrt](https://github.com/openwrt/openwrt/pull/17712)
[[openwrt-24.10] mediatek: add ubootmod layout for cudy tr3000 v1 by 1715173329 Â· Pull Request #18945 Â· openwrt/openwrt](https://github.com/openwrt/openwrt/pull/18945)

å·²ç»åˆ·äº†å°åˆ†åŒº 64MB å®˜æ–¹ openwrt é•œåƒäº†ã€‚ç¡®å®æ˜¯å¯ä»¥æ›´æ¢æ”¹ç‰ˆ uboot çš„ã€‚

1. Login into the device and backup everything, especially 'Factory' part.
2. Unlock mtd partitions:  
    apk update && apk add kmod-mtd-rw  
    insmod mtd-rw i_want_a_brick=1
3. Write new BL2 and FIP  
    mtd write openwrt-mediatek-filogic-cudy_tr3000-v1-ubootmod-preloader.bin BL2  
    mtd write openwrt-mediatek-filogic-cudy_tr3000-v1-ubootmod-bl31-uboot.fip FIP
4. Set static IP on your PC:  
    IP 192.168.1.254/24, GW 192.168.1.1
5. Serve OpenWrt initramfs image using TFTP server.
6. Cut off the power and re-engage, wait for TFTP recovery to complete.
7. After OpenWrt has booted, perform sysupgrade.

```
root@tr3000 âœ  ~ df -h
Filesystem                Size      Used Available Use% Mounted on
/dev/root                21.5M     21.5M         0 100% /rom
tmpfs                   242.9M      1.2M    241.7M   1% /tmp
/dev/ubi0_2              29.0M     24.2M      3.3M  88% /overlay
overlayfs:/overlay       29.0M     24.2M      3.3M  88% /
tmpfs                   512.0K         0    512.0K   0% /dev
```

ç›®å‰ (20250824) åªæœ‰ snapshot ç‰ˆæœ¬ç¼–è¯‘äº† ubootmodï¼ˆæ˜¾ç¤ºä¸º openwrt U-Boot layoutï¼‰ï¼Œä¸çŸ¥é“

- 256mb çš„æ˜¯æœ‰çš„ tr3000 æ˜¯ 256MB é—ªå­˜ï¼Ÿ
![image.png](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20250824230037.png)

æ­¥éª¤

- stock
- å‡çº§ cudy æä¾›çš„ä¸­é—´å›ºä»¶ï¼ˆintermediateï¼‰ï¼ˆæœ¬è´¨æ˜¯ openwrt initramfsï¼Ÿï¼‰
- å‡çº§ sysupgrade å›ºä»¶
- ï¼ˆä»¥ä¸Šä¸ºåŸæœ¬åˆ· openwrt æ­¥éª¤ï¼Œæœ‰äº† ssh åå°±å¯ä»¥åˆ· uboot-modï¼‰
- ssh å®‰è£… kmod-mtd-rw
- åˆ· BL2 å’Œ FIP
- æ–­ç”µ resetå¼€æœºï¼Œ tftp åˆ· initramfs recovery å›ºä»¶
  - firmware selector è‡ªå®šä¹‰çš„å›ºä»¶ï¼Œæ²¡æœ‰æä¾›ã€‚å¯ä»¥ç›´æ¥ä½¿ç”¨å®˜æ–¹çš„
- åˆ· sysupgrade

ç»éªŒ

- æˆ‘ç”¨ openwrt çš„ç³»ç»Ÿï¼Œç›´æ¥åˆ·äº† immortalwrt çš„ BL2 å’Œ FIPï¼Œæœ€åæ¢å¤åˆ° immortalwrt æ˜¯å¯ä»¥çš„
- æˆ‘ç”¨immortalwrt ç½‘ç«™è‡ªå®šä¹‰äº†å›ºä»¶ï¼Œç”Ÿæˆäº† uboot å’Œ sysupgrade.itbï¼Œä½†æ˜¯æ²¡æœ‰ initramfs-recovery.itbã€‚ç”¨å®˜æ–¹çš„ initramfs ä¹Ÿå¯ä»¥
- cudy tr3000 æ–­ç”µ resetï¼Œç›´æ¥å°±æ˜¯ç™½ç¯å¸¸äº®ï¼Œå¯ä»¥ ping é€š
- tftp æ¢å¤æ—¶ï¼Œå¿…é¡»çœ‹æ¸…æ¥šéœ€è¦è®¾ç½®å“ªä¸ªé™æ€ ipï¼Œå¦åˆ™å¯èƒ½ä¸€ç‚¹ååº”éƒ½æ²¡æœ‰ã€‚æ¯”å¦‚cudy çš„æ¢å¤æ•™ç¨‹ä¸­è®©è®¾ç½® 192.168.1.88ï¼Œä½†æ˜¯ uboot layout è¿™ä¸ª pr å†™çš„æ˜¯ 192.168.1.254
- tftp æ¢å¤æ—¶éœ€è¦çš„æ–‡ä»¶åï¼Œå¯ä»¥åœ¨è½¯ä»¶ä¸­çœ‹åˆ°ã€‚æœ¬æ¬¡æ“ä½œéœ€è¦çš„æ–‡ä»¶åå°±æ˜¯ä¸å¸¦ç‰ˆæœ¬å·çš„ï¼Œå’Œä¸‹è½½çš„æ–‡ä»¶åä¸ä¸€æ ·ã€‚

æ•ˆæœ

```
root@tr3000 âœ  ~ df -h
Filesystem                Size      Used Available Use% Mounted on
/dev/root                32.5M     32.5M         0 100% /rom
tmpfs                   239.7M    300.0K    239.4M   0% /tmp
/dev/ubi0_5              49.7M     18.0M     29.1M  38% /overlay
overlayfs:/overlay       49.7M     18.0M     29.1M  38% /
tmpfs                   512.0K         0    512.0K   0% /dev
```

çœ‹ä¸Šå»å¥½åƒè¿˜æ˜¯å’Œ 122 MB æœ‰ç‚¹è¿œã€‚

æŸ¥çœ‹ openwrt dts

```
scp tr3000:/sys/firmware/fdt tr3000.dtb

apt install device-tree-compiler
dtc -I dtb -O dts tr3000.dtb -o tr3000.dts
```

reg è¡¨ç¤ºèµ·å§‹ä½ç½®æ˜¯ 0x5c0000ï¼Œå¤§å°æ˜¯ 0x7a40000ï¼ˆ122.25MBï¼‰

```
partition@5c0000 {
    label = "ubi";
    compatible = "linux,ubi";
    reg = <0x5c0000 0x7a40000>;
    phandle = <0x3b>;

    volumes {
    ubi-volume-fit {
         volname = "fit";
         phandle = <0x2a>;
    };
    };
};
```

ubinfo -a å¯ä»¥çœ‹åˆ°æ‰€æœ‰å·ï¼ˆvolumï¼‰ä½¿ç”¨

| å· ID | å·åç§° (Name)  | å¤§å° (Size)  | ç”¨é€”è¯´æ˜                             |
| ---- | ----------- | ---------- | -------------------------------- |
| 0    | kernel      | 3.9 MiB    | å­˜æ”¾ Linux å†…æ ¸ã€‚                     |
| 1    | fit         | 39.9 MiB   | å­˜æ”¾åªè¯»çš„æ ¹æ–‡ä»¶ç³»ç»Ÿ (/rom å°±æ˜¯ä»è¿™é‡Œæ¥çš„)ã€‚       |
| 2    | recovery    | 13.3 MiB   | æ¢å¤ç³»ç»Ÿï¼Œä¸€ä¸ªâ€œéšå½¢â€çš„å¤‡ä»½ç³»ç»Ÿã€‚                |
| 3    | ubootenv    | 1.0 MiB    | U-Boot å¼•å¯¼ç¨‹åºçš„ç¯å¢ƒå˜é‡ã€‚                |
| 4    | ubootenv2   | 1.0 MiB    | U-Boot ç¯å¢ƒå˜é‡çš„å¤‡ä»½ã€‚                  |
| 5    | rootfs_data | 55.8 MiB   | å¯å†™çš„ overlay åˆ†åŒº (/overlay å°±æ˜¯å®ƒ)ã€‚   |
| -    | UBI ä¿ç•™å—     | ~2.4 MiB   | 20 ä¸ªä¿ç•™å— * 124 KiB/å—ï¼Œç”¨äºåå—ç®¡ç†å’Œç£¨æŸå‡è¡¡ã€‚ |
| æ€»è®¡   |             | ~117.3 MiB |                                  |

### FT

[OpenWRT è·¯ç”±å™¨å¿«é€Ÿæ¼«æ¸¸ï¼ˆ802.11rï¼‰é…ç½®æ•™ç¨‹ä»¥åŠæ·±åº¦è§£æ_è·¯ç”±å™¨_ä»€ä¹ˆå€¼å¾—ä¹° (smzdm.com)](https://post.smzdm.com/p/a6lr03wg/)

```
Thu Aug 17 11:31:19 2023 kern.warn kernel: [164938.908390] 7981@C13L2,MacTableInsertEntry() 1537: New Sta:2a:85:8f:ff:be:e3
Thu Aug 17 11:31:19 2023 kern.err kernel: [164938.915643] 7981@C14L1,FT_AuthReqHandler() 536: The MDIE is invalid(Peer MDID= 17 17, My MDID = 82 84
Thu Aug 17 11:31:22 2023 kern.notice kernel: [164942.301972] 7981@C08L3,ap_peer_auth_req_at_idle_action() 717: AUTH - MBSS(1), Rcv AUTH seq#1, Alg=2, Status=0 from [wcid=1]2a:85:8f:ff:be:e3
Thu Aug 17 11:31:22 2023 kern.err kernel: [164942.314678] 7981@C14L1,FT_AuthReqHandler() 536: The MDIE is invalid(Peer MDID= 17 17, My MDID = 82 84
Thu Aug 17 11:31:26 2023 kern.notice kernel: [164945.762095] 7981@C08L3,ap_peer_auth_req_at_idle_action() 717: AUTH - MBSS(1), Rcv AUTH seq#1, Alg=2, Status=0 from [wcid=1]2a:85:8f:ff:be:e3
Thu Aug 17 11:31:26 2023 kern.err kernel: [164945.774793] 7981@C14L1,FT_AuthReqHandler() 536: The MDIE is invalid(Peer MDID= 17 17, My MDID = 82 84
Thu Aug 17 11:31:32 2023 kern.warn kernel: [164952.375145] 7981@C01L2,wifi_sys_disconn_act() 1002:  wdev_idx=1
Thu Aug 17 11:31:32 2023 kern.warn kernel: [164952.381500] 7981@C13L2,MacTableDeleteEntry() 1793: Del Sta:2a:85:8f:ff:be:e3
```

å®¢å… r3g

```
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 MLME: MLME-AUTHENTICATE.indication(2a:85:8f:ff:be:e3, OPEN_SYSTEM)
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 MLME: MLME-DELETEKEYS.request(2a:85:8f:ff:be:e3)
Thu Aug 17 11:30:05 2023 daemon.info hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: authenticated
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: association OK (aid 1)
Thu Aug 17 11:30:05 2023 daemon.info hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: associated (aid 1)
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 MLME: MLME-ASSOCIATE.indication(2a:85:8f:ff:be:e3)
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 MLME: MLME-DELETEKEYS.request(2a:85:8f:ff:be:e3)
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: binding station to interface 'wlan1'
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 WPA: event 1 notification
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 WPA: start authentication
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.1X: unauthorizing port
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 WPA: sending 1/4 msg of 4-Way Handshake
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 WPA: received EAPOL-Key frame (2/4 Pairwise)
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 WPA: sending 3/4 msg of 4-Way Handshake
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 WPA: received EAPOL-Key frame (4/4 Pairwise)
Thu Aug 17 11:30:05 2023 daemon.notice hostapd: wlan1: AP-STA-CONNECTED 2a:85:8f:ff:be:e3
Thu Aug 17 11:30:05 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.1X: authorizing port
Thu Aug 17 11:30:05 2023 daemon.info hostapd: wlan1: STA 2a:85:8f:ff:be:e3 RADIUS: starting accounting session CDB345D82723F2E1
Thu Aug 17 11:30:05 2023 daemon.info hostapd: wlan1: STA 2a:85:8f:ff:be:e3 WPA: pairwise key handshake completed (RSN)
Thu Aug 17 11:30:05 2023 daemon.notice hostapd: wlan1: EAPOL-4WAY-HS-COMPLETED 2a:85:8f:ff:be:e3

Thu Aug 17 11:36:38 2023 daemon.notice hostapd: wlan1: AP-STA-DISCONNECTED 2a:85:8f:ff:be:e3
Thu Aug 17 11:36:38 2023 daemon.info hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: disassociated due to inactivity
Thu Aug 17 11:36:38 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 MLME: MLME-DISASSOCIATE.indication(2a:85:8f:ff:be:e3, 4)
Thu Aug 17 11:36:38 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 MLME: MLME-DELETEKEYS.request(2a:85:8f:ff:be:e3)
Thu Aug 17 11:36:39 2023 daemon.info hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: deauthenticated due to inactivity (timer DEAUTH/REMOVE)
Thu Aug 17 11:36:39 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 MLME: MLME-DEAUTHENTICATE.indication(2a:85:8f:ff:be:e3, 2)
Thu Aug 17 11:36:39 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 MLME: MLME-DELETEKEYS.request(2a:85:8f:ff:be:e3)
```

op3(ax6s)

```
Thu Aug 17 11:30:57 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: binding station to interface 'wlan1'
Thu Aug 17 11:30:57 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: authentication OK (FT)
Thu Aug 17 11:30:57 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 MLME: MLME-AUTHENTICATE.indication(2a:85:8f:ff:be:e3, FT)
Thu Aug 17 11:30:57 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: association OK (aid 1)
Thu Aug 17 11:30:57 2023 daemon.info hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: associated (aid 1)
Thu Aug 17 11:30:57 2023 daemon.notice hostapd: wlan1: AP-STA-CONNECTED 2a:85:8f:ff:be:e3
Thu Aug 17 11:30:57 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 MLME: MLME-REASSOCIATE.indication(2a:85:8f:ff:be:e3)
Thu Aug 17 11:30:57 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 IEEE 802.11: binding station to interface 'wlan1'
Thu Aug 17 11:30:57 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 WPA: event 6 notification
Thu Aug 17 11:30:57 2023 daemon.debug hostapd: wlan1: STA 2a:85:8f:ff:be:e3 WPA: FT authentication already completed - do not start 4-way handshake
```

#### å…¶å®ƒ

åŸå‚ç³»ç»Ÿ
![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230815141433.png)
æ”¯æŒçš„åŠŸèƒ½
![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230815141449.png)

ä»å’¸é±¼ä¸Šä¹°çš„ï¼Œè·¯ç”±å™¨ç³»ç»Ÿé‡Œå¯ä»¥çœ‹åˆ° 1 æœˆä»½çš„æ—¥å¿—ã€‚
![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230815141342.png)

uboot æ§åˆ¶å°
![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230815141529.png)

![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230815141559.png)

webui åˆ·æœºæ—¶ä¸²å£è¾“å‡º
![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230815141615.png)

## ç¡¬ä»¶æ€§èƒ½æµ‹è¯• (wg å¸¦å®½)

### king3399

æœªåŠ å¯†

```
root@op1 âœ  ~ iperf3 -c 114.214.236.90

[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.00  sec  1.10 GBytes   943 Mbits/sec   70             sender
[  5]   0.00-10.05  sec  1.09 GBytes   936 Mbits/sec                  receiver

root@op1 âœ  ~ iperf3 -c king6.yfycloud.top
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.00  sec  1.08 GBytes   924 Mbits/sec   29             sender
[  5]   0.00-10.04  sec  1.07 GBytes   918 Mbits/sec                  receiver
```

wg

```
âœ  ~ iperf3 -c king
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.00  sec  1.04 GBytes   893 Mbits/sec  70559             sender
[  5]   0.00-10.04  sec  1.04 GBytes   887 Mbits/sec                  receiver

âœ  ~ iperf3 -c king -R
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.04  sec   691 MBytes   577 Mbits/sec    2             sender
[  5]   0.00-10.00  sec   688 MBytes   577 Mbits/sec                  receiver
```

### p2w

æœªåŠ å¯†ï¼Œå±…ç„¶è·‘ä¸æ»¡åƒå…†ï¼ˆè¿æ¥ä¸­é—´é€šè¿‡äº†ä¸€ä¸ª usb åƒå…†ç½‘å¡ï¼‰

```
âœ  ~ iperf3 -c p2w
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.00  sec   754 MBytes   633 Mbits/sec  344             sender
[  5]   0.00-10.00  sec   752 MBytes   630 Mbits/sec                  receiver

âœ  ~ iperf3 -c p2w -R
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.01  sec   902 MBytes   757 Mbits/sec  738             sender
[  5]   0.00-10.00  sec   902 MBytes   757 Mbits/sec                  receiver
```

### ax6s

æœªåŠ å¯†ï¼ˆä¸­é—´æ˜¯ä¸€ä¸ª usb åƒå…†ç½‘å¡ï¼‰

```
(base) yfy@Tianyi âœ  ~ iperf3 -c 192.168.36.2
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.00  sec  1.10 GBytes   942 Mbits/sec    0             sender
[  5]   0.00-10.01  sec  1.09 GBytes   939 Mbits/sec                  receiver

(base) yfy@Tianyi âœ  ~ iperf3 -c 192.168.36.2 -R
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.00  sec  1.09 GBytes   940 Mbits/sec    0             sender
[  5]   0.00-10.00  sec  1.09 GBytes   939 Mbits/sec                  receiver
```

wg
å¤ç”¨ä¹‹å‰çš„ home åˆ°å­¦æ ¡æ•°æ®
baselineï¼šipv6 ç›´è¿

```
homeä¸‹è½½
[SUM]   0.00-10.00  sec   798 MBytes   669 Mbits/sec  468             sender
[SUM]   0.00-10.05  sec   786 MBytes   656 Mbits/sec                  receiver

homeä¸Šä¼ 
[SUM]   0.00-10.06  sec   925 MBytes   771 Mbits/sec  1185             sender
[SUM]   0.00-10.00  sec   918 MBytes   770 Mbits/sec                  receiver
```

```
âœ  ~ iperf3 -c op3
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.00  sec   163 MBytes   137 Mbits/sec    0             sender
[  5]   0.00-10.05  sec   161 MBytes   134 Mbits/sec                  receiver

âœ  ~ iperf3 -c op3 -P 5
[SUM]   0.00-10.00  sec   537 MBytes   450 Mbits/sec  302             sender
[SUM]   0.00-10.06  sec   525 MBytes   438 Mbits/sec                  receiver

âœ  ~ iperf3 -c op3 -R
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.05  sec   235 MBytes   196 Mbits/sec  170             sender
[  5]   0.00-10.00  sec   234 MBytes   196 Mbits/sec                  receiver

âœ  ~ iperf3 -c op3 -R -P 5
[SUM]   0.00-10.05  sec   504 MBytes   421 Mbits/sec    0             sender
[SUM]   0.00-10.00  sec   497 MBytes   417 Mbits/sec                  receiver
```

ææ€–çš„ CPU å ç”¨
![](https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230810160001.png)
