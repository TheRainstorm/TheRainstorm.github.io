
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="记录一些关于数学、计算机的知识，以及一些日常。">
      
      
      
        <link rel="canonical" href="https://yfy.cqu.ai/%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/2023/07/23/2023-07-23-%E6%8D%A1%E5%9E%83%E5%9C%BE-rk3399%20DIY%20KVM/">
      
      
        <link rel="prev" href="../../../../../%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/2023/04/20/2023-04-20-%E5%85%B7%E4%BD%93%E6%95%B0%E5%AD%A6/">
      
      
        <link rel="next" href="../../24/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E8%BF%90%E8%A1%8Cswitch%E6%A8%A1%E6%8B%9F%E5%99%A8/">
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>捡垃圾-rk3399 DIY KVM - Rain 的随笔</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#开发板" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../../../.." title="Rain 的随笔" class="md-header__button md-logo" aria-label="Rain 的随笔" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Rain 的随笔
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              捡垃圾-rk3399 DIY KVM
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="../../../../.." class="md-tabs__link">
        
  
  
    
  
  博客

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../about/" class="md-tabs__link">
        
  
  
    
  
  关于

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../tags/" class="md-tabs__link">
        
  
  
    
  
  标签

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../series/" class="md-tabs__link">
        
  
  
    
  
  系列

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../tools/" class="md-tabs__link">
        
  
  
    
  
  工具

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../archive/2024/" class="md-tabs__link">
          
  
  
  归档

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../category/%E4%B8%AA%E4%BA%BA/" class="md-tabs__link">
          
  
  
  分类

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="Rain 的随笔" class="md-nav__button md-logo" aria-label="Rain 的随笔" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Rain 的随笔
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      <a href="../../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    博客
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../about/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关于
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    标签
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../series/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    系列
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    工具
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    归档
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            归档
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../archive/2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../archive/2023/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2023
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../archive/2022/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2022
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../archive/2021/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2021
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../archive/2020/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2020
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../archive/2019/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2019
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    分类
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            分类
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E4%B8%AA%E4%BA%BA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    个人
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E5%8D%9A%E5%AE%A2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    博客
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E5%8D%9A%E5%AE%A2--%E7%BD%91%E7%BB%9C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    博客 &amp; 网络
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    学习笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    折腾记录
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    课程笔记
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    软件工具
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../../category/%E9%98%85%E8%AF%BB/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    阅读
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
  <div class="md-content md-content--post" data-md-component="content">
    <div class="md-sidebar md-sidebar--post" data-md-component="sidebar" data-md-type="navigation">
      <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner md-post">
          <nav class="md-nav md-nav--primary">
            <div class="md-post__back">
              <div class="md-nav__title md-nav__container">
                <a href="../../../../.." class="md-nav__link">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
                  <span class="md-ellipsis">
                    回到主页
                  </span>
                </a>
              </div>
            </div>
            
            <ul class="md-post__meta md-nav__list">
              <li class="md-nav__item md-nav__item--section">
                <div class="md-post__title">
                  <span class="md-ellipsis">
                    元数据
                  </span>
                </div>
                <nav class="md-nav">
                  <ul class="md-nav__list">
                    <li class="md-nav__item">
                      <div class="md-nav__link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5z"/></svg>
                        <time datetime="2023-07-23 10:49:00+00:00" class="md-ellipsis">2023年7月23日</time>
                      </div>
                    </li>
                    
                    
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 3v15h3V3zm3 2 4 13 3-1-4-13zM5 5v13h3V5zM3 19v2h18v-2z"/></svg>
                          <span class="md-ellipsis">
                            分类于
                            
                              <a href="../../../../../category/%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/">折腾记录</a></span>
                        </div>
                      </li>
                    
                    
                      
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7z"/></svg>
                          <span class="md-ellipsis">
                            
                              需要 29 分钟阅读时间
                            
                          </span>
                        </div>
                      </li>
                    
                  </ul>
                </nav>
              </li>
            </ul>
            
          </nav>
          
            

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#开发板" class="md-nav__link">
    <span class="md-ellipsis">
      开发板
    </span>
  </a>
  
    <nav class="md-nav" aria-label="开发板">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rk3399-硬件资源" class="md-nav__link">
    <span class="md-ellipsis">
      rk3399 硬件资源
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#已知的开发板及资料" class="md-nav__link">
    <span class="md-ellipsis">
      已知的开发板及资料
    </span>
  </a>
  
    <nav class="md-nav" aria-label="已知的开发板及资料">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#firefly" class="md-nav__link">
    <span class="md-ellipsis">
      Firefly
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#king3399" class="md-nav__link">
    <span class="md-ellipsis">
      king3399
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tn3399_v3" class="md-nav__link">
    <span class="md-ellipsis">
      tn3399_v3
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#其它" class="md-nav__link">
    <span class="md-ellipsis">
      其它
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#方案讨论" class="md-nav__link">
    <span class="md-ellipsis">
      方案讨论
    </span>
  </a>
  
    <nav class="md-nav" aria-label="方案讨论">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#基本方案" class="md-nav__link">
    <span class="md-ellipsis">
      基本方案
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arm-kvm" class="md-nav__link">
    <span class="md-ellipsis">
      ARM-KVM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#基于-armbian-的-pi-kvm" class="md-nav__link">
    <span class="md-ellipsis">
      基于 Armbian 的 PI-KVM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pi-kvm-x86" class="md-nav__link">
    <span class="md-ellipsis">
      Pi-KVM x86
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#king3399-刷机" class="md-nav__link">
    <span class="md-ellipsis">
      king3399 刷机
    </span>
  </a>
  
    <nav class="md-nav" aria-label="king3399 刷机">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#教程链接" class="md-nav__link">
    <span class="md-ellipsis">
      教程链接
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#刷原厂镜像-vs-第三方" class="md-nav__link">
    <span class="md-ellipsis">
      刷原厂镜像 vs 第三方
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#刷机方法" class="md-nav__link">
    <span class="md-ellipsis">
      刷机方法
    </span>
  </a>
  
    <nav class="md-nav" aria-label="刷机方法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#基本知识" class="md-nav__link">
    <span class="md-ellipsis">
      基本知识
    </span>
  </a>
  
    <nav class="md-nav" aria-label="基本知识">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#镜像文件" class="md-nav__link">
    <span class="md-ellipsis">
      镜像文件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boot-rom" class="md-nav__link">
    <span class="md-ellipsis">
      boot ROM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#刷入介质" class="md-nav__link">
    <span class="md-ellipsis">
      刷入介质
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rkdevtool-使用" class="md-nav__link">
    <span class="md-ellipsis">
      RKDevTool 使用
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rk3399-启动过程探明" class="md-nav__link">
    <span class="md-ellipsis">
      RK3399 启动过程探明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RK3399 启动过程探明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bootflow" class="md-nav__link">
    <span class="md-ellipsis">
      bootflow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#armbian" class="md-nav__link">
    <span class="md-ellipsis">
      Armbian
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Armbian">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#介绍" class="md-nav__link">
    <span class="md-ellipsis">
      介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#amlogic-s9xxx-armbian-项目" class="md-nav__link">
    <span class="md-ellipsis">
      amlogic-s9xxx-armbian 项目
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#使用" class="md-nav__link">
    <span class="md-ellipsis">
      使用
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#armbian-pi-kvm" class="md-nav__link">
    <span class="md-ellipsis">
      Armbian PI-KVM
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Armbian PI-KVM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#其它_1" class="md-nav__link">
    <span class="md-ellipsis">
      其它
    </span>
  </a>
  
    <nav class="md-nav" aria-label="其它">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ustreamer" class="md-nav__link">
    <span class="md-ellipsis">
      ustreamer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usb20-30-驱动区别" class="md-nav__link">
    <span class="md-ellipsis">
      USB2.0 3.0 驱动区别
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-查看-usb-视频设备" class="md-nav__link">
    <span class="md-ellipsis">
      linux 查看 usb 视频设备
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kvm-没有画面" class="md-nav__link">
    <span class="md-ellipsis">
      KVM 没有画面
    </span>
  </a>
  
    <nav class="md-nav" aria-label="KVM 没有画面">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ms2109" class="md-nav__link">
    <span class="md-ellipsis">
      ms2109
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ms2130" class="md-nav__link">
    <span class="md-ellipsis">
      ms2130
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#使用-ustream-测试是否能够使用" class="md-nav__link">
    <span class="md-ellipsis">
      使用 ustream 测试是否能够使用
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#键盘问题" class="md-nav__link">
    <span class="md-ellipsis">
      键盘问题
    </span>
  </a>
  
    <nav class="md-nav" aria-label="键盘问题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#报错情况" class="md-nav__link">
    <span class="md-ellipsis">
      报错情况
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#正常的情况" class="md-nav__link">
    <span class="md-ellipsis">
      正常的情况
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#给-web-添加证书" class="md-nav__link">
    <span class="md-ellipsis">
      给 Web 添加证书
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#遇到的问题" class="md-nav__link">
    <span class="md-ellipsis">
      遇到的问题
    </span>
  </a>
  
    <nav class="md-nav" aria-label="遇到的问题">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wg-quick-无法自启动" class="md-nav__link">
    <span class="md-ellipsis">
      wg-quick 无法自启动
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pi-kvm-文档" class="md-nav__link">
    <span class="md-ellipsis">
      PI-KVM 文档
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PI-KVM 文档">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mouse-类型-absolute-vs-relative" class="md-nav__link">
    <span class="md-ellipsis">
      mouse 类型 (absolute vs relative)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#faq" class="md-nav__link">
    <span class="md-ellipsis">
      FAQ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#开机-diy-方案" class="md-nav__link">
    <span class="md-ellipsis">
      开机 DIY 方案
    </span>
  </a>
  
    <nav class="md-nav" aria-label="开机 DIY 方案">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#atx-pwr-引脚" class="md-nav__link">
    <span class="md-ellipsis">
      ATX PWR 引脚
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pi-kvm-的方案" class="md-nav__link">
    <span class="md-ellipsis">
      Pi KVM 的方案
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pi KVM 的方案">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#连线" class="md-nav__link">
    <span class="md-ellipsis">
      连线
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpio-控制" class="md-nav__link">
    <span class="md-ellipsis">
      GPIO 控制
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nanokvm" class="md-nav__link">
    <span class="md-ellipsis">
      nanoKVM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sbc-diy-方案" class="md-nav__link">
    <span class="md-ellipsis">
      SBC DIY 方案
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SBC DIY 方案">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tg-对话记录" class="md-nav__link">
    <span class="md-ellipsis">
      Tg 对话记录
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#king3399-gpio-控制" class="md-nav__link">
    <span class="md-ellipsis">
      King3399 GPIO 控制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="King3399 GPIO 控制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#资料手册" class="md-nav__link">
    <span class="md-ellipsis">
      资料手册
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#两种控制-gpio-的方式" class="md-nav__link">
    <span class="md-ellipsis">
      两种控制 gpio 的方式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="两种控制 gpio 的方式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#重新编译镜像方式" class="md-nav__link">
    <span class="md-ellipsis">
      重新编译镜像方式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#控制任意-gpio" class="md-nav__link">
    <span class="md-ellipsis">
      控制任意 GPIO
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#查看-gpio-方式chatgpt" class="md-nav__link">
    <span class="md-ellipsis">
      查看 GPIO 方式（ChatGPT）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#实践" class="md-nav__link">
    <span class="md-ellipsis">
      实践
    </span>
  </a>
  
    <nav class="md-nav" aria-label="实践">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dts" class="md-nav__link">
    <span class="md-ellipsis">
      dts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sim-卡上网" class="md-nav__link">
    <span class="md-ellipsis">
      SIM 卡上网
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
          
        </div>
      </div>
    </div>
    <article class="md-content__inner md-typeset">
      
        
  


  <nav class="md-tags" >
    
      
      
      
        <a href="../../../../../tags/#tag:kvm" class="md-tag">KVM</a>
      
    
      
      
      
        <a href="../../../../../tags/#tag:armbian" class="md-tag">armbian</a>
      
    
      
      
      
        <a href="../../../../../tags/#tag:rk3399" class="md-tag">rk3399</a>
      
    
      
      
      
        <a href="../../../../../tags/#tag:设备" class="md-tag">设备</a>
      
    
  </nav>



  <h1>捡垃圾-rk3399 DIY KVM</h1>

<p>由于我的台式机承载了 NAS，做种，Jellyfin，博客，文件同步等功能，已然成为一台服务器，因此其可靠性非常重要。但是我还是经历过几次由于网络故障导致其无法访问的情形，此时则只能去实验室维护比较麻烦，因此需要一个 IPMI 的管理功能，使得网络出故障情况下也能远程访问。</p>
<p>而家用 PC 主板很少有支持 IPMI 功能的，支持的板子一般都要 2000 元以上。因此需要一个成本低廉的方案，在网上搜索一阵后发现确实有基于树莓派 DIY 的方案，并且有一个比较大的开源项目 PI-KVM。</p>
<p>然而由于树莓派 400-500 昂贵的价格，使得 DIY 的成本仍然很高。直到我看到使用普通 arm 板子的方案。甚至可以使用 40 元的电视盒子。因此价格完全可以保证在 200 元以内，我觉的是一个可以接受的方案。</p>
<p>最后成本</p>
<ul>
<li>king3399 开发板：咸鱼 120</li>
<li>ms2130 USB 采集卡，支持 1080p 60 帧：淘宝 60</li>
</ul>
<p><img alt="KVM-bios.jpg" src="https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/KVM-bios.jpg" /></p>
<!-- more -->

<h2 id="开发板">开发板<a class="headerlink" href="#开发板" title="Permanent link">&para;</a></h2>
<p>RK3399 是 Rockchip（瑞芯微）出的一款 SoC，在此基础上，许多开发板厂商设计了自己的开发板。</p>
<h3 id="rk3399-硬件资源">rk3399 硬件资源<a class="headerlink" href="#rk3399-硬件资源" title="Permanent link">&para;</a></h3>
<p>主要特点</p>
<ul>
<li>网络：<ul>
<li>千兆以太网</li>
<li>支持 wifi+ 蓝牙</li>
</ul>
</li>
<li>内部存储<ul>
<li>BootROM(32KB)：支持从 SPI、eMMC、SD/MMC 接口启动</li>
<li>Internal SRAM(200KB)：Support security and non-security access</li>
</ul>
</li>
<li>片外存储<ul>
<li>板载 eMMC(16G)</li>
<li>支持 SD/MMC</li>
</ul>
</li>
<li>两个 OTG usb 接口</li>
<li>PCIe1.0 M.2 (Bkey)<ul>
<li>Mini PCIe 为 LTE 模块专用接口，板载 SIM 卡座，实现 IOT 应用</li>
</ul>
</li>
</ul>
<p><img alt="" src="https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/picgo/20230125170545.png" /></p>
<h3 id="已知的开发板及资料">已知的开发板及资料<a class="headerlink" href="#已知的开发板及资料" title="Permanent link">&para;</a></h3>
<h4 id="firefly">Firefly<a class="headerlink" href="#firefly" title="Permanent link">&para;</a></h4>
<p>Firefly：中山市天启智能科技有限公司于 2014 年创立的开源团队，致力于人工智能、智能硬件、嵌入式开发、系统开发、应用程序开发等研发，拥有开源系列产品、开源社区与网上商城。Firefly 开源产品包括核心板、行业主板、行业整机、集群服务器、开发套件、Station 等产品。</p>
<p>资料最全的开发板，厂家有自己的网站，提供详细教程。
<a href="https://wiki.t-firefly.com/zh_CN/Firefly-RK3399/01-bootmode.html">1. 介绍 — Firefly Wiki (t-firefly.com)</a></p>
<h4 id="king3399">king3399<a class="headerlink" href="#king3399" title="Permanent link">&para;</a></h4>
<p>容品深圳电子科技
从咸鱼购买，卖家提供了原厂的详细文档，包含：SDK（适配的 buildroot, ubuntu, debian, Android 源码，以及编译方法），编译好的镜像，硬件 datasheet 等</p>
<p><a href="http://www.rpdzkj.com/1703937-1703937_2520299.html">瑞芯微 King3399 扩展板 - 深圳荣品电子科技有限公司 (rpdzkj.com)</a>
<img alt="image.png" src="https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20240629020517.png" /></p>
<h4 id="tn3399_v3">tn3399_v3<a class="headerlink" href="#tn3399_v3" title="Permanent link">&para;</a></h4>
<p>深圳市天诺</p>
<p>github 上有人折腾出的资料，也支持刷许多系统了：<a href="https://github.com/lanseyujie/tn3399_v3/">lanseyujie/tn3399_v3: TN3399_V3 开发板折腾记录 (github.com)</a></p>
<h4 id="其它">其它<a class="headerlink" href="#其它" title="Permanent link">&para;</a></h4>
<ul>
<li>RK 平台资料收集：<a href="http://wiki.lightembedded.com/#!library/rk3399/common.md">Xianlee's Log (lightembedded.com)</a></li>
</ul>
<h2 id="方案讨论">方案讨论<a class="headerlink" href="#方案讨论" title="Permanent link">&para;</a></h2>
<h3 id="基本方案">基本方案<a class="headerlink" href="#基本方案" title="Permanent link">&para;</a></h3>
<p><a href="https://zhuanlan.zhihu.com/p/578602475">DIY 一个运维神器 Open IP-KVM - 知乎 (zhihu.com)</a>
这种方案如何呢：<br />
1.使用 CH9329+CH340 模拟鼠标键盘<br />
2.HDMI-USB 视频采集卡获取图像<br />
3.ARM 开发板安装 Linux 系统<br />
4.GPIO 扩展板控制目标电脑的开关机引脚实现开关机<br />
5.采用远程光驱镜像共享技术。客户端选择安装的光盘镜像，通过 IP-KVM 网络发送到开发板。开发板接收到后，通过 iSCSI 等网络协议，将该光盘镜像挂载为目标电脑的一块虚拟光盘。目标电脑可以对该虚拟光盘进行引导和安装操作</p>
<h3 id="arm-kvm">ARM-KVM<a class="headerlink" href="#arm-kvm" title="Permanent link">&para;</a></h3>
<p><a href="https://www.v2ex.com/t/932953">b 站看到 IPKVM 的一个方案，请教下怎么实现 - V2EX</a></p>
<ul>
<li><a href="https://www.bilibili.com/video/BV19V4y1t7zU/?vd_source=b01257db06b1514b2fb50663dd339833">「教程」廉价的运维神器 ArmKVM 安装与使用_哔哩哔哩_bilibili</a></li>
<li><a href="https://armkvm.moeneko.xyz/docs/#/">ArmKVM 官方文档 (moeneko.xyz)</a></li>
<li>B 站作者已经把它商业量产了，但是售价 330 起<ul>
<li>CPU 是全志 H610，感觉什么都缩水了，除了板子是新的外，相比于自己买二手开发板 DIY 没有性价比。</li>
<li>而且系统也不知道是什么，感觉可玩性比较差</li>
</ul>
</li>
</ul>
<h3 id="基于-armbian-的-pi-kvm">基于 Armbian 的 PI-KVM<a class="headerlink" href="#基于-armbian-的-pi-kvm" title="Permanent link">&para;</a></h3>
<ul>
<li>将 PI-KVM 移植到了 Armbian 系统上</li>
<li><a href="https://www.bilibili.com/video/BV1pM4y1x7ce/?spm_id_from=333.1007.top_right_bar_window_history.content.click&amp;vd_source=b01257db06b1514b2fb50663dd339833">打造普通 PC 拥有服务器 IPMI 硬件级别的远程运维方案 PI KVM 硬件级远程控制_哔哩哔哩_bilibili</a><ul>
<li>教程 <a href="https://github.com/toss-a/pikvm-armbian/blob/master/README-zh-CN.MD">https://github.com/toss-a/pikvm-armbian/blob/master/README-zh-CN.MD</a></li>
</ul>
</li>
<li>作者的仓库：<a href="https://github.com/srepac/kvmd-armbian">srepac/kvmd-armbian: KVMD For Armbian Install Script (github.com)</a></li>
</ul>
<p>只需要开发板可以刷 Armbian 的镜像，硬件有支持 OTG 的 USB 接口即可。非常适合自己 DIY 的方案</p>
<h3 id="pi-kvm-x86">Pi-KVM x86<a class="headerlink" href="#pi-kvm-x86" title="Permanent link">&para;</a></h3>
<p>有一些 40 元的 x86 板子。如果可以改造成 KVM 那么性价比会很高。</p>
<p>x86 板子的特点</p>
<ul>
<li>可以 pcie 取电</li>
<li>没有 OTG 和 GPIO，因此需要连接额外的 MCU 板子。比如后面提到的 Arduino Lenard，只需要26元。<ul>
<li>x86 可以通过串口发送命令给 MCU 板子，MCU 板子执行操作。</li>
</ul>
</li>
</ul>
<p>参考</p>
<ul>
<li><a href="https://github.com/purplepalmdash/pikvmx86">GitHub - purplepalmdash/pikvmx86: Run Pi-KVM on x86</a></li>
<li><a href="https://blog.cyyself.name/pikvm-m1-mac-mini/">基于 PiKVM 制作 M1 Mac Mini KVM – 属于 CYY 自己的世界 (cyyself.name)</a></li>
</ul>
<ul>
<li>HDMI-USB Dongle/35 RMB/USD 4.61</li>
<li>Arduino Leonard R3/26 RMB/USD 3.74<ul>
<li>扩展出 GPIO</li>
<li>扩展出 OTG，用于模拟键盘鼠标</li>
</ul>
</li>
<li>USB-TTL PL2303/3.1 RMB/USD 0.45<ul>
<li>用于 x86 连接 arduino</li>
</ul>
</li>
<li>HDMI Line/7 RMB/USD 1</li>
</ul>
<p><a href="https://docs.arduino.cc/hardware/leonardo">Leonardo | Arduino Documentation</a></p>
<p>The Arduino Leonardo is a microcontroller board based on the ATmega32u4. It has 20 digital input/output pins (of which 7 can be used as PWM outputs and 12 as analog inputs), a 16 MHz crystal oscillator, a micro USB connection, a power jack, an ICSP header, and a reset button. It contains everything needed to support the microcontroller; simply connect it to a computer with a USB cable or power it with a AC-to-DC adapter or battery to get started.</p>
<h2 id="king3399-刷机">king3399 刷机<a class="headerlink" href="#king3399-刷机" title="Permanent link">&para;</a></h2>
<h3 id="教程链接">教程链接<a class="headerlink" href="#教程链接" title="Permanent link">&para;</a></h3>
<p><a href="https://www.youtube.com/watch?v=8Z2DG-r6AzM">2022 年新鲜矿渣，荣品 king3399 Linux 刷机教程与性能测试 - YouTube</a>
<a href="https://vpset.com/9.html">King3399/荣品3399刷机教程 - 心语博客 (vpset.com)</a></p>
<h3 id="刷原厂镜像-vs-第三方">刷原厂镜像 vs 第三方<a class="headerlink" href="#刷原厂镜像-vs-第三方" title="Permanent link">&para;</a></h3>
<p>开发板厂家提供的 SDK 包中会包含原厂镜像，像 Firefly 则可以从官网下载。
刷原厂镜像：</p>
<ul>
<li>优点<ul>
<li>经过厂家测试，比较稳定</li>
<li>刷机比较容易</li>
</ul>
</li>
<li>缺点<ul>
<li>可能支持的内核版本比较低</li>
<li>镜像选择性比较少。可能厂家只适配了 debian,ubuntu 镜像。</li>
</ul>
</li>
</ul>
<ul>
<li>要支持 Armbian，openwrt 等其它操作系统需要自己移植编译，一般需要板子的 dtb，可以从原厂系统中提取。通常网上有大佬移植过了</li>
<li>king3399 厂家提供了以下系统镜像<ul>
<li>linux<ul>
<li>ubuntu(18.04)</li>
<li>debian(buster 10)</li>
</ul>
</li>
<li>android: 7, 8, 10</li>
</ul>
</li>
</ul>
<h3 id="刷机方法">刷机方法<a class="headerlink" href="#刷机方法" title="Permanent link">&para;</a></h3>
<p>Rockchip 平台刷机方法汇总：<a href="http://wiki.lightembedded.com/#!library/rkcommon/flash.md">Xianlee's Log (lightembedded.com)</a></p>
<h4 id="基本知识">基本知识<a class="headerlink" href="#基本知识" title="Permanent link">&para;</a></h4>
<h5 id="镜像文件"><strong>镜像文件</strong><a class="headerlink" href="#镜像文件" title="Permanent link">&para;</a></h5>
<ul>
<li>通常包含以下几部分<ul>
<li><strong>bootloader</strong>（如 uboot）</li>
<li>kernel（linux kernel）</li>
<li>rootfs（ubuntu, debian 等不同发行版都是该部分不同）</li>
</ul>
</li>
<li>并且各部分所处<strong>地址空间</strong>分区是 SoC 厂商分配好的。<ul>
<li>对于开发板这种设备，CPU 启动时会从片上的一小块 boot ROM 启动，作为第 0 级引导。之后再从 eMMC, SD 卡等设备加载引导程序启动。因此镜像文件包含以上全部部分，只需要将镜像完整写入外部存储。计算机启动时便会从正确位置开始引导启动</li>
<li>对于路由器刷 openwrt，CPU 通常从 flash 启动。因此刷系统时一般只会刷 flash 中 kernel + rootfs 分区。因为保留原厂 bootloader 可以保证之后可以通过原厂工具恢复原厂系统。同时 flash 中一些分区还包含网卡 MAC 地址等信息，因此不能修改。</li>
</ul>
</li>
<li>buildroot 项目可以很方便的定制 bootloader, kernel, rootfs 这三部分，生成定制化的系统镜像</li>
</ul>
<h5 id="boot-rom">boot ROM<a class="headerlink" href="#boot-rom" title="Permanent link">&para;</a></h5>
<ul>
<li>开发板这种设备有片上 boot ROM 的好处就是，不用担心变砖。</li>
</ul>
<blockquote>
<p>Firefly-RK3399 有灵活的启动方式。一般情况下，除非硬件损坏，Firefly-RK3399 开发板是不会变砖的。如果在升级过程中出现意外，bootloader 损坏，导致无法重新升级，此时仍可以进入 <code>MaskRom</code> 模式来修复。</p>
</blockquote>
<h5 id="刷入介质">刷入介质<a class="headerlink" href="#刷入介质" title="Permanent link">&para;</a></h5>
<p>要看 SoC 支持直接从哪些位置启动，一般支持 SD/tf, eMMC。从其余存储介质启动可能需要先将 bootloader 写入板载存储，然后再将剩余镜像写入其它存储</p>
<blockquote>
<p>ROCK-5B 在主板上有一个 SPI 闪存，将引导加载程序安装到 SPI 闪存可以支持 SoC maskrom 模式不直接支持的其他启动介质（如 SATA、USB3 或 NVMe）
<a href="https://github.com/ophub/amlogic-s9xxx-armbian/blob/main/build-armbian/documents/README.cn.md#8213-%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F%E8%87%B3-nvme">https://github.com/ophub/amlogic-s9xxx-armbian/blob/main/build-armbian/documents/README.cn.md#8213-%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F%E8%87%B3-nvme</a></p>
</blockquote>
<p>将镜像写入 SD 卡这种外部存储比较容易</p>
<ul>
<li><a href="https://rufus.ie/en/">Rufus - Create bootable USB drives the easy way</a></li>
<li><a href="https://etcher.balena.io/">balenaEtcher - Flash OS images to SD cards &amp; USB drives</a></li>
</ul>
<p>但是要将镜像写入板载的 eMMC 存储则需要专门的工具</p>
<ul>
<li>一般这种板载存储都有官方开发工具可以直接写。比如 Rochchip 提供了 RKDevTool，通过 USB 连接上位机和开发板，开发板启动时，boot ROM 可以接受从 USB 获得 loader 启动，之后再从 USB 获得数据，最后写入 eMMC</li>
<li>也可以买一个 USB-eMMC 的转接器（编程器？），直接写</li>
</ul>
<h4 id="rkdevtool-使用">RKDevTool 使用<a class="headerlink" href="#rkdevtool-使用" title="Permanent link">&para;</a></h4>
<p>几种启动模式</p>
<ul>
<li>Normal：Normal 模式就是正常的启动过程，各个组件依次加载，正常进入系统。</li>
<li>Loader：在 Loader 模式下，bootloader 会进入升级状态，等待主机命令，用于固件升级等。</li>
<li>MaskRom：MaskRom 模式用于 bootloader 损坏时的系统修复。<ul>
<li>一般情况下是不用进入 <code>MaskRom 模式</code>的，只有在 bootloader 校验失败（读取不了 IDB 块，或 bootloader 损坏）的情况下，BootRom 代码 就会进入此模式。此时 BootRom 代码等待主机通过 USB 接口传送 bootloader 代码，加载并运行之。当板子变砖无法正常启动或升级程序时，也可以手动进入<code>MaskRom 模式</code>.</li>
</ul>
</li>
</ul>
<p><strong>简单来说，如果 eMMC 上有好的 bootloader，则启动后按住板子上的 update 按键就会进入 loader 模式，等待从 USB 获得镜像升级</strong>
没有的话，就会进入 Maskrom 模式，可以通过工具直接写整个 eMMC。不过此时上位机要提供两个文件</p>
<ul>
<li>loader 文件，boot rom 加载后引导</li>
<li>要刷入 eMMC 的系统镜像</li>
</ul>
<p>板载 16G eMMC，写应该有 40MB/s，所以刷机速度还是很快的。</p>
<p>踩坑经历</p>
<ul>
<li>想直接从原厂镜像升级为 armbian 镜像，发现选择镜像直接就报错误。<ul>
<li>现在觉得是二者 bootloader 不一样，导致无法直接升级。</li>
</ul>
</li>
<li>然后想通过 maskrom 模式，按地址 0 写入 armbian 镜像即可，结果不行。<ul>
<li>原来是需要额外一个 loader 文件，该文件在 armbian 的 github 仓库中有</li>
<li>我的 gihtub issue<a href="https://github.com/ophub/amlogic-s9xxx-armbian/issues/1562">瑞芯微开发工具加载固件失败 · Issue #1562 · ophub/amlogic-s9xxx-armbian (github.com)</a></li>
</ul>
</li>
</ul>
<h3 id="rk3399-启动过程探明">RK3399 启动过程探明<a class="headerlink" href="#rk3399-启动过程探明" title="Permanent link">&para;</a></h3>
<p>github 上一个大佬写的<strong>启动过程详解</strong>：<a href="https://github.com/ophub/amlogic-s9xxx-armbian/discussions/1634">RK33XX/RK35XX系列设备启动流程、写入系统及编译流程 · ophub/amlogic-s9xxx-armbian · Discussion #1634 (github.com)</a></p>
<ul>
<li>Rockchip 官方文档：<a href="https://opensource.rock-chips.com/wiki_Boot_option">Boot option - Rockchip open source Document (rock-chips.com)</a></li>
</ul>
<p>ATF：<a href="https://www.cnblogs.com/arnoldlu/p/14175126.html">ARM Trusted Firmware 分析——启动、PSCI、OP-TEE 接口 - ArnoldLu - 博客园 (cnblogs.com)</a>)</p>
<ul>
<li>arm 处理器有这个功能，涉及 ARM 特权级如 ELF0（普通应用）, ELF1（kernel）,ELF2(hypervisor)</li>
<li>主要涉及到 BL1(bootrom) -&gt; BL2(pre-loader) -&gt; BL3x -&gt; uboot -&gt; kernel</li>
<li>BL1 - AP Trusted ROM，一般为 BootRom。</li>
<li>BL2 - <strong>Trusted Boot Firmware</strong>，一般为 Trusted Bootloader。</li>
<li>BL31 - EL3 Runtime Firmware，一般为 SML，管理 SMC 执行处理和中断，运行在 secure monitor 中。</li>
<li>BL32 - Secure-EL1 Payload，一般为 TEE OS Image。</li>
<li>BL33 - <strong>Non-Trusted Firmware</strong>，一般为 uboot、linux kernel。</li>
</ul>
<p><img alt="" src="https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230822222531.png" /></p>
<h4 id="bootflow">bootflow<a class="headerlink" href="#bootflow" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>+--------+----------------+----------+-------------+---------+
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>| Boot   | Terminology #1 | Actual   | Rockchip    | Image   |
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>| stage  |                | program  |  Image      | Location|
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>| number |                | name     |   Name      | (sector)|
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>+--------+----------------+----------+-------------+---------+
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>| 1      |  Primary       | ROM code | BootRom     |         |
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>|        |  Program       |          |             |         |
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>|        |  Loader        |          |             |         |
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>|        |                |          |             |         |
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>| 2      |  Secondary     | U-Boot   |idbloader.img| 0x40    | pre-loader
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>|        |  Program       | TPL/SPL  |             |         |
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>|        |  Loader (SPL)  |          |             |         |
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>|        |                |          |             |         |
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>| 3      |  -             | U-Boot   | u-boot.itb  | 0x4000  | including u-boot and atf
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>|        |                |          | uboot.img   |         | only used with miniloader
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>|        |                |          |             |         |
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>|        |                | ATF/TEE  | trust.img   | 0x6000  | only used with miniloader
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>|        |                |          |             |         |
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>| 4      |  -             | kernel   | boot.img    | 0x8000  |
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>|        |                |          |             |         |
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>| 5      |  -             | rootfs   | rootfs.img  | 0x40000 |
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>+--------+----------------+----------+-------------+---------+
</span></code></pre></div>
<p>Then when we talking about boot from eMMC/SD/U-Disk/net, they are in different concept:</p>
<ul>
<li>Stage 1 is always in boot rom, it loads stage 2 and may load stage 3(when SPL_BACK_TO_BROM option enabled).</li>
<li>Boot from SPI flash means firmware for stage 2 and 3(SPL and U-Boot only) in SPI flash and stage 4/5 in other place;</li>
<li>Boot from eMMC means all the firmware(including stage 2, 3, 4, 5) in eMMC;</li>
<li>Boot from SD card means all the firmware(including stage 2, 3, 4, 5) in SD card;</li>
<li>Boot from U-Disk means firmware for stage 4 and 5(not including SPL and U-Boot) in Disk, optionally only including stage 5;</li>
<li>Boot from net/tftp means firmeware for stage 4 and 5(not including SPL and U-Boot) on the network;</li>
</ul>
<p>Boot Flow 1 is typical Rockchip boot flow with Rockchip miniloader;<br />
Boot Flow 2 is used for most SoCs with U-Boot TPL for ddr init and SPL for trust(ATF/OP-TEE) load and run into next stage;</p>
<p><img alt="rockchip boot" src="https://opensource.rock-chips.com/images/thumb/c/cd/Rockchip_bootflow20181122.jpg/1342px-Rockchip_bootflow20181122.jpg" /></p>
<h2 id="armbian">Armbian<a class="headerlink" href="#armbian" title="Permanent link">&para;</a></h2>
<h3 id="介绍">介绍<a class="headerlink" href="#介绍" title="Permanent link">&para;</a></h3>
<p><a href="https://www.armbian.com/">Armbian</a>是兼容 debian 的专门针对各种 arm 开发板进行优化维护的发行版。由于更新比较即时，因此甚至可能比原厂镜像更加稳定。</p>
<p>和 Raspberry Pi OS, debian/arm对比：</p>
<ul>
<li><a href="https://linuxhint.com/raspberry-pi-os-vs-armbian-vs-debian-gnu-linux/">Compared: Raspberry Pi OS vs. Armbian vs. Debian GNU/Linux (linuxhint.com)</a></li>
<li><a href="https://docs.armbian.com/#what-is-the-difference-between-armbian-and-debianubuntu">Armbian doc faq: what-is-the-difference-between-armbian-and-debianubuntu</a></li>
</ul>
<h3 id="amlogic-s9xxx-armbian-项目">amlogic-s9xxx-armbian 项目<a class="headerlink" href="#amlogic-s9xxx-armbian-项目" title="Permanent link">&para;</a></h3>
<p>Armbian 官方并没有直接支持 king3399（是支持 Firefly 的）</p>
<p><a href="https://github.com/ophub/amlogic-s9xxx-armbian">ophub/amlogic-s9xxx-armbian: Support for Armbian in Amlogic, Rockchip and Allwinner boxes. Support a311d, s922x, s905x3, s905x2, s912, s905d, s905x, s905w, s905, s905l, rk3588, rk3568, rk3399, rk3328, h6, etc. (github.com)</a></p>
<ul>
<li>适配 king3399 的提交：<a href="https://github.com/ophub/amlogic-s9xxx-armbian/pull/1080">Add support for king3399 by 13584452567 · Pull Request #1080 · ophub/amlogic-s9xxx-armbian (github.com)</a></li>
</ul>
<p>armbian 官方文档关于 rk3399 的一些注释，比如显卡只在 4.4 内核上正常工作<a href="https://docs.armbian.com/Hardware_Rockchip/">Rockchip - Armbian Documentation</a></p>
<h3 id="使用">使用<a class="headerlink" href="#使用" title="Permanent link">&para;</a></h3>
<ul>
<li>官方文档很全了：<a href="https://docs.armbian.com/">Armbian Documentation</a></li>
<li>network：<a href="https://www.xmodulo.com/switch-from-networkmanager-to-systemd-networkd.html">How to switch from Network Manager to systemd-networkd on Linux (xmodulo.com)</a></li>
</ul>
<p>连接 wifi 的简单方法</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>armbian-config   # 配置整个系统，甚至可以编辑dts
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>nmtui
</span></code></pre></div>
<h2 id="armbian-pi-kvm">Armbian PI-KVM<a class="headerlink" href="#armbian-pi-kvm" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://www.bilibili.com/video/BV1pM4y1x7ce/?spm_id_from=333.1007.top_right_bar_window_history.content.click&amp;vd_source=b01257db06b1514b2fb50663dd339833">打造普通 PC 拥有服务器 IPMI 硬件级别的远程运维方案 PI KVM 硬件级远程控制_哔哩哔哩_bilibili</a><ul>
<li>教程 <a href="https://github.com/toss-a/pikvm-armbian/blob/master/README-zh-CN.MD">https://github.com/toss-a/pikvm-armbian/blob/master/README-zh-CN.MD</a></li>
</ul>
</li>
<li>作者的仓库：<a href="https://github.com/srepac/kvmd-armbian">srepac/kvmd-armbian: KVMD For Armbian Install Script (github.com)</a></li>
</ul>
<h3 id="其它_1">其它<a class="headerlink" href="#其它_1" title="Permanent link">&para;</a></h3>
<h4 id="ustreamer">ustreamer<a class="headerlink" href="#ustreamer" title="Permanent link">&para;</a></h4>
<p>发现串流画面用的是 ustreamer，ps 看到的完整命令</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>/usr/bin/ustreamer --device=/dev/kvmd-video --persistent --format=mjpeg --resolution=1280x720 --desired-fps=40 --drop-same-frames=30 --last-as-blank=0 --unix=/run/kvmd/ustreamer.sock --unix-rm --unix-mode=0660 --exit-on-parent-death --process-name-prefix=kvmd/streamer --notify-parent --no-log-colors --sink=kvmd::ustreamer::jpeg --sink-mode=0660 --slowdown
</span></code></pre></div>
<h4 id="usb20-30-驱动区别">USB2.0 3.0 驱动区别<a class="headerlink" href="#usb20-30-驱动区别" title="Permanent link">&para;</a></h4>
<p><img alt="" src="https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20230723093807.png" /></p>
<h4 id="linux-查看-usb-视频设备">linux 查看 usb 视频设备<a class="headerlink" href="#linux-查看-usb-视频设备" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>v4l2-ctl --list-devices
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>v4l2-ctl --list-formats-ext
</span></code></pre></div>
<h3 id="kvm-没有画面">KVM 没有画面<a class="headerlink" href="#kvm-没有画面" title="Permanent link">&para;</a></h3>
<p>最后发现买的 ms2130 在 linux 下，usb3.0 无法工作。只能 usb 接口插入一半，使其成为 2.0 时，linux 下才能正常工作。</p>
<p>报错，说设备不支持视频捕获。也就是采集卡不能用。</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>Jul 23 09:18:17 king3399 kvmd[382354]: kvmd.apps.kvmd.streamer           INFO --- =&gt; -- INFO  [36009.992    stream] -- Device fd=9 opened
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>Jul 23 09:18:17 king3399 kvmd[382354]: kvmd.apps.kvmd.streamer           INFO --- =&gt; -- ERROR [36009.992    stream] -- Video capture is not supported by device
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>Jul 23 09:18:17 king3399 kvmd[382354]: kvmd.apps.kvmd.streamer           INFO --- =&gt; -- INFO  [36009.992    stream] -- Device fd=9 closed
</span></code></pre></div>
<h4 id="ms2109">ms2109<a class="headerlink" href="#ms2109" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>[Tue Jul 25 14:54:59 2023] usb 1-3: new high-speed USB device number 8 using xhci_hcd
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>[Tue Jul 25 14:55:06 2023] usb 1-3: new high-speed USB device number 9 using xhci_hcd
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>[Tue Jul 25 14:55:06 2023] usb 1-3: New USB device found, idVendor=1de1, idProduct=f105, bcdDevice= 4.09
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>[Tue Jul 25 14:55:06 2023] usb 1-3: New USB device strings: Mfr=1, Product=2, SerialNumber=3
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>[Tue Jul 25 14:55:06 2023] usb 1-3: Product: Display capture-UVC05
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>[Tue Jul 25 14:55:06 2023] usb 1-3: Manufacturer: Actions Micro
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>[Tue Jul 25 14:55:06 2023] usb 1-3: SerialNumber: -1877663977
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>[Tue Jul 25 14:55:06 2023] usb 1-3: Found UVC 1.00 device Display capture-UVC05 (1de1:f105)
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>[Tue Jul 25 14:55:06 2023] usb 1-3: Warning! Unlikely big volume range (=7248), cval-&gt;res is probably wrong.
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>[Tue Jul 25 14:55:06 2023] usb 1-3: [3] FU [Mic Capture Volume] ch = 1, val = -7264/-16/1
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>➜  ~ v4l2-ctl --list-formats-ext
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>ioctl: VIDIOC_ENUM_FMT
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>        Type: Video Capture
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>        [0]: &#39;MJPG&#39; (Motion-JPEG, compressed)
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>                Size: Discrete 1920x1080
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a>                        Interval: Discrete 0.067s (15.000 fps)
</span><span id="__span-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-5-23"><a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-5-24"><a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a>                        Interval: Discrete 0.067s (15.000 fps)
</span><span id="__span-5-25"><a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a>                Size: Discrete 1360x768
</span><span id="__span-5-26"><a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-5-27"><a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-5-28"><a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a>                        Interval: Discrete 0.067s (15.000 fps)
</span><span id="__span-5-29"><a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a>                Size: Discrete 1280x1024
</span><span id="__span-5-30"><a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-5-31"><a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-5-32"><a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a>                        Interval: Discrete 0.067s (15.000 fps)
</span><span id="__span-5-33"><a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a>                Size: Discrete 1280x960
</span><span id="__span-5-34"><a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-5-35"><a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-5-36"><a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a>                        Interval: Discrete 0.067s (15.000 fps)
</span><span id="__span-5-37"><a id="__codelineno-5-37" name="__codelineno-5-37" href="#__codelineno-5-37"></a>                Size: Discrete 1280x720
</span><span id="__span-5-38"><a id="__codelineno-5-38" name="__codelineno-5-38" href="#__codelineno-5-38"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-5-39"><a id="__codelineno-5-39" name="__codelineno-5-39" href="#__codelineno-5-39"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-5-40"><a id="__codelineno-5-40" name="__codelineno-5-40" href="#__codelineno-5-40"></a>                        Interval: Discrete 0.067s (15.000 fps)
</span><span id="__span-5-41"><a id="__codelineno-5-41" name="__codelineno-5-41" href="#__codelineno-5-41"></a>                Size: Discrete 1024x768
</span><span id="__span-5-42"><a id="__codelineno-5-42" name="__codelineno-5-42" href="#__codelineno-5-42"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-5-43"><a id="__codelineno-5-43" name="__codelineno-5-43" href="#__codelineno-5-43"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-5-44"><a id="__codelineno-5-44" name="__codelineno-5-44" href="#__codelineno-5-44"></a>                        Interval: Discrete 0.067s (15.000 fps)
</span><span id="__span-5-45"><a id="__codelineno-5-45" name="__codelineno-5-45" href="#__codelineno-5-45"></a>                Size: Discrete 800x600
</span><span id="__span-5-46"><a id="__codelineno-5-46" name="__codelineno-5-46" href="#__codelineno-5-46"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-5-47"><a id="__codelineno-5-47" name="__codelineno-5-47" href="#__codelineno-5-47"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-5-48"><a id="__codelineno-5-48" name="__codelineno-5-48" href="#__codelineno-5-48"></a>                        Interval: Discrete 0.067s (15.000 fps)
</span><span id="__span-5-49"><a id="__codelineno-5-49" name="__codelineno-5-49" href="#__codelineno-5-49"></a>                Size: Discrete 720x576
</span><span id="__span-5-50"><a id="__codelineno-5-50" name="__codelineno-5-50" href="#__codelineno-5-50"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-5-51"><a id="__codelineno-5-51" name="__codelineno-5-51" href="#__codelineno-5-51"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-5-52"><a id="__codelineno-5-52" name="__codelineno-5-52" href="#__codelineno-5-52"></a>                        Interval: Discrete 0.067s (15.000 fps)
</span><span id="__span-5-53"><a id="__codelineno-5-53" name="__codelineno-5-53" href="#__codelineno-5-53"></a>                Size: Discrete 720x480
</span><span id="__span-5-54"><a id="__codelineno-5-54" name="__codelineno-5-54" href="#__codelineno-5-54"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-5-55"><a id="__codelineno-5-55" name="__codelineno-5-55" href="#__codelineno-5-55"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-5-56"><a id="__codelineno-5-56" name="__codelineno-5-56" href="#__codelineno-5-56"></a>                        Interval: Discrete 0.067s (15.000 fps)
</span><span id="__span-5-57"><a id="__codelineno-5-57" name="__codelineno-5-57" href="#__codelineno-5-57"></a>                Size: Discrete 640x480
</span><span id="__span-5-58"><a id="__codelineno-5-58" name="__codelineno-5-58" href="#__codelineno-5-58"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-5-59"><a id="__codelineno-5-59" name="__codelineno-5-59" href="#__codelineno-5-59"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-5-60"><a id="__codelineno-5-60" name="__codelineno-5-60" href="#__codelineno-5-60"></a>                        Interval: Discrete 0.067s (15.000 fps)
</span><span id="__span-5-61"><a id="__codelineno-5-61" name="__codelineno-5-61" href="#__codelineno-5-61"></a>
</span><span id="__span-5-62"><a id="__codelineno-5-62" name="__codelineno-5-62" href="#__codelineno-5-62"></a>
</span><span id="__span-5-63"><a id="__codelineno-5-63" name="__codelineno-5-63" href="#__codelineno-5-63"></a>➜  ~ v4l2-ctl --all
</span><span id="__span-5-64"><a id="__codelineno-5-64" name="__codelineno-5-64" href="#__codelineno-5-64"></a>Driver Info:
</span><span id="__span-5-65"><a id="__codelineno-5-65" name="__codelineno-5-65" href="#__codelineno-5-65"></a>        Driver name      : uvcvideo
</span><span id="__span-5-66"><a id="__codelineno-5-66" name="__codelineno-5-66" href="#__codelineno-5-66"></a>        Card type        : Display capture-UVC05: Display
</span><span id="__span-5-67"><a id="__codelineno-5-67" name="__codelineno-5-67" href="#__codelineno-5-67"></a>        Bus info         : usb-0000:02:00.0-3
</span><span id="__span-5-68"><a id="__codelineno-5-68" name="__codelineno-5-68" href="#__codelineno-5-68"></a>        Driver version   : 5.15.99
</span><span id="__span-5-69"><a id="__codelineno-5-69" name="__codelineno-5-69" href="#__codelineno-5-69"></a>        Capabilities     : 0x84a00001
</span><span id="__span-5-70"><a id="__codelineno-5-70" name="__codelineno-5-70" href="#__codelineno-5-70"></a>                Video Capture
</span><span id="__span-5-71"><a id="__codelineno-5-71" name="__codelineno-5-71" href="#__codelineno-5-71"></a>                Metadata Capture
</span><span id="__span-5-72"><a id="__codelineno-5-72" name="__codelineno-5-72" href="#__codelineno-5-72"></a>                Streaming
</span><span id="__span-5-73"><a id="__codelineno-5-73" name="__codelineno-5-73" href="#__codelineno-5-73"></a>                Extended Pix Format
</span><span id="__span-5-74"><a id="__codelineno-5-74" name="__codelineno-5-74" href="#__codelineno-5-74"></a>                Device Capabilities
</span><span id="__span-5-75"><a id="__codelineno-5-75" name="__codelineno-5-75" href="#__codelineno-5-75"></a>        Device Caps      : 0x04200001
</span><span id="__span-5-76"><a id="__codelineno-5-76" name="__codelineno-5-76" href="#__codelineno-5-76"></a>                Video Capture
</span><span id="__span-5-77"><a id="__codelineno-5-77" name="__codelineno-5-77" href="#__codelineno-5-77"></a>                Streaming
</span><span id="__span-5-78"><a id="__codelineno-5-78" name="__codelineno-5-78" href="#__codelineno-5-78"></a>                Extended Pix Format
</span><span id="__span-5-79"><a id="__codelineno-5-79" name="__codelineno-5-79" href="#__codelineno-5-79"></a>Media Driver Info:
</span><span id="__span-5-80"><a id="__codelineno-5-80" name="__codelineno-5-80" href="#__codelineno-5-80"></a>        Driver name      : uvcvideo
</span><span id="__span-5-81"><a id="__codelineno-5-81" name="__codelineno-5-81" href="#__codelineno-5-81"></a>        Model            : Display capture-UVC05: Display
</span><span id="__span-5-82"><a id="__codelineno-5-82" name="__codelineno-5-82" href="#__codelineno-5-82"></a>        Serial           : -1877663977
</span><span id="__span-5-83"><a id="__codelineno-5-83" name="__codelineno-5-83" href="#__codelineno-5-83"></a>        Bus info         : usb-0000:02:00.0-3
</span><span id="__span-5-84"><a id="__codelineno-5-84" name="__codelineno-5-84" href="#__codelineno-5-84"></a>        Media version    : 5.15.99
</span><span id="__span-5-85"><a id="__codelineno-5-85" name="__codelineno-5-85" href="#__codelineno-5-85"></a>        Hardware revision: 0x00000409 (1033)
</span><span id="__span-5-86"><a id="__codelineno-5-86" name="__codelineno-5-86" href="#__codelineno-5-86"></a>        Driver version   : 5.15.99
</span><span id="__span-5-87"><a id="__codelineno-5-87" name="__codelineno-5-87" href="#__codelineno-5-87"></a>Interface Info:
</span><span id="__span-5-88"><a id="__codelineno-5-88" name="__codelineno-5-88" href="#__codelineno-5-88"></a>        ID               : 0x03000002
</span><span id="__span-5-89"><a id="__codelineno-5-89" name="__codelineno-5-89" href="#__codelineno-5-89"></a>        Type             : V4L Video
</span><span id="__span-5-90"><a id="__codelineno-5-90" name="__codelineno-5-90" href="#__codelineno-5-90"></a>Entity Info:
</span><span id="__span-5-91"><a id="__codelineno-5-91" name="__codelineno-5-91" href="#__codelineno-5-91"></a>        ID               : 0x00000001 (1)
</span><span id="__span-5-92"><a id="__codelineno-5-92" name="__codelineno-5-92" href="#__codelineno-5-92"></a>        Name             : Display capture-UVC05: Display
</span><span id="__span-5-93"><a id="__codelineno-5-93" name="__codelineno-5-93" href="#__codelineno-5-93"></a>        Function         : V4L2 I/O
</span><span id="__span-5-94"><a id="__codelineno-5-94" name="__codelineno-5-94" href="#__codelineno-5-94"></a>        Flags            : default
</span><span id="__span-5-95"><a id="__codelineno-5-95" name="__codelineno-5-95" href="#__codelineno-5-95"></a>        Pad 0x01000007   : 0: Sink
</span><span id="__span-5-96"><a id="__codelineno-5-96" name="__codelineno-5-96" href="#__codelineno-5-96"></a>          Link 0x0200000d: from remote pad 0x100000a of entity &#39;Processing 2&#39; (Video Pixel Formatter): Data, Enabled, Immutable
</span><span id="__span-5-97"><a id="__codelineno-5-97" name="__codelineno-5-97" href="#__codelineno-5-97"></a>Priority: 2
</span><span id="__span-5-98"><a id="__codelineno-5-98" name="__codelineno-5-98" href="#__codelineno-5-98"></a>Video input : 0 (Camera 1: ok)
</span><span id="__span-5-99"><a id="__codelineno-5-99" name="__codelineno-5-99" href="#__codelineno-5-99"></a>Format Video Capture:
</span><span id="__span-5-100"><a id="__codelineno-5-100" name="__codelineno-5-100" href="#__codelineno-5-100"></a>        Width/Height      : 1920/1080
</span><span id="__span-5-101"><a id="__codelineno-5-101" name="__codelineno-5-101" href="#__codelineno-5-101"></a>        Pixel Format      : &#39;MJPG&#39; (Motion-JPEG)
</span><span id="__span-5-102"><a id="__codelineno-5-102" name="__codelineno-5-102" href="#__codelineno-5-102"></a>        Field             : None
</span><span id="__span-5-103"><a id="__codelineno-5-103" name="__codelineno-5-103" href="#__codelineno-5-103"></a>        Bytes per Line    : 0
</span><span id="__span-5-104"><a id="__codelineno-5-104" name="__codelineno-5-104" href="#__codelineno-5-104"></a>        Size Image        : 3110400
</span><span id="__span-5-105"><a id="__codelineno-5-105" name="__codelineno-5-105" href="#__codelineno-5-105"></a>        Colorspace        : sRGB
</span><span id="__span-5-106"><a id="__codelineno-5-106" name="__codelineno-5-106" href="#__codelineno-5-106"></a>        Transfer Function : Rec. 709
</span><span id="__span-5-107"><a id="__codelineno-5-107" name="__codelineno-5-107" href="#__codelineno-5-107"></a>        YCbCr/HSV Encoding: ITU-R 601
</span><span id="__span-5-108"><a id="__codelineno-5-108" name="__codelineno-5-108" href="#__codelineno-5-108"></a>        Quantization      : Default (maps to Full Range)
</span><span id="__span-5-109"><a id="__codelineno-5-109" name="__codelineno-5-109" href="#__codelineno-5-109"></a>        Flags             :
</span><span id="__span-5-110"><a id="__codelineno-5-110" name="__codelineno-5-110" href="#__codelineno-5-110"></a>Crop Capability Video Capture:
</span><span id="__span-5-111"><a id="__codelineno-5-111" name="__codelineno-5-111" href="#__codelineno-5-111"></a>        Bounds      : Left 0, Top 0, Width 1920, Height 1080
</span><span id="__span-5-112"><a id="__codelineno-5-112" name="__codelineno-5-112" href="#__codelineno-5-112"></a>        Default     : Left 0, Top 0, Width 1920, Height 1080
</span><span id="__span-5-113"><a id="__codelineno-5-113" name="__codelineno-5-113" href="#__codelineno-5-113"></a>        Pixel Aspect: 1/1
</span><span id="__span-5-114"><a id="__codelineno-5-114" name="__codelineno-5-114" href="#__codelineno-5-114"></a>Selection Video Capture: crop_default, Left 0, Top 0, Width 1920, Height 1080, Flags:
</span><span id="__span-5-115"><a id="__codelineno-5-115" name="__codelineno-5-115" href="#__codelineno-5-115"></a>Selection Video Capture: crop_bounds, Left 0, Top 0, Width 1920, Height 1080, Flags:
</span><span id="__span-5-116"><a id="__codelineno-5-116" name="__codelineno-5-116" href="#__codelineno-5-116"></a>Streaming Parameters Video Capture:
</span><span id="__span-5-117"><a id="__codelineno-5-117" name="__codelineno-5-117" href="#__codelineno-5-117"></a>        Capabilities     : timeperframe
</span><span id="__span-5-118"><a id="__codelineno-5-118" name="__codelineno-5-118" href="#__codelineno-5-118"></a>        Frames per second: 60.000 (60/1)
</span><span id="__span-5-119"><a id="__codelineno-5-119" name="__codelineno-5-119" href="#__codelineno-5-119"></a>        Read buffers     : 0
</span><span id="__span-5-120"><a id="__codelineno-5-120" name="__codelineno-5-120" href="#__codelineno-5-120"></a>
</span><span id="__span-5-121"><a id="__codelineno-5-121" name="__codelineno-5-121" href="#__codelineno-5-121"></a>Camera Controls
</span><span id="__span-5-122"><a id="__codelineno-5-122" name="__codelineno-5-122" href="#__codelineno-5-122"></a>
</span><span id="__span-5-123"><a id="__codelineno-5-123" name="__codelineno-5-123" href="#__codelineno-5-123"></a>                  auto_exposure 0x009a0901 (menu)   : min=0 max=3 default=0 value=0 (Auto Mode)
</span><span id="__span-5-124"><a id="__codelineno-5-124" name="__codelineno-5-124" href="#__codelineno-5-124"></a>                                0: Auto Mode
</span></code></pre></div>
<h4 id="ms2130">ms2130<a class="headerlink" href="#ms2130" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>➜  ~ sudo dmesg --color=always -W
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>[264156.578383] usb 2-3: new SuperSpeed USB device number 2 using xhci_hcd
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>[264156.614502] usb 2-3: LPM exit latency is zeroed, disabling LPM.
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>[264156.639256] usb 2-3: New USB device found, idVendor=345f, idProduct=2130, bcdDevice=31.00
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>[264156.641654] usb 2-3: New USB device strings: Mfr=1, Product=2, SerialNumber=3
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>[264156.644154] usb 2-3: Product: USB3 Video
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>[264156.646540] usb 2-3: Manufacturer: MACROSILICON
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>[264156.648972] usb 2-3: SerialNumber: 20210623
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>[264156.676445] usb 2-3: Found UVC 1.00 device USB3 Video (345f:2130)
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>[264156.735960] hid-generic 0003:345F:2130.000F: hiddev0,hidraw0: USB HID v1.10 Device [MACROSILICON USB3 Video] on usb-0000:02:00.0-3/input4
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>Bus 002 Device 002: ID 345f:2130 MACROSILICON USB3 Video
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>➜  ~ v4l2-ctl --list-formats-ext
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>ioctl: VIDIOC_ENUM_FMT
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>        Type: Video Capture
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>        [0]: &#39;YUYV&#39; (YUYV 4:2:2)
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>                Size: Discrete 3840x2160
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a>                        Interval: Discrete 0.056s (18.000 fps)
</span><span id="__span-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a>                Size: Discrete 2560x1600
</span><span id="__span-6-22"><a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>                        Interval: Discrete 0.020s (50.000 fps)
</span><span id="__span-6-23"><a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-6-24"><a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>                        Interval: Discrete 0.050s (20.000 fps)
</span><span id="__span-6-25"><a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a>                        Interval: Discrete 0.100s (10.000 fps)
</span><span id="__span-6-26"><a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a>                Size: Discrete 2560x1440
</span><span id="__span-6-27"><a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a>                        Interval: Discrete 0.020s (50.000 fps)
</span><span id="__span-6-28"><a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-6-29"><a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a>                        Interval: Discrete 0.050s (20.000 fps)
</span><span id="__span-6-30"><a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a>                        Interval: Discrete 0.100s (10.000 fps)
</span><span id="__span-6-31"><a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a>                Size: Discrete 2048x1152
</span><span id="__span-6-32"><a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-6-33"><a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a>                        Interval: Discrete 0.020s (50.000 fps)
</span><span id="__span-6-34"><a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-6-35"><a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a>                        Interval: Discrete 0.050s (20.000 fps)
</span><span id="__span-6-36"><a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a>                        Interval: Discrete 0.100s (10.000 fps)
</span><span id="__span-6-37"><a id="__codelineno-6-37" name="__codelineno-6-37" href="#__codelineno-6-37"></a>                Size: Discrete 2048x1080
</span><span id="__span-6-38"><a id="__codelineno-6-38" name="__codelineno-6-38" href="#__codelineno-6-38"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-6-39"><a id="__codelineno-6-39" name="__codelineno-6-39" href="#__codelineno-6-39"></a>                        Interval: Discrete 0.020s (50.000 fps)
</span><span id="__span-6-40"><a id="__codelineno-6-40" name="__codelineno-6-40" href="#__codelineno-6-40"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-6-41"><a id="__codelineno-6-41" name="__codelineno-6-41" href="#__codelineno-6-41"></a>                        Interval: Discrete 0.050s (20.000 fps)
</span><span id="__span-6-42"><a id="__codelineno-6-42" name="__codelineno-6-42" href="#__codelineno-6-42"></a>                        Interval: Discrete 0.100s (10.000 fps)
</span><span id="__span-6-43"><a id="__codelineno-6-43" name="__codelineno-6-43" href="#__codelineno-6-43"></a>                Size: Discrete 1920x2160
</span><span id="__span-6-44"><a id="__codelineno-6-44" name="__codelineno-6-44" href="#__codelineno-6-44"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-6-45"><a id="__codelineno-6-45" name="__codelineno-6-45" href="#__codelineno-6-45"></a>                        Interval: Discrete 0.020s (50.000 fps)
</span><span id="__span-6-46"><a id="__codelineno-6-46" name="__codelineno-6-46" href="#__codelineno-6-46"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-6-47"><a id="__codelineno-6-47" name="__codelineno-6-47" href="#__codelineno-6-47"></a>                        Interval: Discrete 0.050s (20.000 fps)
</span><span id="__span-6-48"><a id="__codelineno-6-48" name="__codelineno-6-48" href="#__codelineno-6-48"></a>                        Interval: Discrete 0.100s (10.000 fps)
</span><span id="__span-6-49"><a id="__codelineno-6-49" name="__codelineno-6-49" href="#__codelineno-6-49"></a>                Size: Discrete 1920x1200
</span><span id="__span-6-50"><a id="__codelineno-6-50" name="__codelineno-6-50" href="#__codelineno-6-50"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-6-51"><a id="__codelineno-6-51" name="__codelineno-6-51" href="#__codelineno-6-51"></a>                        Interval: Discrete 0.020s (50.000 fps)
</span><span id="__span-6-52"><a id="__codelineno-6-52" name="__codelineno-6-52" href="#__codelineno-6-52"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-6-53"><a id="__codelineno-6-53" name="__codelineno-6-53" href="#__codelineno-6-53"></a>                        Interval: Discrete 0.050s (20.000 fps)
</span><span id="__span-6-54"><a id="__codelineno-6-54" name="__codelineno-6-54" href="#__codelineno-6-54"></a>                        Interval: Discrete 0.100s (10.000 fps)
</span><span id="__span-6-55"><a id="__codelineno-6-55" name="__codelineno-6-55" href="#__codelineno-6-55"></a>                Size: Discrete 1920x1080
</span><span id="__span-6-56"><a id="__codelineno-6-56" name="__codelineno-6-56" href="#__codelineno-6-56"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-6-57"><a id="__codelineno-6-57" name="__codelineno-6-57" href="#__codelineno-6-57"></a>                        Interval: Discrete 0.020s (50.000 fps)
</span><span id="__span-6-58"><a id="__codelineno-6-58" name="__codelineno-6-58" href="#__codelineno-6-58"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-6-59"><a id="__codelineno-6-59" name="__codelineno-6-59" href="#__codelineno-6-59"></a>                        Interval: Discrete 0.050s (20.000 fps)
</span><span id="__span-6-60"><a id="__codelineno-6-60" name="__codelineno-6-60" href="#__codelineno-6-60"></a>                        Interval: Discrete 0.100s (10.000 fps)
</span><span id="__span-6-61"><a id="__codelineno-6-61" name="__codelineno-6-61" href="#__codelineno-6-61"></a>                Size: Discrete 1360x768
</span><span id="__span-6-62"><a id="__codelineno-6-62" name="__codelineno-6-62" href="#__codelineno-6-62"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-6-63"><a id="__codelineno-6-63" name="__codelineno-6-63" href="#__codelineno-6-63"></a>                        Interval: Discrete 0.020s (50.000 fps)
</span><span id="__span-6-64"><a id="__codelineno-6-64" name="__codelineno-6-64" href="#__codelineno-6-64"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-6-65"><a id="__codelineno-6-65" name="__codelineno-6-65" href="#__codelineno-6-65"></a>                        Interval: Discrete 0.050s (20.000 fps)
</span><span id="__span-6-66"><a id="__codelineno-6-66" name="__codelineno-6-66" href="#__codelineno-6-66"></a>                        Interval: Discrete 0.100s (10.000 fps)
</span><span id="__span-6-67"><a id="__codelineno-6-67" name="__codelineno-6-67" href="#__codelineno-6-67"></a>                Size: Discrete 1280x1024
</span><span id="__span-6-68"><a id="__codelineno-6-68" name="__codelineno-6-68" href="#__codelineno-6-68"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-6-69"><a id="__codelineno-6-69" name="__codelineno-6-69" href="#__codelineno-6-69"></a>                        Interval: Discrete 0.020s (50.000 fps)
</span><span id="__span-6-70"><a id="__codelineno-6-70" name="__codelineno-6-70" href="#__codelineno-6-70"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-6-71"><a id="__codelineno-6-71" name="__codelineno-6-71" href="#__codelineno-6-71"></a>                        Interval: Discrete 0.050s (20.000 fps)
</span><span id="__span-6-72"><a id="__codelineno-6-72" name="__codelineno-6-72" href="#__codelineno-6-72"></a>                        Interval: Discrete 0.100s (10.000 fps)
</span><span id="__span-6-73"><a id="__codelineno-6-73" name="__codelineno-6-73" href="#__codelineno-6-73"></a>                Size: Discrete 1280x960
</span><span id="__span-6-74"><a id="__codelineno-6-74" name="__codelineno-6-74" href="#__codelineno-6-74"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-6-75"><a id="__codelineno-6-75" name="__codelineno-6-75" href="#__codelineno-6-75"></a>                        Interval: Discrete 0.020s (50.000 fps)
</span><span id="__span-6-76"><a id="__codelineno-6-76" name="__codelineno-6-76" href="#__codelineno-6-76"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-6-77"><a id="__codelineno-6-77" name="__codelineno-6-77" href="#__codelineno-6-77"></a>                        Interval: Discrete 0.050s (20.000 fps)
</span><span id="__span-6-78"><a id="__codelineno-6-78" name="__codelineno-6-78" href="#__codelineno-6-78"></a>                        Interval: Discrete 0.100s (10.000 fps)
</span><span id="__span-6-79"><a id="__codelineno-6-79" name="__codelineno-6-79" href="#__codelineno-6-79"></a>                Size: Discrete 1280x720
</span><span id="__span-6-80"><a id="__codelineno-6-80" name="__codelineno-6-80" href="#__codelineno-6-80"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-6-81"><a id="__codelineno-6-81" name="__codelineno-6-81" href="#__codelineno-6-81"></a>                        Interval: Discrete 0.020s (50.000 fps)
</span><span id="__span-6-82"><a id="__codelineno-6-82" name="__codelineno-6-82" href="#__codelineno-6-82"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-6-83"><a id="__codelineno-6-83" name="__codelineno-6-83" href="#__codelineno-6-83"></a>                        Interval: Discrete 0.050s (20.000 fps)
</span><span id="__span-6-84"><a id="__codelineno-6-84" name="__codelineno-6-84" href="#__codelineno-6-84"></a>                        Interval: Discrete 0.100s (10.000 fps)
</span><span id="__span-6-85"><a id="__codelineno-6-85" name="__codelineno-6-85" href="#__codelineno-6-85"></a>                Size: Discrete 1024x768
</span><span id="__span-6-86"><a id="__codelineno-6-86" name="__codelineno-6-86" href="#__codelineno-6-86"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-6-87"><a id="__codelineno-6-87" name="__codelineno-6-87" href="#__codelineno-6-87"></a>                        Interval: Discrete 0.020s (50.000 fps)
</span><span id="__span-6-88"><a id="__codelineno-6-88" name="__codelineno-6-88" href="#__codelineno-6-88"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-6-89"><a id="__codelineno-6-89" name="__codelineno-6-89" href="#__codelineno-6-89"></a>                        Interval: Discrete 0.050s (20.000 fps)
</span><span id="__span-6-90"><a id="__codelineno-6-90" name="__codelineno-6-90" href="#__codelineno-6-90"></a>                        Interval: Discrete 0.100s (10.000 fps)
</span><span id="__span-6-91"><a id="__codelineno-6-91" name="__codelineno-6-91" href="#__codelineno-6-91"></a>                Size: Discrete 720x480
</span><span id="__span-6-92"><a id="__codelineno-6-92" name="__codelineno-6-92" href="#__codelineno-6-92"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-6-93"><a id="__codelineno-6-93" name="__codelineno-6-93" href="#__codelineno-6-93"></a>                        Interval: Discrete 0.020s (50.000 fps)
</span><span id="__span-6-94"><a id="__codelineno-6-94" name="__codelineno-6-94" href="#__codelineno-6-94"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-6-95"><a id="__codelineno-6-95" name="__codelineno-6-95" href="#__codelineno-6-95"></a>                        Interval: Discrete 0.050s (20.000 fps)
</span><span id="__span-6-96"><a id="__codelineno-6-96" name="__codelineno-6-96" href="#__codelineno-6-96"></a>                        Interval: Discrete 0.100s (10.000 fps)
</span><span id="__span-6-97"><a id="__codelineno-6-97" name="__codelineno-6-97" href="#__codelineno-6-97"></a>                Size: Discrete 640x480
</span><span id="__span-6-98"><a id="__codelineno-6-98" name="__codelineno-6-98" href="#__codelineno-6-98"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-6-99"><a id="__codelineno-6-99" name="__codelineno-6-99" href="#__codelineno-6-99"></a>                        Interval: Discrete 0.020s (50.000 fps)
</span><span id="__span-6-100"><a id="__codelineno-6-100" name="__codelineno-6-100" href="#__codelineno-6-100"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-6-101"><a id="__codelineno-6-101" name="__codelineno-6-101" href="#__codelineno-6-101"></a>                        Interval: Discrete 0.050s (20.000 fps)
</span><span id="__span-6-102"><a id="__codelineno-6-102" name="__codelineno-6-102" href="#__codelineno-6-102"></a>                        Interval: Discrete 0.100s (10.000 fps)
</span><span id="__span-6-103"><a id="__codelineno-6-103" name="__codelineno-6-103" href="#__codelineno-6-103"></a>        [1]: &#39;MJPG&#39; (Motion-JPEG, compressed)
</span><span id="__span-6-104"><a id="__codelineno-6-104" name="__codelineno-6-104" href="#__codelineno-6-104"></a>                Size: Discrete 3840x2160
</span><span id="__span-6-105"><a id="__codelineno-6-105" name="__codelineno-6-105" href="#__codelineno-6-105"></a>                        Interval: Discrete 0.056s (18.000 fps)
</span><span id="__span-6-106"><a id="__codelineno-6-106" name="__codelineno-6-106" href="#__codelineno-6-106"></a>                Size: Discrete 2560x1600
</span><span id="__span-6-107"><a id="__codelineno-6-107" name="__codelineno-6-107" href="#__codelineno-6-107"></a>                Size: Discrete 2560x1440
</span><span id="__span-6-108"><a id="__codelineno-6-108" name="__codelineno-6-108" href="#__codelineno-6-108"></a>                        Interval: Discrete 0.020s (50.000 fps)
</span><span id="__span-6-109"><a id="__codelineno-6-109" name="__codelineno-6-109" href="#__codelineno-6-109"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-6-110"><a id="__codelineno-6-110" name="__codelineno-6-110" href="#__codelineno-6-110"></a>                        Interval: Discrete 0.050s (20.000 fps)
</span><span id="__span-6-111"><a id="__codelineno-6-111" name="__codelineno-6-111" href="#__codelineno-6-111"></a>                        Interval: Discrete 0.100s (10.000 fps)
</span><span id="__span-6-112"><a id="__codelineno-6-112" name="__codelineno-6-112" href="#__codelineno-6-112"></a>                Size: Discrete 2048x1152
</span><span id="__span-6-113"><a id="__codelineno-6-113" name="__codelineno-6-113" href="#__codelineno-6-113"></a>                        Interval: Discrete 0.017s (60.000 fps)
</span><span id="__span-6-114"><a id="__codelineno-6-114" name="__codelineno-6-114" href="#__codelineno-6-114"></a>                        Interval: Discrete 0.020s (50.000 fps)
</span><span id="__span-6-115"><a id="__codelineno-6-115" name="__codelineno-6-115" href="#__codelineno-6-115"></a>                        Interval: Discrete 0.033s (30.000 fps)
</span><span id="__span-6-116"><a id="__codelineno-6-116" name="__codelineno-6-116" href="#__codelineno-6-116"></a>                        Interval: Discrete 0.050s (20.000 fps)
</span><span id="__span-6-117"><a id="__codelineno-6-117" name="__codelineno-6-117" href="#__codelineno-6-117"></a>                        Interval: Discrete 0.100s (10.000 fps)
</span><span id="__span-6-118"><a id="__codelineno-6-118" name="__codelineno-6-118" href="#__codelineno-6-118"></a>                Size: Discrete 2048x1080
</span><span id="__span-6-119"><a id="__codelineno-6-119" name="__codelineno-6-119" href="#__codelineno-6-119"></a>                Size: Discrete 1920x2160
</span><span id="__span-6-120"><a id="__codelineno-6-120" name="__codelineno-6-120" href="#__codelineno-6-120"></a>                Size: Discrete 1920x1200
</span><span id="__span-6-121"><a id="__codelineno-6-121" name="__codelineno-6-121" href="#__codelineno-6-121"></a>                Size: Discrete 1920x1080
</span><span id="__span-6-122"><a id="__codelineno-6-122" name="__codelineno-6-122" href="#__codelineno-6-122"></a>                Size: Discrete 1360x768
</span><span id="__span-6-123"><a id="__codelineno-6-123" name="__codelineno-6-123" href="#__codelineno-6-123"></a>                Size: Discrete 1280x1024
</span><span id="__span-6-124"><a id="__codelineno-6-124" name="__codelineno-6-124" href="#__codelineno-6-124"></a>                Size: Discrete 1280x960
</span></code></pre></div>
<p>出问题</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>➜  ~ sudo dmesg --color=always --ctime -W
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>[Tue Jul 25 16:47:39 2023] usb 1-3: new high-speed USB device number 29 using xhci_hcd
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>[Tue Jul 25 16:47:39 2023] usb 1-3: New USB device found, idVendor=345f, idProduct=2130, bcdDevice=21.00
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>[Tue Jul 25 16:47:39 2023] usb 1-3: New USB device strings: Mfr=1, Product=5, SerialNumber=7
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>[Tue Jul 25 16:47:39 2023] usb 1-3: Product: USB2 Video
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>[Tue Jul 25 16:47:39 2023] usb 1-3: Manufacturer: MACROSILICON
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>[Tue Jul 25 16:47:39 2023] usb 1-3: SerialNumber: 20210621
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>[Tue Jul 25 16:47:39 2023] usb 1-3: Found UVC 1.00 device USB2 Video (345f:2130)
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>[Tue Jul 25 16:47:39 2023] hid-generic 0003:345F:2130.0012: hiddev0,hidraw0: USB HID v1.10 Device [MACROSILICON USB2 Video] on usb-0000:02:00.0-3/input4
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>[Tue Jul 25 16:47:39 2023] usb 1-3: USB disconnect, device number 29
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>[Tue Jul 25 16:47:49 2023] usb usb2-port3: Cannot enable. Maybe the USB cable is bad?
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>[Tue Jul 25 16:47:53 2023] usb 1-3: new high-speed USB device number 31 using xhci_hcd
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>[Tue Jul 25 16:47:53 2023] usb usb2-port3: Cannot enable. Maybe the USB cable is bad?
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>[Tue Jul 25 16:47:57 2023] usb usb2-port3: Cannot enable. Maybe the USB cable is bad?
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>[Tue Jul 25 16:48:01 2023] usb usb2-port3: Cannot enable. Maybe the USB cable is bad?
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>[Tue Jul 25 16:48:05 2023] usb usb2-port3: Cannot enable. Maybe the USB cable is bad?
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>[Tue Jul 25 16:48:09 2023] usb usb2-port3: Cannot enable. Maybe the USB cable is bad?
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>[Tue Jul 25 16:48:20 2023] usb 1-3: new high-speed USB device number 32 using xhci_hcd
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>[Tue Jul 25 16:48:21 2023] usb 1-3: New USB device found, idVendor=345f, idProduct=2130, bcdDevice=21.00
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>[Tue Jul 25 16:48:21 2023] usb 1-3: New USB device strings: Mfr=1, Product=5, SerialNumber=7
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>[Tue Jul 25 16:48:21 2023] usb 1-3: Product: USB2 Video
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a>[Tue Jul 25 16:48:21 2023] usb 1-3: Manufacturer: MACROSILICON
</span><span id="__span-7-23"><a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>[Tue Jul 25 16:48:21 2023] usb 1-3: SerialNumber: 20210621
</span><span id="__span-7-24"><a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a>[Tue Jul 25 16:48:21 2023] usb 1-3: Found UVC 1.00 device USB2 Video (345f:2130)
</span><span id="__span-7-25"><a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a>[Tue Jul 25 16:48:21 2023] hid-generic 0003:345F:2130.0013: hiddev0,hidraw0: USB HID v1.10 Device [MACROSILICON USB2 Video] on usb-0000:02:00.0-3/input4
</span><span id="__span-7-26"><a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a>[Tue Jul 25 16:50:24 2023] usb 1-3: USB disconnect, device number 32
</span><span id="__span-7-27"><a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a>[Tue Jul 25 16:50:44 2023] usb usb2-port3: Cannot enable. Maybe the USB cable is bad?
</span></code></pre></div>
<ul>
<li>ms2109 在 windows 下能正常工作<ul>
<li>在 linux 下，ustream 报</li>
</ul>
</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>-- INFO  [268879.670    stream] -- Device fd=8 opened
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>-- INFO  [268879.670    stream] -- Using input channel: 0
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>-- INFO  [268879.685    stream] -- Using resolution: 640x480
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>-- ERROR [268879.685    stream] -- Could not obtain the requested pixelformat=YUYV; driver gave us MJPEG
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>-- INFO  [268879.685    stream] -- Falling back to pixelformat=MJPEG
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>-- INFO  [268879.685    stream] -- Using pixelformat: MJPEG
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>-- INFO  [268879.700    stream] -- Using HW FPS: 0 -&gt; 60 (coerced)
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>-- ERROR [268879.700    stream] -- Device does not support setting of HW encoding quality parameters
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>-- INFO  [268879.700    stream] -- Using IO method: MMAP
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>-- INFO  [268879.702    stream] -- Requested 5 device buffers, got 5
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>-- INFO  [268879.704    stream] -- Capturing started
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>-- INFO  [268879.704    stream] -- Switching to HW encoder: the input is (M)JPEG ...
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>-- INFO  [268879.704    stream] -- Using JPEG quality: encoder default
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>-- INFO  [268879.704    stream] -- Creating pool JPEG with 1 workers ...
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>-- INFO  [268879.704    stream] -- Capturing ...
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a>-- ERROR [268880.714    stream] -- Mainloop select() error: Inappropriate ioctl for device
</span><span id="__span-8-17"><a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a>-- INFO  [268880.714    stream] -- Destroying workers pool JPEG ...
</span><span id="__span-8-18"><a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a>-- INFO  [268880.715    stream] -- Capturing stopped
</span><span id="__span-8-19"><a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a>-- INFO  [268880.715    stream] -- Device fd=8 closed
</span><span id="__span-8-20"><a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a>
</span><span id="__span-8-21"><a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a>[Tue Jul 25 17:04:36 2023] uvcvideo 1-3:1.1: Non-zero status (-71) in video completion handler.
</span></code></pre></div>
<p>ms2130 插 USB3.0 没有反应，USB2.0，windows 和 linux 都能正常工作。</p>
<p>开发板 USB2.0 无反应</p>
<h4 id="使用-ustream-测试是否能够使用">使用 ustream 测试是否能够使用<a class="headerlink" href="#使用-ustream-测试是否能够使用" title="Permanent link">&para;</a></h4>
<p><a href="https://github.com/pikvm/ustreamer">pikvm/ustreamer: µStreamer - Lightweight and fast MJPEG-HTTP streamer (github.com)</a></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>./ustreamer --device=/dev/video0 --host=0.0.0.0 --port=8000 -r 1920x1080 --format=MJPEG
</span></code></pre></div>
<p>ms2109</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>-- INFO  [266472.324    stream] -- Device fd=8 opened
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>-- INFO  [266472.324    stream] -- Using input channel: 0
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>-- INFO  [266472.339    stream] -- Using resolution: 1920x1080
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>-- INFO  [266472.339    stream] -- Using pixelformat: MJPEG
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>-- INFO  [266472.354    stream] -- Using HW FPS: 0 -&gt; 60 (coerced)
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>-- ERROR [266472.354    stream] -- Device does not support setting of HW encoding quality parameters
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>-- INFO  [266472.354    stream] -- Using IO method: MMAP
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>-- INFO  [266472.357    stream] -- Requested 5 device buffers, got 5
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>-- INFO  [266472.360    stream] -- Capturing started
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>-- INFO  [266472.360    stream] -- Switching to HW encoder: the input is (M)JPEG ...
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>-- INFO  [266472.360    stream] -- Using JPEG quality: encoder default
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>-- INFO  [266472.360    stream] -- Creating pool JPEG with 1 workers ...
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>-- INFO  [266472.360    stream] -- Capturing ...
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>-- ERROR [266473.375    stream] -- Mainloop select() error: Inappropriate ioctl for device
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>-- INFO  [266473.375    stream] -- Destroying workers pool JPEG ...
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>-- INFO  [266473.377    stream] -- Capturing stopped
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>-- INFO  [266473.379    stream] -- Device fd=8 closed
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>[Tue Jul 25 16:24:26 2023] uvcvideo 1-3:1.1: Non-zero status (-71) in video completion handler.
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>[Tue Jul 25 16:24:26 2023] uvcvideo 1-3:1.1: Non-zero status (-71) in video completion handler.
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>[Tue Jul 25 16:24:26 2023] uvcvideo 1-3:1.1: Non-zero status (-71) in video completion handler.
</span></code></pre></div>
<h3 id="键盘问题">键盘问题<a class="headerlink" href="#键盘问题" title="Permanent link">&para;</a></h3>
<h4 id="报错情况">报错情况<a class="headerlink" href="#报错情况" title="Permanent link">&para;</a></h4>
<p>插入主板 usb2.0 接口，ryzen dmesg，几种错误如下</p>
<ul>
<li><code>usbhid 1-8:1.1: can't add hid device: -110</code></li>
<li><code>usb usb1-port8: Cannot enable. Maybe the USB cable is bad?</code></li>
<li><code>usbhid 1-8:1.1: can't add hid device: -71</code></li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1"># error 1</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>➜<span class="w">  </span>~<span class="w"> </span>sudo<span class="w"> </span>dmesg<span class="w"> </span>--color<span class="o">=</span>always<span class="w"> </span>--ctime<span class="w"> </span>-W
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:01:09<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-8:<span class="w"> </span>new<span class="w"> </span>high-speed<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">126</span><span class="w"> </span>using<span class="w"> </span>xhci_hcd
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:01:09<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-8:<span class="w"> </span>device<span class="w"> </span>descriptor<span class="w"> </span>read/64,<span class="w"> </span>error<span class="w"> </span>-71
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:01:10<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-8:<span class="w"> </span>New<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>found,<span class="w"> </span><span class="nv">idVendor</span><span class="o">=</span>1d6b,<span class="w"> </span><span class="nv">idProduct</span><span class="o">=</span><span class="m">0104</span>,<span class="w"> </span><span class="nv">bcdDevice</span><span class="o">=</span><span class="w"> </span><span class="m">1</span>.00
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:01:10<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-8:<span class="w"> </span>New<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>strings:<span class="w"> </span><span class="nv">Mfr</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">Product</span><span class="o">=</span><span class="m">2</span>,<span class="w"> </span><span class="nv">SerialNumber</span><span class="o">=</span><span class="m">3</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:01:10<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-8:<span class="w"> </span>Product:<span class="w"> </span>Composite<span class="w"> </span>KVM<span class="w"> </span>Device
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:01:10<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-8:<span class="w"> </span>Manufacturer:<span class="w"> </span>PiKVM
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:01:10<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-8:<span class="w"> </span>SerialNumber:<span class="w"> </span>CAFEBABE
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:01:10<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>input:<span class="w"> </span>PiKVM<span class="w"> </span>Composite<span class="w"> </span>KVM<span class="w"> </span>Device<span class="w"> </span>as<span class="w"> </span>/devices/pci0000:00/0000:00:01.2/0000:02:00.0/usb1/1-8/1-8:1.0/0003:1D6B:0104.0104/input/input257
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:01:10<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>hid-generic<span class="w"> </span><span class="m">0003</span>:1D6B:0104.0104:<span class="w"> </span>input,hidraw0:<span class="w"> </span>USB<span class="w"> </span>HID<span class="w"> </span>v1.01<span class="w"> </span>Keyboard<span class="w"> </span><span class="o">[</span>PiKVM<span class="w"> </span>Composite<span class="w"> </span>KVM<span class="w"> </span>Device<span class="o">]</span><span class="w"> </span>on<span class="w"> </span>usb-0000:02:00.0-8/input0
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:01:56<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usbhid<span class="w"> </span><span class="m">1</span>-8:1.1:<span class="w"> </span>can<span class="s1">&#39;t add hid device: -110</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="s1">[Tue Jul 25 22:01:56 2023] usbhid: probe of 1-8:1.1 failed with error -110</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="s1">[Tue Jul 25 22:02:42 2023] usbhid 1-8:1.2: can&#39;</span>t<span class="w"> </span>add<span class="w"> </span>hid<span class="w"> </span>device:<span class="w"> </span>-110
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:02:42<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usbhid:<span class="w"> </span>probe<span class="w"> </span>of<span class="w"> </span><span class="m">1</span>-8:1.2<span class="w"> </span>failed<span class="w"> </span>with<span class="w"> </span>error<span class="w"> </span>-110
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:02:42<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-8:<span class="w"> </span>USB<span class="w"> </span>disconnect,<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">126</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a><span class="c1"># error 2</span>
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:02:44<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-8:<span class="w"> </span>new<span class="w"> </span>high-speed<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">127</span><span class="w"> </span>using<span class="w"> </span>xhci_hcd
</span><span id="__span-12-21"><a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:02:44<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-8:<span class="w"> </span>device<span class="w"> </span>descriptor<span class="w"> </span>read/all,<span class="w"> </span>error<span class="w"> </span>-71
</span><span id="__span-12-22"><a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:02:45<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span>usb1-port8:<span class="w"> </span>Cannot<span class="w"> </span>enable.<span class="w"> </span>Maybe<span class="w"> </span>the<span class="w"> </span>USB<span class="w"> </span>cable<span class="w"> </span>is<span class="w"> </span>bad?
</span><span id="__span-12-23"><a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:02:45<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span>usb1-port8:<span class="w"> </span>attempt<span class="w"> </span>power<span class="w"> </span>cycle
</span><span id="__span-12-24"><a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:02:46<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-8:<span class="w"> </span>new<span class="w"> </span>high-speed<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">6</span><span class="w"> </span>using<span class="w"> </span>xhci_hcd
</span><span id="__span-12-25"><a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:02:46<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-8:<span class="w"> </span>Device<span class="w"> </span>not<span class="w"> </span>responding<span class="w"> </span>to<span class="w"> </span>setup<span class="w"> </span>address.
</span><span id="__span-12-26"><a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:02:46<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-8:<span class="w"> </span>Device<span class="w"> </span>not<span class="w"> </span>responding<span class="w"> </span>to<span class="w"> </span>setup<span class="w"> </span>address.
</span><span id="__span-12-27"><a id="__codelineno-12-27" name="__codelineno-12-27" href="#__codelineno-12-27"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:02:46<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-8:<span class="w"> </span>device<span class="w"> </span>not<span class="w"> </span>accepting<span class="w"> </span>address<span class="w"> </span><span class="m">6</span>,<span class="w"> </span>error<span class="w"> </span>-71
</span><span id="__span-12-28"><a id="__codelineno-12-28" name="__codelineno-12-28" href="#__codelineno-12-28"></a>
</span><span id="__span-12-29"><a id="__codelineno-12-29" name="__codelineno-12-29" href="#__codelineno-12-29"></a>
</span><span id="__span-12-30"><a id="__codelineno-12-30" name="__codelineno-12-30" href="#__codelineno-12-30"></a><span class="c1"># error 3</span>
</span><span id="__span-12-31"><a id="__codelineno-12-31" name="__codelineno-12-31" href="#__codelineno-12-31"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:02:47<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-8:<span class="w"> </span>new<span class="w"> </span>high-speed<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">7</span><span class="w"> </span>using<span class="w"> </span>xhci_hcd
</span><span id="__span-12-32"><a id="__codelineno-12-32" name="__codelineno-12-32" href="#__codelineno-12-32"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:02:47<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-8:<span class="w"> </span>New<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>found,<span class="w"> </span><span class="nv">idVendor</span><span class="o">=</span>1d6b,<span class="w"> </span><span class="nv">idProduct</span><span class="o">=</span><span class="m">0104</span>,<span class="w"> </span><span class="nv">bcdDevice</span><span class="o">=</span><span class="w"> </span><span class="m">1</span>.00
</span><span id="__span-12-33"><a id="__codelineno-12-33" name="__codelineno-12-33" href="#__codelineno-12-33"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:02:47<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-8:<span class="w"> </span>New<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>strings:<span class="w"> </span><span class="nv">Mfr</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">Product</span><span class="o">=</span><span class="m">2</span>,<span class="w"> </span><span class="nv">SerialNumber</span><span class="o">=</span><span class="m">3</span>
</span><span id="__span-12-34"><a id="__codelineno-12-34" name="__codelineno-12-34" href="#__codelineno-12-34"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:02:47<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-8:<span class="w"> </span>Product:<span class="w"> </span>Composite<span class="w"> </span>KVM<span class="w"> </span>Device
</span><span id="__span-12-35"><a id="__codelineno-12-35" name="__codelineno-12-35" href="#__codelineno-12-35"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:02:47<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-8:<span class="w"> </span>Manufacturer:<span class="w"> </span>PiKVM
</span><span id="__span-12-36"><a id="__codelineno-12-36" name="__codelineno-12-36" href="#__codelineno-12-36"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:02:47<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-8:<span class="w"> </span>SerialNumber:<span class="w"> </span>CAFEBABE
</span><span id="__span-12-37"><a id="__codelineno-12-37" name="__codelineno-12-37" href="#__codelineno-12-37"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:02:47<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>input:<span class="w"> </span>PiKVM<span class="w"> </span>Composite<span class="w"> </span>KVM<span class="w"> </span>Device<span class="w"> </span>as<span class="w"> </span>/devices/pci0000:00/0000:00:01.2/0000:02:00.0/usb1/1-8/1-8:1.0/0003:1D6B:0104.0105/input/input258
</span><span id="__span-12-38"><a id="__codelineno-12-38" name="__codelineno-12-38" href="#__codelineno-12-38"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:02:47<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>hid-generic<span class="w"> </span><span class="m">0003</span>:1D6B:0104.0105:<span class="w"> </span>input,hidraw0:<span class="w"> </span>USB<span class="w"> </span>HID<span class="w"> </span>v1.01<span class="w"> </span>Keyboard<span class="w"> </span><span class="o">[</span>PiKVM<span class="w"> </span>Composite<span class="w"> </span>KVM<span class="w"> </span>Device<span class="o">]</span><span class="w"> </span>on<span class="w"> </span>usb-0000:02:00.0-8/input0
</span><span id="__span-12-39"><a id="__codelineno-12-39" name="__codelineno-12-39" href="#__codelineno-12-39"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:02:47<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usbhid<span class="w"> </span><span class="m">1</span>-8:1.1:<span class="w"> </span>can<span class="s1">&#39;t add hid device: -71</span>
</span><span id="__span-12-40"><a id="__codelineno-12-40" name="__codelineno-12-40" href="#__codelineno-12-40"></a><span class="s1">[Tue Jul 25 22:02:47 2023] usbhid: probe of 1-8:1.1 failed with error -71</span>
</span><span id="__span-12-41"><a id="__codelineno-12-41" name="__codelineno-12-41" href="#__codelineno-12-41"></a><span class="s1">[Tue Jul 25 22:02:47 2023] usbhid f1-8:1.2: can&#39;</span>t<span class="w"> </span>add<span class="w"> </span>hid<span class="w"> </span>device:<span class="w"> </span>-71
</span><span id="__span-12-42"><a id="__codelineno-12-42" name="__codelineno-12-42" href="#__codelineno-12-42"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:02:47<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usbhid:<span class="w"> </span>probe<span class="w"> </span>of<span class="w"> </span><span class="m">1</span>-8:1.2<span class="w"> </span>failed<span class="w"> </span>with<span class="w"> </span>error<span class="w"> </span>-71
</span><span id="__span-12-43"><a id="__codelineno-12-43" name="__codelineno-12-43" href="#__codelineno-12-43"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:02:47<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">1</span>-8:<span class="w"> </span>USB<span class="w"> </span>disconnect,<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">7</span>
</span></code></pre></div>
<h4 id="正常的情况">正常的情况<a class="headerlink" href="#正常的情况" title="Permanent link">&para;</a></h4>
<p>发现 otg 键盘接 windows 是没问题的，然后发现 ryzen 使用 usb 3.0 接口没问题
dmesg</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:04:38<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">3</span>-3.3:<span class="w"> </span>reset<span class="w"> </span>low-speed<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">28</span><span class="w"> </span>using<span class="w"> </span>xhci_hcd
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:04:39<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">3</span>-3.1:<span class="w"> </span>reset<span class="w"> </span>full-speed<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">34</span><span class="w"> </span>using<span class="w"> </span>xhci_hcd
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:20:12<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">3</span>-4:<span class="w"> </span>new<span class="w"> </span>high-speed<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>number<span class="w"> </span><span class="m">35</span><span class="w"> </span>using<span class="w"> </span>xhci_hcd
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:20:12<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">3</span>-4:<span class="w"> </span>New<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>found,<span class="w"> </span><span class="nv">idVendor</span><span class="o">=</span>1d6b,<span class="w"> </span><span class="nv">idProduct</span><span class="o">=</span><span class="m">0104</span>,<span class="w"> </span><span class="nv">bcdDevice</span><span class="o">=</span><span class="w"> </span><span class="m">1</span>.00
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:20:12<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">3</span>-4:<span class="w"> </span>New<span class="w"> </span>USB<span class="w"> </span>device<span class="w"> </span>strings:<span class="w"> </span><span class="nv">Mfr</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">Product</span><span class="o">=</span><span class="m">2</span>,<span class="w"> </span><span class="nv">SerialNumber</span><span class="o">=</span><span class="m">3</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:20:12<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">3</span>-4:<span class="w"> </span>Product:<span class="w"> </span>Composite<span class="w"> </span>KVM<span class="w"> </span>Device
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:20:12<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">3</span>-4:<span class="w"> </span>Manufacturer:<span class="w"> </span>PiKVM
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:20:12<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>usb<span class="w"> </span><span class="m">3</span>-4:<span class="w"> </span>SerialNumber:<span class="w"> </span>CAFEBABE
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:20:12<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>input:<span class="w"> </span>PiKVM<span class="w"> </span>Composite<span class="w"> </span>KVM<span class="w"> </span>Device<span class="w"> </span>as<span class="w"> </span>/devices/pci0000:00/0000:00:08.1/0000:0a:00.3/usb3/3-4/3-4:1.0/0003:1D6B:0104.0106/input/input259
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:20:12<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>hid-generic<span class="w"> </span><span class="m">0003</span>:1D6B:0104.0106:<span class="w"> </span>input,hidraw0:<span class="w"> </span>USB<span class="w"> </span>HID<span class="w"> </span>v1.01<span class="w"> </span>Keyboard<span class="w"> </span><span class="o">[</span>PiKVM<span class="w"> </span>Composite<span class="w"> </span>KVM<span class="w"> </span>Device<span class="o">]</span><span class="w"> </span>on<span class="w"> </span>usb-0000:0a:00.3-4/input0
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:20:12<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>input:<span class="w"> </span>PiKVM<span class="w"> </span>Composite<span class="w"> </span>KVM<span class="w"> </span>Device<span class="w"> </span>as<span class="w"> </span>/devices/pci0000:00/0000:00:08.1/0000:0a:00.3/usb3/3-4/3-4:1.1/0003:1D6B:0104.0107/input/input260
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:20:12<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>hid-generic<span class="w"> </span><span class="m">0003</span>:1D6B:0104.0107:<span class="w"> </span>input,hidraw1:<span class="w"> </span>USB<span class="w"> </span>HID<span class="w"> </span>v1.01<span class="w"> </span>Mouse<span class="w"> </span><span class="o">[</span>PiKVM<span class="w"> </span>Composite<span class="w"> </span>KVM<span class="w"> </span>Device<span class="o">]</span><span class="w"> </span>on<span class="w"> </span>usb-0000:0a:00.3-4/input1
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:20:12<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>input:<span class="w"> </span>PiKVM<span class="w"> </span>Composite<span class="w"> </span>KVM<span class="w"> </span>Device<span class="w"> </span>as<span class="w"> </span>/devices/pci0000:00/0000:00:08.1/0000:0a:00.3/usb3/3-4/3-4:1.2/0003:1D6B:0104.0108/input/input261
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="o">[</span>Tue<span class="w"> </span>Jul<span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">22</span>:20:12<span class="w"> </span><span class="m">2023</span><span class="o">]</span><span class="w"> </span>hid-generic<span class="w"> </span><span class="m">0003</span>:1D6B:0104.0108:<span class="w"> </span>input,hidraw2:<span class="w"> </span>USB<span class="w"> </span>HID<span class="w"> </span>v1.01<span class="w"> </span>Mouse<span class="w"> </span><span class="o">[</span>PiKVM<span class="w"> </span>Composite<span class="w"> </span>KVM<span class="w"> </span>Device<span class="o">]</span><span class="w"> </span>on<span class="w"> </span>usb-0000:0a:00.3-4/input2
</span></code></pre></div>
<p>lsusb 可以看到新出的设备</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>Bus 003 Device 035: ID 1d6b:0104 Linux Foundation Multifunction Composite Gadget
</span></code></pre></div>
<h3 id="给-web-添加证书">给 Web 添加证书<a class="headerlink" href="#给-web-添加证书" title="Permanent link">&para;</a></h3>
<p>kvm 网站使用 nginx，配置位于<code>/etc/kvmd/nginx/nginx.conf</code>，证书相关配置位于 <code>/etc/kvmd/nginx/ssl.conf</code></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>http {
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>        include /etc/kvmd/nginx/kvmd.ctx-http.conf;
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>        include /usr/share/kvmd/extras/*/nginx.ctx-http.conf;
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>        server {
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>                include /etc/kvmd/nginx/listen-http.conf;
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>                include /etc/kvmd/nginx/certbot.ctx-server.conf;
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>                include /etc/kvmd/nginx/redirect-to-https.conf;
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>        }
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>        server {
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>                include /etc/kvmd/nginx/listen-https.conf;
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>                include /etc/kvmd/nginx/ssl.conf;
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>                include /etc/kvmd/nginx/kvmd.ctx-server.conf;
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>                include /usr/share/kvmd/extras/*/nginx.ctx-server.conf;
</span><span id="__span-15-15"><a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a>        }
</span><span id="__span-15-16"><a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>}
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a># /etc/kvmd/nginx/ssl.conf
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>ssl_protocols TLSv1.3 TLSv1.2 TLSv1.1 TLSv1;
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>ssl_ciphers &quot;EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH&quot;;
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>ssl_certificate /etc/kvmd/nginx/ssl/server.crt;
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>ssl_certificate_key /etc/kvmd/nginx/ssl/server.key;
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>add_header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains&quot; always;
</span></code></pre></div>
<p>因此我在我更新证书的机器上添加一个定时任务即可。</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>#!/usr/bin/bash
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>scp &#39;/root/.acme.sh/*.yfycloud.site_ecc/fullchain.cer&#39; king6:/etc/kvmd/nginx/ssl/server.crt
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>scp &#39;/root/.acme.sh/*.yfycloud.site_ecc/*.yfycloud.site.key&#39; king6:/etc/kvmd/nginx/ssl/server.key
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>ssh king6 &#39;systemctl restart kvmd-nginx&#39;
</span></code></pre></div>
<h3 id="遇到的问题">遇到的问题<a class="headerlink" href="#遇到的问题" title="Permanent link">&para;</a></h3>
<h4 id="wg-quick-无法自启动">wg-quick 无法自启动<a class="headerlink" href="#wg-quick-无法自启动" title="Permanent link">&para;</a></h4>
<p><a href="https://github.com/NixOS/nixpkgs/issues/30459">Wireguard - waiting for DNS before trying to start the interface · Issue #30459 · NixOS/nixpkgs (github.com)</a></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>Aug 07 23:17:57 king3399 wg-quick[1167]: [#] ip link add wg0 type wireguard
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>Aug 07 23:17:57 king3399 wg-quick[1167]: [#] wg setconf wg0 /dev/fd/63
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>Aug 07 23:17:57 king3399 wg-quick[1241]: Name or service not known: `op1.my.to:51820&#39;
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>Aug 07 23:17:57 king3399 wg-quick[1241]: Configuration parsing error
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>Aug 07 23:17:57 king3399 wg-quick[1167]: [#] ip link delete dev wg0
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>Aug 07 23:17:58 king3399 systemd[1]: wg-quick@wg0.service: Main process exited, code=exited, status=1/FAILURE
</span></code></pre></div>
<h2 id="pi-kvm-文档">PI-KVM 文档<a class="headerlink" href="#pi-kvm-文档" title="Permanent link">&para;</a></h2>
<p><a href="https://github.com/pikvm">PiKVM Project (github.com)</a></p>
<ul>
<li>ustreamer 项目也是他们的</li>
<li>kvmd</li>
</ul>
<p>文档：<a href="https://docs.pikvm.org/">PiKVM Handbook</a></p>
<p>DIY: <a href="https://github.com/pikvm/pikvm#diy-getting-started">pikvm/pikvm: Open and inexpensive DIY IP-KVM based on Raspberry Pi (github.com)</a></p>
<h3 id="mouse-类型-absolute-vs-relative">mouse 类型 (absolute vs relative)<a class="headerlink" href="#mouse-类型-absolute-vs-relative" title="Permanent link">&para;</a></h3>
<p><a href="https://docs.pikvm.org/mouse/">Mouse modes - PiKVM Handbook</a>
There are two modes of pointer device: absolute and relative.</p>
<p>By default, PiKVM uses absolute positioning mode as the most convenient for the user and software. However, this is not always supported by the BIOS/UEFI. For such cases, support is provided for the relative mode of operation, which can be enabled in the config.</p>
<p><a href="https://docs.pikvm.org/usb_dynamic/">Dynamic USB configuration - PiKVM Handbook</a>
由于 bios 貌似对 absolute 鼠标兼容性不够好，可以直接禁用</p>
<blockquote>
<p>In rare cases, the host BIOS/UEFI may not understand such <strong>a large number of emulated devices on single USB port,</strong> so some of them may need to be disabled.</p>
<p>The <code>kvmd-otgconf</code> utility allows you to view and modify the USB configuration on the fly. It requires root permission and can be used for example from a web terminal.</p>
</blockquote>
<p>查看当前 otg usb 配置</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>~/ kvmd-otgconf
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>+ hid.usb0  # Keyboard
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>+ hid.usb1  # Absolute Mouse
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>+ hid.usb2  # Relative Mouse
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>kvmd-otgconf --disable-function mass_storage.usb0
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>kvmd-otgconf --enable-function mass_storage.usb0
</span></code></pre></div>
<h3 id="faq">FAQ<a class="headerlink" href="#faq" title="Permanent link">&para;</a></h3>
<p><strong>Can I use PiKVM for gaming?</strong></p>
<p>No, because:</p>
<ul>
<li>For HDMI-CSI bridge, bus bandwidth is not enough to transmit more than 1080p50.</li>
<li>For HDMI-USB dongle, high latency and low video quality.</li>
<li>General hardware video capture differs from software streaming and introduces additional latency.</li>
</ul>
<p><strong>Can I use PiKVM with non-Raspberry Pi boards (Orange, Nano, etc)?</strong></p>
<p>Yes, but you will have to prepare the operating system yourself. For the PiKVM software, you will need to replace some config files (such as UDEV rules). If you are a developer or an experienced system administrator, you will not have any problems with this. In addition, we are open to patches. If you need help with this, please contact us via <a href="https://discord.gg/bpmXfz5">Discord</a> (#unofficial_ports channel).</p>
<p><strong>video problem</strong></p>
<p><a href="https://docs.pikvm.org/faq/#video-problems">https://docs.pikvm.org/faq/#video-problems</a></p>
<p><strong>CSI bridge vs USB dongle</strong></p>
<p>The dongle is completely supported and PiKVM works great with it. But it has some disadvantages compared with recommended <a href="https://aliexpress.com/item/4000102166176.html">HDMI-CSI bridge</a>: USB gives a lot of latency (200ms vs 100ms for MJPEG) and it doesn't support stream compression control (you won't be able to use PiKVM in a place with a poor internet connection). There is no H.264 support at the moment. It also cannot automatically detect screen resolution. All this is caused by the hardware limitations of the dongle itself. In addition, some users report hardware problems: the dongle may not work in the BIOS or simply stop working after a while. It's a black box, and no one knows what's inside it. If you have problems with it, it will not be possible to fix them.</p>
<h2 id="开机-diy-方案">开机 DIY 方案<a class="headerlink" href="#开机-diy-方案" title="Permanent link">&para;</a></h2>
<h3 id="atx-pwr-引脚">ATX PWR 引脚<a class="headerlink" href="#atx-pwr-引脚" title="Permanent link">&para;</a></h3>
<p>台式机的开关机，是由主板上的一组引脚控制的。主板手册中会把这些引脚叫做前面板引脚，因为这些引脚用于连接机箱前面板的一些 I/O。这些引脚，通常有 4 组。其中 PWR 和 RST 用于控制开关机和 Reset。而 PWR LED 和 HDD LED 用于在前面板显示开机状态和硬盘活动状态。</p>
<p>华硕 b550 重炮手主板手册内容如下。<code>#</code> 表示低电平有效。
<img alt="image.png" src="https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20240629134027.png" /></p>
<p>这是华硕 ROG Strix X570 的手册内容
<img alt="image.png" src="https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20240629134112.png" /></p>
<h3 id="pi-kvm-的方案">Pi KVM 的方案<a class="headerlink" href="#pi-kvm-的方案" title="Permanent link">&para;</a></h3>
<p>Pi KVM 的方案：<a href="https://docs.pikvm.org/atx_board/#detailed-instructions">ATX control board - PiKVM Handbook</a></p>
<h4 id="连线">连线<a class="headerlink" href="#连线" title="Permanent link">&para;</a></h4>
<p>Pi KVM 方案的原理就是~~通过 GPIO 控制 ATX PWR 等引脚~~，通过 GPIO 控制光耦继电器开关，短接 PWR 引脚（电源键按下也是短接 PWR 引脚）。特点是连线方式做了优化。</p>
<ul>
<li>首先，PIKVM 有一个板子用于将 atx 控制线转成 <strong>RJ45</strong>。板子可以 3d 打印一个 pcie slot 支架。这样，ATX 控制线就可以通过 pcie slot 暴露到机箱外了。</li>
</ul>
<p><img alt="image.png" src="https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20240714152941.png" /></p>
<h4 id="gpio-控制">GPIO 控制<a class="headerlink" href="#gpio-控制" title="Permanent link">&para;</a></h4>
<p><a href="https://docs.pikvm.org/gpio/">GPIO (pins, relays, lamps, etc) - PiKVM Handbook</a></p>
<p>Pi KVM 自己实现了一套对 GPIO 的控制方法，使用 yaml 配置文件配置。抽象了一些高级行为，这样就不用自己去直接操作 GPIO 驱动了。比如可以配置 pulse 模式，delay 时间等。</p>
<p>使用 Pi KVM 的方法，甚至还可以配置 Web 中显示的样式。实现自定义的按钮等。
<img alt="image.png" src="https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20240714152907.png" /></p>
<h3 id="nanokvm">nanoKVM<a class="headerlink" href="#nanokvm" title="Permanent link">&para;</a></h3>
<p>其实除了像 PiKVM 使用 RJ45 引出 GPIO，还可以使用 usb 引出 GPIO，毕竟只是引脚。</p>
<p>主板 GPIO 转 usb
<img alt="image.png" src="https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20240717195304.png" /></p>
<p>usb 接光耦继电器接 ATX PWR 引脚
<img alt="image.png" src="https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20240717195250.png" /></p>
<h3 id="sbc-diy-方案">SBC DIY 方案<a class="headerlink" href="#sbc-diy-方案" title="Permanent link">&para;</a></h3>
<p>自己使用普通单板计算机 DIY 有两种方案</p>
<ul>
<li>SBC 的 GPIO 直接连接 ATX 引脚</li>
<li>引入一个继电器，继电器连接台式机开机键。SBC 控制继电器的开和关。</li>
</ul>
<p>不同主板引脚电压定义可能不同，第一种方案存在一定问题。</p>
<p><strong>UPDATE(2024-07-17)</strong>：我发现有一个误解，以为这里的 PWR+,- 需要产生高/低电平信号才行。其实这里两个引脚短接就能触发。这里讨论的 GPIO 直连方案，其实是因为短接的效果是让一边变为 GND（假设两根引脚 PWR, GND 布局），所以 GPIO 将其拉低能起到一样的效果。GPIO 直连方案的有点可能在于省了一个继电器（2-3 元）。</p>
<h4 id="tg-对话记录">Tg 对话记录<a class="headerlink" href="#tg-对话记录" title="Permanent link">&para;</a></h4>
<p>请教下需要买什么线连接呢？gpio 和 ATX 引脚间需要继电器吗？有没有博客教程？
跟atx没关系
直接连到开机键前面板连接器上</p>
<p>我觉得你共地之后就可以直接去拉主板的电平了（
啊，那种模块也行
不过为什么不直接去拉电平呢</p>
<p>因为你不知道该拉哪根线，拉高还是拉低，拉错了还可能短路</p>
<p>梓瑶 | struct virt_dma_chan *, [2024/6/29 2:44]
肯定是拉 PWR_BUT# 啊，ATX 那边的引脚既然悬空状态也稳定并且低电平有效肯定有内部上拉，外部只需要手动拉低掉就可以了（</p>
<p>t, [2024/6/29 2:46]
ATX那边引脚 你拉了也不一定开机</p>
<p>t, [2024/6/29 2:46]
最好的办法还是控制电源按钮</p>
<p>t, [2024/6/29 2:46]
像这种PW+ PW-</p>
<p>t, [2024/6/29 2:46]
你怎么知道拉哪一个</p>
<p>梓瑶 | struct virt_dma_chan *, [2024/6/29 2:47]
对地测一下电压就好了啊（</p>
<p>t, [2024/6/29 2:47]
一个3.3，一个0，你拉哪个？</p>
<p>t, [2024/6/29 2:48]
万一3.3那个是VCC，0那个才是实际控制的？</p>
<p>t, [2024/6/29 2:48]
你根本不知道</p>
<p>好吧（
我一直基于一个是 PWR# 一个是 GND 的板子在思考（我只遇到过这样的</p>
<h2 id="king3399-gpio-控制">King3399 GPIO 控制<a class="headerlink" href="#king3399-gpio-控制" title="Permanent link">&para;</a></h2>
<h3 id="资料手册">资料手册<a class="headerlink" href="#资料手册" title="Permanent link">&para;</a></h3>
<p>需要什么资料手册</p>
<ul>
<li>King3399底板-硬件规格书_20180105.pdf<ul>
<li>包含了板子接口，对应的引脚定义。<ul>
<li>比如可以知道板子上某个引脚为 GPIO 引脚，定义为 IO4_C5。通过计算得到对应的编号，从而在 linux 中进行控制。</li>
</ul>
</li>
</ul>
</li>
<li>KING3399-20180712原理图.pdf<ul>
<li>包含了所有的电路，但是不知道上面的引脚怎么看，怎么和实际板子对应起来。</li>
</ul>
</li>
</ul>
<p>Rockchip RK3399 datasheet，显示了 SoC 包含的 GPIO 资源。</p>
<p>GPIO</p>
<ul>
<li>5 groups of GPIO (GPIO0~GPIO4), totally have 122 GPIOs</li>
<li>All of GPIOs can be used to generate interrupt to CPU</li>
<li>GPIO0 and GPIO1 can be used to wakeup system from low-power mode</li>
<li>The pull direction (pull-up or pull-down) for all of GPIOs are software programmable</li>
<li>All of GPIOs are always in input direction in default after power-on-reset</li>
<li>The drive strength for all of GPIOs is software-programmable</li>
</ul>
<h3 id="两种控制-gpio-的方式">两种控制 gpio 的方式<a class="headerlink" href="#两种控制-gpio-的方式" title="Permanent link">&para;</a></h3>
<h4 id="重新编译镜像方式">重新编译镜像方式<a class="headerlink" href="#重新编译镜像方式" title="Permanent link">&para;</a></h4>
<p>为了方便客户使用gpio，我们做了一个驱动导出了gpio控制节点供用户控制gpio的状态</p>
<ul>
<li>适用平台：支持荣品大部分平台</li>
<li>适用对象：有能力修改编译源码</li>
<li>重新编译源码，烧录镜像后，方才生效</li>
</ul>
<ul>
<li>打开主设备树文件，如rp-rk3399：<code>kernel/arch/arm/boot/dts/rp3399-linux.dts</code></li>
<li>
<p>找到 rp_gpio 节点添加配置</p>
<ul>
<li>示例：配置GPIO5_C0功能输出功能</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>rp_gpio{
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>    status = &quot;okay&quot;;
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>    compatible = &quot;rp_gpio&quot;;
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>    gpio5c0 { //编译烧录后与板子上 /proc/rp_gpio/目录下节点名称一致
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>        gpio_num = &lt;&amp;gpio5 RK_PC0 GPIO_ACTIVE_HIGH&gt;;
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>        gpio_function = &lt;0&gt;;
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>    };
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>};
</span></code></pre></div>
</li>
</ul>
<ul>
<li>开发板上控制配置好的gpio：</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>  cat /proc/rp_gpio/gpio1b7 # 读取
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>  echo 1 &gt; /proc/rp_gpio/gpio1b7 # 拉高
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>  echo 0 &gt; /proc/rp_gpio/gpio1b7 # 拉低
</span></code></pre></div>
<p>更详细的配置和使用说明请查看网盘： 02-软件文档/荣品文档/驱动调试/GPIO</p>
<h4 id="控制任意-gpio">控制任意 GPIO<a class="headerlink" href="#控制任意-gpio" title="Permanent link">&para;</a></h4>
<p>适用平台：任何支持 gpiolib 的平台
适用对象：不想编译SDK的情况下，亦可控制GPIO</p>
<p>GPIO 编号计算</p>
<p>GPIO编号 = BANK <em>32 + GPIO_PIN
<code>GPIO&lt;N&gt;_&lt;M&gt;&lt;P&gt;</code> = N</em> 32 + 8 * (M -1) + P</p>
<p>示例：</p>
<ul>
<li>GPIO7_C2 = 7 X 32 + 8 X (3-1) + 2 = 242</li>
<li>GPIO2_A1 = 2 X 32 + 8 X (1-1) + 1 = 73</li>
</ul>
<p>A对应1，B对应2，C对应3，以此类推</p>
<p>注意事项</p>
<p>1、通过原理图谨慎确认对应GPIO口连接情况，若操作不当，会造成严重后果
2、并非所有GPIO都能控制，若操作失败，请更换GPIO尝试
3、系统重启后需要重新导出GPIO、设置模式</p>
<p>示例：设置GPIO2_D1为高电平</p>
<ul>
<li>导出GPIO2_D1引脚</li>
<li>echo 89 &gt; /sys/class/gpio/export</li>
<li>导出成功后，会生成/sys/class/gpio/gpio89目录</li>
<li>若没有生成，说明该引脚不可导出</li>
<li>设置GPIO2_D1引脚为输出模式</li>
<li>echo out &gt; /sys/class/gpio/gpio89/direction</li>
<li>设置GPIO2_D1引脚高电平</li>
<li>echo 1 &gt; /sys/class/gpio/gpio89/value</li>
</ul>
<p>示例：读取GPIO7_C2电平</p>
<ul>
<li>导出GPIO7_C2引脚</li>
<li>echo 242 &gt; /sys/class/gpio/export</li>
<li>设置GPIO7_C2引脚为输出模式</li>
<li>echo in &gt; /sys/class/gpio/gpio242/direction</li>
<li>设置GPIO7_C2引脚高电平</li>
<li>cat /sys/class/gpio/gpio242/value</li>
</ul>
<h3 id="查看-gpio-方式chatgpt">查看 GPIO 方式（ChatGPT）<a class="headerlink" href="#查看-gpio-方式chatgpt" title="Permanent link">&para;</a></h3>
<p>嵌入式开发板，如何查看当前的所有 GPIO</p>
<ul>
<li>使用 <code>/sys/class/gpio</code> 文件系统<ul>
<li>查看已导出的 GPIO 引脚，如 <code>gpio503</code></li>
<li>查看可用的 GPIO 芯片，如 <code>gpiochip0</code>, <code>gpiochip1</code> 等。查看这些目录可以了解每个芯片上的 GPIO 引脚范围。</li>
</ul>
</li>
<li>使用 <code>gpioinfo</code> 命令<ul>
<li>如果系统上安装了 <code>libgpiod</code> 工具集，可以使用 <code>gpioinfo</code> 命令来查看所有 GPIO 引脚的信息。<code>libgpiod</code> 是一个新的 GPIO 控制库和工具集，旨在替代 <code>/sys/class/gpio</code> 接口。<ul>
<li>apt-get install gpiod</li>
</ul>
</li>
</ul>
</li>
<li>查看设备树（Device Tree）<ul>
<li>在一些嵌入式系统中，GPIO 引脚配置在设备树文件中，可以通过查看设备树来了解 GPIO 引脚的信息。</li>
<li>设备树文件通常位于 <code>/boot/</code> 目录或 <code>/proc/device-tree/</code> 目录中</li>
<li>设备树文件通常是二进制格式，可以使用 <code>dtc</code>（设备树编译器）来解码为人类可读的格式。例如：<code>dtc -I dtb -O dts -o devicetree.dts /path/to/device-tree-file.dtb</code></li>
</ul>
</li>
<li>查看开发板的文档和手册</li>
</ul>
<h3 id="实践">实践<a class="headerlink" href="#实践" title="Permanent link">&para;</a></h3>
<p>查看底板规格书。发现标号 18 的接口中（位于排针中一段），有几个 GPIO 引脚。</p>
<p>不清楚它的脚位是怎么数的。不过板子上也有文字，从文字和定义可以看出顺序。</p>
<table>
<thead>
<tr>
<th>脚位</th>
<th>定义</th>
<th>当前 IO 状态</th>
<th>IO 电压</th>
<th>功能一</th>
</tr>
</thead>
<tbody>
<tr>
<td>41</td>
<td>SCL1</td>
<td>输出</td>
<td>1V8</td>
<td></td>
</tr>
<tr>
<td>42</td>
<td>SDA1</td>
<td>输入输出</td>
<td>1v8</td>
<td></td>
</tr>
<tr>
<td>43</td>
<td>ADC0</td>
<td>输入</td>
<td>1V8</td>
<td></td>
</tr>
<tr>
<td>44</td>
<td>IO4_C5</td>
<td>输入输出</td>
<td>3v</td>
<td>GPIO</td>
</tr>
<tr>
<td>45</td>
<td>IO4_D0</td>
<td>输入输出</td>
<td>3v</td>
<td>GPIO</td>
</tr>
<tr>
<td>46</td>
<td>GND</td>
<td>接地</td>
<td>0v</td>
<td></td>
</tr>
<tr>
<td>47</td>
<td>IO4_D5</td>
<td>输入输出</td>
<td>3v</td>
<td>GPIO</td>
</tr>
<tr>
<td>48</td>
<td>IO4_D1</td>
<td>输入输出</td>
<td>3v</td>
<td>GPIO</td>
</tr>
<tr>
<td>49</td>
<td>NC</td>
<td>NC</td>
<td>0v</td>
<td></td>
</tr>
<tr>
<td>50</td>
<td>GND</td>
<td>接地</td>
<td>0v</td>
<td></td>
</tr>
</tbody>
</table>
<p><img alt="image.png" src="https://raw.githubusercontent.com/TheRainstorm/.image-bed/main/20240715102716.png" /></p>
<p>将 led 一端接在板子的 GND，一端接在上面 4 个 GPIO 中，发现接在 pin45 IO4_D0 上时，会和板子上的一个红色 led 灯同步闪烁。</p>
<p>之前也使用了 gpioinfo 查看了所有 GPIO 信息。可以猜测，IO4_D0 对应 gpiochip4 line 24 的 breathe_led</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>gpiochip4 - 32 lines:
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>        line   0:      unnamed       unused   input  active-high
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>        line   1:      unnamed       unused   input  active-high
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>        line   2:      unnamed       unused   input  active-high
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>        line   3:      unnamed       unused   input  active-high
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>        line   4:      unnamed       unused   input  active-high
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>        line   5:      unnamed       unused   input  active-high
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>        line   6:      unnamed       unused   input  active-high
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>        line   7:      unnamed       unused   input  active-high
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a>        line   8:      unnamed       unused   input  active-high
</span><span id="__span-23-11"><a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a>        line   9:      unnamed       unused   input  active-high
</span><span id="__span-23-12"><a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a>        line  10:      unnamed       unused   input  active-high
</span><span id="__span-23-13"><a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a>        line  11:      unnamed       unused   input  active-high
</span><span id="__span-23-14"><a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a>        line  12:      unnamed       unused   input  active-high
</span><span id="__span-23-15"><a id="__codelineno-23-15" name="__codelineno-23-15" href="#__codelineno-23-15"></a>        line  13:      unnamed       unused   input  active-high
</span><span id="__span-23-16"><a id="__codelineno-23-16" name="__codelineno-23-16" href="#__codelineno-23-16"></a>        line  14:      unnamed       unused   input  active-high
</span><span id="__span-23-17"><a id="__codelineno-23-17" name="__codelineno-23-17" href="#__codelineno-23-17"></a>        line  15:      unnamed       unused   input  active-high
</span><span id="__span-23-18"><a id="__codelineno-23-18" name="__codelineno-23-18" href="#__codelineno-23-18"></a>        line  16:      unnamed       unused   input  active-high
</span><span id="__span-23-19"><a id="__codelineno-23-19" name="__codelineno-23-19" href="#__codelineno-23-19"></a>        line  17:      unnamed       unused   input  active-high
</span><span id="__span-23-20"><a id="__codelineno-23-20" name="__codelineno-23-20" href="#__codelineno-23-20"></a>        line  18:      unnamed       unused   input  active-high
</span><span id="__span-23-21"><a id="__codelineno-23-21" name="__codelineno-23-21" href="#__codelineno-23-21"></a>        line  19:      unnamed       unused   input  active-high
</span><span id="__span-23-22"><a id="__codelineno-23-22" name="__codelineno-23-22" href="#__codelineno-23-22"></a>        line  20:      unnamed       unused   input  active-high
</span><span id="__span-23-23"><a id="__codelineno-23-23" name="__codelineno-23-23" href="#__codelineno-23-23"></a>        line  21:      unnamed       unused   input  active-high
</span><span id="__span-23-24"><a id="__codelineno-23-24" name="__codelineno-23-24" href="#__codelineno-23-24"></a>        line  22:      unnamed &quot;vcc3v3-gsm&quot;  output  active-high [used]
</span><span id="__span-23-25"><a id="__codelineno-23-25" name="__codelineno-23-25" href="#__codelineno-23-25"></a>        line  23:      unnamed       unused   input  active-high
</span><span id="__span-23-26"><a id="__codelineno-23-26" name="__codelineno-23-26" href="#__codelineno-23-26"></a>        line  24:      unnamed &quot;breathe_led&quot; output active-low [used]
</span><span id="__span-23-27"><a id="__codelineno-23-27" name="__codelineno-23-27" href="#__codelineno-23-27"></a>        line  25:      unnamed       unused   input  active-high
</span><span id="__span-23-28"><a id="__codelineno-23-28" name="__codelineno-23-28" href="#__codelineno-23-28"></a>        line  26:      unnamed &quot;vbus-typec-regulator&quot; output active-high [used]
</span><span id="__span-23-29"><a id="__codelineno-23-29" name="__codelineno-23-29" href="#__codelineno-23-29"></a>        line  27:      unnamed       unused  output  active-high
</span><span id="__span-23-30"><a id="__codelineno-23-30" name="__codelineno-23-30" href="#__codelineno-23-30"></a>        line  28:      unnamed       unused   input  active-high
</span><span id="__span-23-31"><a id="__codelineno-23-31" name="__codelineno-23-31" href="#__codelineno-23-31"></a>        line  29:      unnamed       unused   input  active-high
</span><span id="__span-23-32"><a id="__codelineno-23-32" name="__codelineno-23-32" href="#__codelineno-23-32"></a>        line  30:      unnamed &quot;vcc5v0-host-regulator&quot; output active-high [used]
</span><span id="__span-23-33"><a id="__codelineno-23-33" name="__codelineno-23-33" href="#__codelineno-23-33"></a>        line  31:      unnamed       unused   input  active-high
</span></code></pre></div>
<p>由此，可以发现剩余 3 个 gpio 都是 unused。通过前面的计算编号的方式，可以使用剩余 3 个 GPIO</p>
<p>io4_c5 = 21 = 149
io4_d0 = 24
io4_d5 = 29 = 157
io4_d1 = 25 = 153</p>
<h4 id="dts">dts<a class="headerlink" href="#dts" title="Permanent link">&para;</a></h4>
<p>本来还想通过修改 dts 文件的方式使用 GPIO，最后发现并不能用。可能 rp_gpio 驱动没有集成，需要自己重新编译系统。</p>
<p>breathe_led 的 dts 配置</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>leds {
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>                compatible = &quot;gpio-leds&quot;;
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>                pinctrl-names = &quot;default&quot;;
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>                pinctrl-0 = &lt;0xde&gt;;
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>                led-breathe-led {
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>                        label = &quot;breathe_led&quot;;
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>                        linux,default-trigger = &quot;heartbeat&quot;;
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>                        default-state = &quot;off&quot;;
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>                        gpios = &lt;0xd4 0x18 0x01&gt;;
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>                        phandle = &lt;0x173&gt;;
</span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a>                };
</span><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a>        };
</span></code></pre></div>
<p>其中 0xd4 可以对应 pinctrl 中 gpio4 的 phandle</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>pinctrl {
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>                compatible = &quot;rockchip,rk3399-pinctrl&quot;;
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>                rockchip,grf = &lt;0x19&gt;;
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>                rockchip,pmu = &lt;0x11&gt;;
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>                #address-cells = &lt;0x02&gt;;
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>                #size-cells = &lt;0x02&gt;;
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>                ranges;
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>                phandle = &lt;0x139&gt;;
</span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>
</span><span id="__span-25-10"><a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a>                gpio@ff720000 {
</span><span id="__span-25-11"><a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a>                        compatible = &quot;rockchip,gpio-bank&quot;;
</span><span id="__span-25-12"><a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>                        reg = &lt;0x00 0xff720000 0x00 0x100&gt;;
</span><span id="__span-25-13"><a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>                        clocks = &lt;0x81 0x17&gt;;
</span><span id="__span-25-14"><a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a>                        interrupts = &lt;0x00 0x0e 0x04 0x00&gt;;
</span><span id="__span-25-15"><a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a>                        gpio-controller;
</span><span id="__span-25-16"><a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a>                        #gpio-cells = &lt;0x02&gt;;
</span><span id="__span-25-17"><a id="__codelineno-25-17" name="__codelineno-25-17" href="#__codelineno-25-17"></a>                        interrupt-controller;
</span><span id="__span-25-18"><a id="__codelineno-25-18" name="__codelineno-25-18" href="#__codelineno-25-18"></a>                        #interrupt-cells = &lt;0x02&gt;;
</span><span id="__span-25-19"><a id="__codelineno-25-19" name="__codelineno-25-19" href="#__codelineno-25-19"></a>                        phandle = &lt;0x25&gt;;
</span><span id="__span-25-20"><a id="__codelineno-25-20" name="__codelineno-25-20" href="#__codelineno-25-20"></a>                };
</span><span id="__span-25-21"><a id="__codelineno-25-21" name="__codelineno-25-21" href="#__codelineno-25-21"></a>
</span><span id="__span-25-22"><a id="__codelineno-25-22" name="__codelineno-25-22" href="#__codelineno-25-22"></a>                gpio@ff730000 {
</span><span id="__span-25-23"><a id="__codelineno-25-23" name="__codelineno-25-23" href="#__codelineno-25-23"></a>                        compatible = &quot;rockchip,gpio-bank&quot;;
</span><span id="__span-25-24"><a id="__codelineno-25-24" name="__codelineno-25-24" href="#__codelineno-25-24"></a>                        reg = &lt;0x00 0xff730000 0x00 0x100&gt;;
</span><span id="__span-25-25"><a id="__codelineno-25-25" name="__codelineno-25-25" href="#__codelineno-25-25"></a>                        clocks = &lt;0x81 0x18&gt;;
</span><span id="__span-25-26"><a id="__codelineno-25-26" name="__codelineno-25-26" href="#__codelineno-25-26"></a>                        interrupts = &lt;0x00 0x0f 0x04 0x00&gt;;
</span><span id="__span-25-27"><a id="__codelineno-25-27" name="__codelineno-25-27" href="#__codelineno-25-27"></a>                        gpio-controller;
</span><span id="__span-25-28"><a id="__codelineno-25-28" name="__codelineno-25-28" href="#__codelineno-25-28"></a>                        #gpio-cells = &lt;0x02&gt;;
</span><span id="__span-25-29"><a id="__codelineno-25-29" name="__codelineno-25-29" href="#__codelineno-25-29"></a>                        interrupt-controller;
</span><span id="__span-25-30"><a id="__codelineno-25-30" name="__codelineno-25-30" href="#__codelineno-25-30"></a>                        #interrupt-cells = &lt;0x02&gt;;
</span><span id="__span-25-31"><a id="__codelineno-25-31" name="__codelineno-25-31" href="#__codelineno-25-31"></a>                        phandle = &lt;0x88&gt;;
</span><span id="__span-25-32"><a id="__codelineno-25-32" name="__codelineno-25-32" href="#__codelineno-25-32"></a>                };
</span><span id="__span-25-33"><a id="__codelineno-25-33" name="__codelineno-25-33" href="#__codelineno-25-33"></a>
</span><span id="__span-25-34"><a id="__codelineno-25-34" name="__codelineno-25-34" href="#__codelineno-25-34"></a>                gpio@ff780000 {
</span><span id="__span-25-35"><a id="__codelineno-25-35" name="__codelineno-25-35" href="#__codelineno-25-35"></a>                        compatible = &quot;rockchip,gpio-bank&quot;;
</span><span id="__span-25-36"><a id="__codelineno-25-36" name="__codelineno-25-36" href="#__codelineno-25-36"></a>                        reg = &lt;0x00 0xff780000 0x00 0x100&gt;;
</span><span id="__span-25-37"><a id="__codelineno-25-37" name="__codelineno-25-37" href="#__codelineno-25-37"></a>                        clocks = &lt;0x08 0x150&gt;;
</span><span id="__span-25-38"><a id="__codelineno-25-38" name="__codelineno-25-38" href="#__codelineno-25-38"></a>                        interrupts = &lt;0x00 0x10 0x04 0x00&gt;;
</span><span id="__span-25-39"><a id="__codelineno-25-39" name="__codelineno-25-39" href="#__codelineno-25-39"></a>                        gpio-controller;
</span><span id="__span-25-40"><a id="__codelineno-25-40" name="__codelineno-25-40" href="#__codelineno-25-40"></a>                        #gpio-cells = &lt;0x02&gt;;
</span><span id="__span-25-41"><a id="__codelineno-25-41" name="__codelineno-25-41" href="#__codelineno-25-41"></a>                        interrupt-controller;
</span><span id="__span-25-42"><a id="__codelineno-25-42" name="__codelineno-25-42" href="#__codelineno-25-42"></a>                        #interrupt-cells = &lt;0x02&gt;;
</span><span id="__span-25-43"><a id="__codelineno-25-43" name="__codelineno-25-43" href="#__codelineno-25-43"></a>                        phandle = &lt;0x44&gt;;
</span><span id="__span-25-44"><a id="__codelineno-25-44" name="__codelineno-25-44" href="#__codelineno-25-44"></a>                };
</span><span id="__span-25-45"><a id="__codelineno-25-45" name="__codelineno-25-45" href="#__codelineno-25-45"></a>
</span><span id="__span-25-46"><a id="__codelineno-25-46" name="__codelineno-25-46" href="#__codelineno-25-46"></a>                gpio@ff788000 {
</span><span id="__span-25-47"><a id="__codelineno-25-47" name="__codelineno-25-47" href="#__codelineno-25-47"></a>                        compatible = &quot;rockchip,gpio-bank&quot;;
</span><span id="__span-25-48"><a id="__codelineno-25-48" name="__codelineno-25-48" href="#__codelineno-25-48"></a>                        reg = &lt;0x00 0xff788000 0x00 0x100&gt;;
</span><span id="__span-25-49"><a id="__codelineno-25-49" name="__codelineno-25-49" href="#__codelineno-25-49"></a>                        clocks = &lt;0x08 0x151&gt;;
</span><span id="__span-25-50"><a id="__codelineno-25-50" name="__codelineno-25-50" href="#__codelineno-25-50"></a>                        interrupts = &lt;0x00 0x11 0x04 0x00&gt;;
</span><span id="__span-25-51"><a id="__codelineno-25-51" name="__codelineno-25-51" href="#__codelineno-25-51"></a>                        gpio-controller;
</span><span id="__span-25-52"><a id="__codelineno-25-52" name="__codelineno-25-52" href="#__codelineno-25-52"></a>                        #gpio-cells = &lt;0x02&gt;;
</span><span id="__span-25-53"><a id="__codelineno-25-53" name="__codelineno-25-53" href="#__codelineno-25-53"></a>                        interrupt-controller;
</span><span id="__span-25-54"><a id="__codelineno-25-54" name="__codelineno-25-54" href="#__codelineno-25-54"></a>                        #interrupt-cells = &lt;0x02&gt;;
</span><span id="__span-25-55"><a id="__codelineno-25-55" name="__codelineno-25-55" href="#__codelineno-25-55"></a>                        phandle = &lt;0x20&gt;;
</span><span id="__span-25-56"><a id="__codelineno-25-56" name="__codelineno-25-56" href="#__codelineno-25-56"></a>                };
</span><span id="__span-25-57"><a id="__codelineno-25-57" name="__codelineno-25-57" href="#__codelineno-25-57"></a>
</span><span id="__span-25-58"><a id="__codelineno-25-58" name="__codelineno-25-58" href="#__codelineno-25-58"></a>                gpio@ff790000 {
</span><span id="__span-25-59"><a id="__codelineno-25-59" name="__codelineno-25-59" href="#__codelineno-25-59"></a>                        compatible = &quot;rockchip,gpio-bank&quot;;
</span><span id="__span-25-60"><a id="__codelineno-25-60" name="__codelineno-25-60" href="#__codelineno-25-60"></a>                        reg = &lt;0x00 0xff790000 0x00 0x100&gt;;
</span><span id="__span-25-61"><a id="__codelineno-25-61" name="__codelineno-25-61" href="#__codelineno-25-61"></a>                        clocks = &lt;0x08 0x152&gt;;
</span><span id="__span-25-62"><a id="__codelineno-25-62" name="__codelineno-25-62" href="#__codelineno-25-62"></a>                        interrupts = &lt;0x00 0x12 0x04 0x00&gt;;
</span><span id="__span-25-63"><a id="__codelineno-25-63" name="__codelineno-25-63" href="#__codelineno-25-63"></a>                        gpio-controller;
</span><span id="__span-25-64"><a id="__codelineno-25-64" name="__codelineno-25-64" href="#__codelineno-25-64"></a>                        #gpio-cells = &lt;0x02&gt;;
</span><span id="__span-25-65"><a id="__codelineno-25-65" name="__codelineno-25-65" href="#__codelineno-25-65"></a>                        interrupt-controller;
</span><span id="__span-25-66"><a id="__codelineno-25-66" name="__codelineno-25-66" href="#__codelineno-25-66"></a>                        #interrupt-cells = &lt;0x02&gt;;
</span><span id="__span-25-67"><a id="__codelineno-25-67" name="__codelineno-25-67" href="#__codelineno-25-67"></a>                        phandle = &lt;0xd4&gt;;
</span><span id="__span-25-68"><a id="__codelineno-25-68" name="__codelineno-25-68" href="#__codelineno-25-68"></a>                };
</span></code></pre></div>
<h2 id="sim-卡上网">SIM 卡上网<a class="headerlink" href="#sim-卡上网" title="Permanent link">&para;</a></h2>
<p><a href="https://blog.sparktour.me/posts/2022/10/08/quectel-ec20-asterisk-freepbx-gsm-gateway/">使用EC20模块配合asterisk及freepbx实现短信转发和网络电话 | Sparktour's Blog</a></p>
<p>king3399 支持插入 4G模块</p>







  
  




  



      
    </article>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
        
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../../../../../%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/2023/04/20/2023-04-20-%E5%85%B7%E4%BD%93%E6%95%B0%E5%AD%A6/" class="md-footer__link md-footer__link--prev" aria-label="上一页: 具体数学">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                具体数学
              </div>
            </div>
          </a>
        
        
          
          <a href="../../24/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E8%BF%90%E8%A1%8Cswitch%E6%A8%A1%E6%8B%9F%E5%99%A8/" class="md-footer__link md-footer__link--next" aria-label="下一页: 服务器上运行switch模拟器（linux 云游戏）">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                服务器上运行switch模拟器（linux 云游戏）
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/TheRainstorm" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.footer", "content.code.copy", "toc.follow", "toc.integrate"], "search": "../../../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="../../../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>